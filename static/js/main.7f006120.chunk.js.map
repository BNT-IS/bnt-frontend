{"version":3,"sources":["Guest/Components/WalletSetup.js","Guest/Components/UserMainMenu.js","Guest/Components/Obliterator.js","Guest/Components/TicketOverview.js","Guest/Guest.js","Utilities/Components/QRScanner.js","Utilities/Components/Dialog.js","EventManagement/Classes/TicketReader.js","EntranceManagement/EntranceManagement.js","EventManagement/Classes/LocalTicketMirror.js","EventManagement/Components/IndexedDBExample.js","EventManagement/Classes/RemoteTicketReader.js","EventManagement/Components/TicketReaderManager.js","EventManagement/EventManagement.js","App.js","serviceWorker.js","index.js"],"names":["WalletSetup","props","state","sign","bind","connectWallet","this","init","alert","setState","walletAvailable","window","ethereum","walletLink","WalletLink","appName","appLogoUrl","darkMode","makeWeb3Provider","connected","selectedAddress","web3","Web3","enable","catch","displayError","accounts","console","log","eth","defaultAccount","from","msg","utils","stringToHex","params","currentProvider","send","method","err","result","error","recovered","recover","toLowerCase","open","Box","className","direction","gap","pad","Text","Button","label","onClick","linkToDownloadMetaMask","React","Component","UserMainMenu","to","Obliterator","qrcode","undefined","givenProvider","connect","getSelectedAddress","sendAsync","signature","QRCode","toDataURL","then","url","getAccounts","src","alt","width","height","ticketType","onReady","TicketOverview","obliterate","onReadyHandler","Guest","Header","background","justify","Menu","items","path","QRScanner","video","createRef","canvasElement","startScan","tick","stopScan","current","readyState","HAVE_ENOUGH_DATA","canvas","drawImage","imageData","getImageData","code","jsQR","data","inversionAttempts","contentType","match","groups","address","onDone","requestAnimationFrame","navigator","mediaDevices","getUserMedia","facingMode","stream","getContext","srcObject","setAttribute","play","isScanning","getVideoTracks","stop","ref","hidden","Dialog","title","onAbort","children","TicketReader","requestMap","Map","_iceCandidatesHandler","_dataChannelOpenHandler","_receiveChannelHandler","_generateAnswerCode","setMasterConfig","_dataChannelClosedHandler","_connectionChangeHandler","_initConnection","icecandidates","localPeerConnection","RTCPeerConnection","addEventListener","event","push","candidate","answer","setTimeout","debug","target","iceConnectionState","onDisconnected","dataChannel","channel","_messageHandler","dt","Date","getTime","replace","c","r","Math","random","floor","toString","identifier","Promise","resolve","reject","reqId","_createUUID","set","type","context","JSON","stringify","e","candidates","binaryString","pako","deflate","level","onAnswerCode","obj","parse","inflate","setRemoteDescription","RTCSessionDescription","offer","forEach","addIceCandidate","createAnswer","setLocalDescription","EntranceManagement","connectTicketReader","ticketReader","connectTR","TRQRCode","connectTRStep","readTicketRemote","obliterateTicketRemote","LocalTicketMirror","_createDB","dumpTicketMirror","getTicketList","indexedDB","Error","waitingForIDBReadyQueue","_initDB","request","ev","db","errorCode","createObjectStore","keyPath","_getIDB","objectStore","transaction","item","add","a","getAll","onerror","onsuccess","tickets","get","ticket","isValid","isUsed","requestUpdate","put","IndexedDBExample","handleDumpMirror","showTickets","localTicketMirror","ltm","map","key","RemoteTicketReader","_generateOfferCode","setTicketReaderConfig","onOfferCode","onGetTicket","callback","onObliterateTicket","createDataChannel","_createOffer","errorMsg","answerMsg","errorMessage","success","createOffer","handleError","TicketReaderManager","connectRemoteTicketReader","remoteTicketReader","connectRTR","onRTR","RTRQRCode","addRTRStep","RTRList","length","EventManagement","rTRHandler","idx","indexOf","splice","getTicket","App","account","scanDoneHandler","obliterateTokens","getAccountDetails","details","verified","getAccountBalance","balance","st","paidTickets","poolTickets","parkTickets","fetch","mode","cache","errorDisplay","response","json","number","Grommet","theme","grommet","exact","Boolean","location","hostname","ReactDOM","render","document","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.7f006120.chunk.js","sourcesContent":["import React from 'react';\nimport { Box, Button, Text } from 'grommet';\nimport Web3 from 'web3';\nimport WalletLink from 'walletlink';\n\nclass WalletSetup extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {};\n        this.sign = this.sign.bind(this);\n        this.connectWallet = this.connectWallet.bind(this);\n    }\n\n    /**\n     * Calling the initialization directly after this component\n     * was created and mounted in the DOM.\n     */\n    componentDidMount() {\n        this.init();\n    }\n\n    displayError() {\n        alert(\"Ups, das hat nicht geklappt\");\n    }\n\n    /**\n     * Initializes Ethereum Wallet Provider and Web3 Instance\n     * In case the browser is a desktop browser without wallet capability,\n     * the Standard WalletLink is used to create a Wallet Provider instance.\n     * WalletLink is supported by Coinbase as an example: https://github.com/walletlink/walletlink\n     */\n    init() {\n        // TODO: Move these constants to a global constants file\n        const APP_NAME = 'DHBW Bachelors Night Ticketing 2020'\n        const APP_LOGO_URL = 'https://einfachtierisch.de/media/cache/article_teaser/cms/2015/09/Katze-lacht-in-die-Kamera-shutterstock-Foonia-76562038.jpg?595617'\n        const ETH_JSONRPC_URL = 'https://mainnet.infura.io/v3/efaece4f5f4443979063839c124c8171' // Mainnet\n        const CHAIN_ID = 1\n\n        this.setState({ walletAvailable: window.ethereum ? true : false });\n\n        if (!window.ethereum) {\n\n            // Initialize WalletLink\n            this.walletLink = new WalletLink({\n                appName: APP_NAME,\n                appLogoUrl: APP_LOGO_URL,\n                darkMode: false\n            })\n\n            // Initialize a Web3 Provider object\n            window.ethereum = this.walletLink.makeWeb3Provider(ETH_JSONRPC_URL, CHAIN_ID);\n        }\n\n        // Checking if wallet is already connected or not\n        // eslint-disable-next-line\n        this.setState({ connected: window.ethereum.selectedAddress ? true : false });\n\n        // Creating Web3 Instance\n        this.web3 = new Web3(window.ethereum);\n    }\n\n    /**\n     * Attempts to connect with the Wallet\n     */\n    async connectWallet() {\n        // Requesting connection to wallet\n        var accounts = await window.ethereum.enable().catch(this.displayError);\n        if (!accounts) return;\n\n        console.log(`User's address is ${accounts[0]}`);\n        this.web3.eth.defaultAccount = accounts[0];\n        this.setState({ connected: true });\n    }\n\n    /**\n     * Example method for showing how a message can be signed and verified.\n     */\n    async sign() {\n        if (!window.ethereum) return this.displayError();\n        if (!window.ethereum.selectedAddress) return this.displayError();\n        var from = window.ethereum.selectedAddress;\n\n        var text = 'Hallo du Frosch!';\n        var msg = this.web3.utils.stringToHex(text);\n\n        var params = [msg, from]\n        var method = 'personal_sign'\n\n        this.web3.currentProvider.send({\n            method,\n            params,\n            from,\n        }, (err, result) => {\n            if (err) return console.error(err)\n            if (result.error) return console.error(result.error)\n\n            console.log(result);\n\n            var recovered = this.web3.eth.accounts.recover(msg, result.result);\n\n            if (recovered.toLowerCase() === from.toLowerCase()) {\n                alert('Successfully ecRecovered signer as ' + from)\n            } else {\n                alert('Failed to verify signer when comparing ' + recovered + ' to ' + from)\n            }\n        })\n    }\n\n    /**\n     * Just a method to open a new tab...\n     */\n    linkToDownloadMetaMask() {\n        window.open('https://wallet.coinbase.com/', '_blank');\n    }\n\n    render() {\n        return (\n            <Box className=\"WalletSetup\" direction=\"column\" gap=\"medium\" pad=\"medium\">\n                <h1>Wallet Setup</h1>\n                <Text>\n                    Um Tickets zu erwerben benötigen Sie ein sogenanntes Wallet.\n                    Dieses ist vergleichbar mit Ihrer Geldbörse zu der nur Sie Zugriff haben.\n                </Text>\n                {(!this.state.walletAvailable && !this.state.connected) &&\n                    <Box gap=\"medium\">\n                        <Text>\n                            Für unser Ticket-System muss dieses Wallet Ethereum-fähig sein.\n                            Wir empfehlen Ihnen daher das Coinbase Wallet.\n                            Bitte installieren Sie sich das Coinbase Wallet über die offizielle Website.\n                            Kommen Sie nach Abschluss der Einrichtung wieder auf diese Seite zurück.\n                        </Text>\n                        <Button label=\"Coinbase für's Smartphone installieren\" onClick={this.linkToDownloadMetaMask}></Button>\n                    </Box>\n                }\n                {!this.state.connected &&\n                    <Box gap=\"medium\">\n                        <Text>\n                            Als Nächstes benötigt unsere Plattform die Adresse Ihres Wallets.\n                            Bitte bestätigen Sie daher die Verbindung mit Ihrem Wallet über folgende Schaltfläche.\n                            Sie geben dadurch <b>nicht</b> Ihre Kontrolle über das Wallet ab!\n                        </Text>\n                        <Button label=\"Mit dem Wallet verbinden\" onClick={this.connectWallet}></Button>\n                    </Box>\n                }\n                <Text>\n                    Hier folgt eine DEMO!!!\n                </Text>\n                <Button label=\"Sign and Verify Message\" onClick={this.sign}></Button>\n            </Box>\n        );\n    }\n}\n\nexport default WalletSetup;\n","import React from 'react';\nimport './UserMainMenu.css';\nimport { Box } from 'grommet';\nimport { Link } from \"react-router-dom\";\n\nclass UserMainMenu extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = { };\n    }\n\n    render() {\n        return (\n            <Box className=\"UserMainMenu\" direction=\"column\" gap=\"medium\" pad=\"medium\">\n                <Link className=\"MenuLink\" to=\"/guest/tickets\">Tickets Anzeigen</Link>\n                <Link className=\"MenuLink\" to=\"/guest/\">Tickets Bestellen</Link>\n                <Link className=\"MenuLink\" to=\"/guest/\">Bestellungen Anzeigen</Link>\n                <Link className=\"MenuLink\" to=\"/guest/setup\">Setup</Link>\n            </Box>\n        );\n    }\n}\n\nexport default UserMainMenu;\n","import React from 'react';\nimport './Obliterator.css';\nimport QRCode from 'qrcode';\nimport Web3 from 'web3';\nimport { Box, Button, Text } from 'grommet';\n\nclass Obliterator extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = { qrcode: undefined };\n        this.web3 = new Web3(Web3.givenProvider || 'ws://localhost:8545');\n        this.state = { error: false };\n        this.sign();\n    }\n\n    async sign() {\n        await this.connect();\n        var from = await this.getSelectedAddress();\n\n        var text = 'Hallo du Frosch!';\n        var msg = this.web3.utils.stringToHex(text);\n\n        var params = [msg, from]\n        var method = 'personal_sign'\n\n        this.web3.currentProvider.sendAsync({\n            method,\n            params,\n            from,\n        }, (err, result) => {\n            if (err){\n                this.setState({ error: true });\n                return console.error(err)\n            } \n            if (result.error){\n                this.setState({ error: true });\n                return console.error(result.error)\n            } \n\n            const signature = result.result;\n            \n            QRCode.toDataURL(signature)\n            .then(url => {\n                this.setState({ qrcode: url });\n            })\n            .catch(err => {\n                this.setState({ error: true });\n                console.error(err);\n            })\n\n        })\n    }\n\n    async connect() {\n        if (typeof window.ethereum !== 'undefined') {\n            await window.ethereum.enable().catch(console.error);\n        }\n    }\n\n    async getSelectedAddress() {\n        var accounts = await this.web3.eth.getAccounts().catch(console.error);\n        return accounts[0].toLowerCase();\n    }\n\n    render() {\n        return (\n            <Box className=\"Obliterator\" direction=\"column\" gap=\"medium\" pad=\"medium\">\n                { !this.state.error && <Box>\n                    <img src={this.state.qrcode} alt=\"QRCODE\" width=\"300px\" height=\"300px\"></img>\n                    <h2>{this.props.ticketType}</h2>\n                </Box>}\n                { this.state.error && <Box>\n                    <Text>Ups, das hat nicht geklappt!</Text>\n                </Box>}\n                <Button label=\"Fertig\" onClick={this.props.onReady}></Button>\n            </Box>\n        );\n    }\n}\n\nexport default Obliterator;\n","import React from 'react';\nimport './TicketOverview.css';\nimport Obliterator from './Obliterator.js';\nimport { Box, Button, Text } from 'grommet';\n\nclass TicketOverview extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.obliterate = this.obliterate.bind(this);\n        this.onReadyHandler = this.onReadyHandler.bind(this);\n        this.state = { obliterate: undefined };\n    }\n\n    onReadyHandler(){\n        this.setState({ obliterate: undefined })\n    }\n\n    obliterate(){\n        this.setState({ obliterate: \"Absolvent\" })\n    }\n\n    render() {\n        return (\n            <Box className=\"TicketOverview\" direction=\"column\" gap=\"medium\" pad=\"medium\">\n                <Box>\n                    <Box>\n                        <h1 className=\"NumberOfTickets\">4</h1>\n                    </Box>\n                    <Box>\n                        <Box className=\"Ticket\" direction=\"row\" gap=\"small\" pad=\"small\">\n                            <Text className=\"Type\">Absolvent</Text><Button label=\"Einlösen\" onClick={this.obliterate}></Button>\n                        </Box>\n                        <Box className=\"Ticket\" direction=\"row\" gap=\"small\" pad=\"small\">\n                            <Text className=\"Type\">Gast Regulär</Text><Button label=\"Einlösen\" onClick={this.obliterate}></Button>\n                        </Box>\n                        <Box className=\"Ticket\" direction=\"row\" gap=\"small\" pad=\"small\">\n                            <Text className=\"Type\">Gast Regulär</Text><Button label=\"Einlösen\" onClick={this.obliterate}></Button>\n                        </Box>\n                        <Box className=\"Ticket\" direction=\"row\" gap=\"small\" pad=\"small\">\n                            <Text className=\"Type\">Parken</Text><Button label=\"Einlösen\" onClick={this.obliterate}></Button>\n                        </Box>\n                    </Box>\n                </Box>\n                {this.state.obliterate && <Obliterator ticketType={this.state.obliterate} onReady={this.onReadyHandler}></Obliterator>}\n            </Box>\n        );\n    }\n}\n\nexport default TicketOverview;\n","import React from 'react';\nimport { Menu, Header, Box } from 'grommet';\nimport { Switch, Route, Link } from \"react-router-dom\";\nimport WalletSetup from './Components/WalletSetup';\nimport UserMainMenu from './Components/UserMainMenu';\nimport TicketOverview from './Components/TicketOverview';\n\nclass Guest extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {};\n    }\n\n    render() {\n        return (\n            <Box className=\"Guest\">\n                <Header background=\"brand\" justify=\"between\" pad=\"10px\">\n                    <Link to=\"/guest\">Home</Link>\n                    <Menu label=\"Account\" items={[{ label: 'Logout' }]} />\n                </Header>\n                <Switch>\n                    <Route path=\"/guest/tickets\">\n                        <TicketOverview></TicketOverview>\n                    </Route>\n                    <Route path=\"/guest/setup\">\n                        <WalletSetup></WalletSetup>\n                    </Route>\n                    <Route path=\"/guest/\">\n                        <UserMainMenu></UserMainMenu>\n                    </Route>\n                </Switch>\n            </Box>\n        );\n    }\n}\n\nexport default Guest;\n","import React from 'react';\nimport jsQR from 'jsqr';\nimport { Box, Button } from 'grommet';\n\nclass QRScanner extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {};\n    this.video = React.createRef();\n    this.canvasElement = React.createRef();\n    this.startScan = this.startScan.bind(this);\n    this.tick = this.tick.bind(this);\n  }\n\n  componentWillUnmount(){\n    this.stopScan();\n  }\n\n  tick() {\n    if (!this.video || !this.video.current) return;\n    if (this.video.current.readyState === this.video.current.HAVE_ENOUGH_DATA) {\n      this.canvasElement.current.height = 320;\n      this.canvasElement.current.width = 320;\n      this.canvas.drawImage(this.video.current, 0, 0, this.canvasElement.current.width, this.canvasElement.current.height);\n      let imageData = this.canvas.getImageData(0, 0, this.canvasElement.current.width, this.canvasElement.current.height);\n      let code = jsQR(imageData.data, imageData.width, imageData.height, { inversionAttempts: \"dontInvert\" });\n      if (code) {\n        // Selecting the right search pattern\n        // This should be defined via props: contentType\n        switch (this.props.contentType) {\n          case 'ETHEREUM_ADDRESS':\n            let match = code.data.match(/(?:ethereum:)(?<address>0x[A-Za-z\\d]*)/);\n            if (match && match.groups.address) {\n              this.stopScan();\n              this.props.onDone(match.groups.address);\n              return;\n            }\n            break;\n          case 'ETHEREUM_SIGNATURE':\n            // TODO: enter regex\n            break;\n          case 'IP_ADDRESS':\n            // TODO: enter regex\n            break;\n          case 'JSON_DATA':\n            // TODO: enter regex\n            break;\n          default:\n            this.stopScan();\n            this.props.onDone(code.data);\n            return;\n        }\n      }\n    }\n    requestAnimationFrame(this.tick);\n  }\n\n  startScan() {\n    if (!navigator.mediaDevices) return alert('Der Browser unterstützt diese Funktion nicht.');\n    const constraints = { video: { facingMode: \"environment\", width: 320, height: 320 } }\n    navigator.mediaDevices.getUserMedia(constraints)\n      .then((stream) => {\n        /* use the stream */\n        this.canvas = this.canvasElement.current.getContext(\"2d\");\n        this.video.current.srcObject = stream;\n        this.video.current.setAttribute('playsinline', true);\n        this.video.current.play();\n        requestAnimationFrame(this.tick);\n        this.setState({ isScanning: true });\n      })\n      .catch(function (err) {\n        console.error(err);\n        /* handle the error */\n        alert('Sorry, Kamera-Stream konnte nicht geladen werden.');\n      });\n  }\n\n  stopScan() {\n    if (!this.video || !this.video.current || !this.video.current.srcObject) return;\n    let videoTracks = this.video.current.srcObject.getVideoTracks();\n    videoTracks[0].stop();\n    this.setState({ isScanning: false });\n  }\n\n  render() {\n    return (\n      <Box className=\"QRScanner\">\n        <div>\n          <canvas ref={this.canvasElement} hidden={!this.state.isScanning} />\n          <video ref={this.video} hidden />\n        </div>\n        {!this.state.isScanning && <Button label={this.props.label || \"Scan\"} onClick={this.startScan}></Button>}\n      </Box>\n    );\n  }\n}\n\nexport default QRScanner;\n","import React from 'react';\nimport { Button } from 'grommet';\nimport './Dialog.css';\n\nclass Dialog extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = { };\n    }\n\n    render() {\n        return (\n            <div className=\"dialog\">\n                <div className=\"dialog-background-box\"></div>\n                <div className=\"dialog-center\">\n                    <div className=\"dialog-content\">\n                        <div className=\"dialog-header\">\n                            <h1>{this.props.title}</h1>\n                            <Button className=\"abort\" onClick={this.props.onAbort}>X</Button>\n                        </div>\n                        <div className=\"dialog-body\">\n                            {this.props.children}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Dialog;\n","// eslint-disable-next-line\nimport adapter from 'webrtc-adapter';\nimport QRCode from 'qrcode';\nimport pako from 'pako';\n\n/**\n * Represents a ticket reader on a remote device.\n * Use this class to connect to a TicketReaderManager.\n */\nclass TicketReader {\n\n    constructor() {\n        this.requestMap = new Map();\n        this._iceCandidatesHandler = this._iceCandidatesHandler.bind(this);\n        this._dataChannelOpenHandler = this._dataChannelOpenHandler.bind(this);\n        this._receiveChannelHandler = this._receiveChannelHandler.bind(this);\n        this._generateAnswerCode = this._generateAnswerCode.bind(this);\n        this.setMasterConfig = this.setMasterConfig.bind(this);\n        this._dataChannelClosedHandler = this._dataChannelClosedHandler.bind(this);\n        this._connectionChangeHandler = this._connectionChangeHandler.bind(this);\n        this._initConnection();\n    }\n\n    _initConnection() {\n        const servers = null;\n\n        this.icecandidates = [];\n\n        this.localPeerConnection = new RTCPeerConnection(servers);\n        this.localPeerConnection.addEventListener('icecandidate', this._iceCandidatesHandler);\n        this.localPeerConnection.addEventListener('iceconnectionstatechange', this._connectionChangeHandler);\n        this.localPeerConnection.addEventListener('datachannel', this._receiveChannelHandler);\n    }\n\n    _iceCandidatesHandler(event) {\n        this.icecandidates.push(event.candidate);\n        if (this.answer && !this.qrcode) {\n            setTimeout(this._generateAnswerCode, 200); // Set a delay to collect some more icecandidates\n        }\n    }\n\n    _connectionChangeHandler(event) {\n        console.debug(event);\n        if (event.target.iceConnectionState === \"disconnected\") {\n            this.onDisconnected();\n        }\n    }\n\n    _dataChannelOpenHandler(event) {\n        console.debug(event);\n        this.onReady();\n        this.dataChannel.send('Hallo Master!');\n    }\n\n    _dataChannelClosedHandler(event) {\n        console.debug(event);\n    }\n\n    _messageHandler(event) {\n        console.debug(event.data);\n        alert(event.data);\n    }\n\n    _receiveChannelHandler(event) {\n        this.dataChannel = event.channel;\n        this.dataChannel.addEventListener('message', this._messageHandler);\n        this.dataChannel.addEventListener('open', this._dataChannelOpenHandler);\n        this.dataChannel.addEventListener('close', this._dataChannelClosedHandler);\n    }\n\n    _createUUID() {\n        var dt = new Date().getTime();\n        var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n            var r = (dt + Math.random() * 16) % 16 | 0;\n            dt = Math.floor(dt / 16);\n            return (c === 'x' ? r : (r & 0x3 & 0x8)).toString(16);\n        });\n        return uuid;\n    }\n\n    readTicketRemote(identifier) {\n        return new Promise((resolve, reject) => {\n            let reqId = this._createUUID();\n            this.requestMap.set(reqId, { resolve: resolve, reject: reject });\n            const msg = {\n                type: \"Request\",\n                reqId: reqId,\n                context: \"ticketMirror\",\n                method: \"getTicket\",\n                params: [identifier]\n            }\n            try{\n                this.dataChannel.send(JSON.stringify(msg));\n            }catch(e){\n                reject(e);\n            }\n        });\n    }\n\n    obliterateTicketRemote(identifier, signature) {\n        return new Promise((resolve, reject) => {\n            let reqId = this._createUUID();\n            this.requestMap.set(reqId, { resolve: resolve, reject: reject });\n            const msg = {\n                type: \"Request\",\n                reqId: reqId,\n                context: \"ticketMirror\",\n                method: \"obliterateTicket\",\n                params: [identifier, signature]\n            }\n            try{\n                this.dataChannel.send(JSON.stringify(msg));\n            }catch(e){\n                reject(e);\n            }\n        });\n    }\n\n    async _generateAnswerCode() {\n        let data = { answer: this.answer, candidates: this.icecandidates };\n\n        // Compress data\n        let binaryString = pako.deflate(JSON.stringify(data), { level: 9, to: \"string\" });\n\n        // Create QR Code\n        let url = await QRCode.toDataURL(binaryString).catch(console.error);\n        this.qrcode = url;\n        this.onAnswerCode(url);\n    }\n\n    async setMasterConfig(binaryString) {\n        let obj = JSON.parse(pako.inflate(binaryString, { to: 'string' }));\n\n        // Setting remote description\n        await this.localPeerConnection.setRemoteDescription(new RTCSessionDescription(obj.offer)).catch(console.error);\n\n        // Adding ice candidates from remote\n        obj.candidates.forEach((candidate) => {\n            this.localPeerConnection.addIceCandidate(candidate).catch(console.error);\n        });\n\n        // Creating answer\n        this.answer = await this.localPeerConnection.createAnswer().catch(console.error);\n\n        await this.localPeerConnection.setLocalDescription(this.answer).catch(console.error);\n    }\n\n}\n\nexport default TicketReader;","import React from 'react';\nimport { Box, Button } from 'grommet';\nimport { Switch, Route } from \"react-router-dom\";\nimport QRScanner from '../Utilities/Components/QRScanner';\nimport Dialog from '../Utilities/Components/Dialog';\n\nimport TicketReader from '../EventManagement/Classes/TicketReader';\n\nclass EntranceManagement extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = { connected: false };\n        this.connectTicketReader = this.connectTicketReader.bind(this);\n    }\n\n    connectTicketReader() {\n        let ticketReader = new TicketReader();\n        ticketReader.onReady = () => {\n            this.ticketReader = this.state.connectTR;\n            this.setState({ connectTR: null, connected: true });\n        };\n        ticketReader.onDisconnected = () => {\n            this.ticketReader = null;\n            this.setState({ connected: false });\n        };\n        ticketReader.onAnswerCode = (url) => {\n            this.setState({ TRQRCode: url, connectTRStep: 1 });\n        };\n        this.setState({ connectTR: ticketReader, connectTRStep: 0 });\n    }\n\n    render() {\n        return (\n            <Box className=\"EntranceManagement\" pad=\"medium\">\n                {!this.state.connected &&\n                    <Box>\n                        <p>Wenn Sie dieses Gerät als Ticket Leser verwenden möchten, müssen Sie es erst mit dem Event-Manager verbinden.</p>\n                        <p>Bitte stellen Sie sicher, dass dieses Gerät mit dem selben lokalen Netzwerk, wie der Event-Manager verbunden ist.</p>\n                        <Button onClick={this.connectTicketReader} label=\"Ticket Reader Aktivieren\"></Button>\n                        {this.state.connectTR &&\n                            <Dialog title=\"Als Ticket Reader verbinden\" onAbort={() => { this.setState({ connectTR: null }); }}>\n                                {this.state.connectTRStep === 0 &&\n                                    <div>\n                                        <div className=\"scanner\">\n                                            <QRScanner onDone={this.state.connectTR.setMasterConfig} label=\"Scanvorgang starten\"></QRScanner>\n                                        </div>\n                                        <div className=\"description\">\n                                            <p>Bitte den Code des Initiators scannen</p>\n                                        </div>\n                                    </div>\n                                }\n                                {this.state.connectTRStep === 1 &&\n                                    <div>\n                                        <div className=\"qrcode\">\n                                            {!this.state.TRQRCode && <div className=\"loader\">Loading...</div>}\n                                            {this.state.TRQRCode && <img src={this.state.TRQRCode} width=\"100%\" alt=\"Ein QR-Code sollte hier angezeigt werden.\" />}\n                                        </div>\n                                        <div className=\"description\">\n                                            <p>Bitte nun mit dem Initiator Gerät scannen</p>\n                                        </div>\n                                    </div>\n                                }\n                            </Dialog>\n                        }\n                    </Box>\n                }\n                {this.state.connected &&\n                    <Switch>\n                        <Route path=\"/entrance/\">\n                            <p>Wunderbar, Sie sind verbunden...</p>\n                            <p>In Zukunft sollten hier Funktionen zum Ticket-Scan stehen...</p>\n                            <Button label=\"Lese ein Beispiel Ticket\" onClick={() => { this.ticketReader.readTicketRemote(\"2537f4c1-2bfa-416f-9098-9b61fe4bb59d\") }}></Button>\n                            <Button label=\"Entwerte Ticket\" onClick={() => { this.ticketReader.obliterateTicketRemote(123, \"signature\") }}></Button>\n                            <Button label=\"Beispiel Funktion 3\"></Button>\n                        </Route>\n                    </Switch>\n                }\n            </Box>\n        );\n    }\n}\n\nexport default EntranceManagement;\n","/**\n * Class for basic operations and preparations for the local caching of ticket data\n */\nclass LocalTicketMirror {\n\n    constructor() {\n        this._createDB = this._createDB.bind(this);\n        this.dumpTicketMirror = this.dumpTicketMirror.bind(this);\n        this.getTicketList = this.getTicketList.bind(this);\n        if (!window.indexedDB) {\n            throw Error(\"Your browser doesn't support a stable version of IndexedDB. Such and such feature will not be available.\");\n        }\n        this.waitingForIDBReadyQueue = [];\n        this._initDB();\n    }\n\n    _initDB() {\n        console.debug('Initializing IDB Connection');\n        var request = window.indexedDB.open(\"TicketMirror\", 1);\n\n        request.addEventListener('upgradeneeded', this._createDB);\n        request.addEventListener('success', (ev) => {\n            console.debug('IDB Connection established');\n            this.db = ev.target.result;\n            this.waitingForIDBReadyQueue.forEach((resolve) => {\n                resolve(this.db);\n            });\n        });\n        request.addEventListener('error', (ev) => {\n            console.error(\"Database error: \" + ev.target.errorCode);\n        });\n    }\n\n    /**\n     * Eventhandler for cases where the IDB has to be created / initialized\n     * @param {Event} event \n     */\n    _createDB(event) {\n        this.db = event.target.result;\n\n        // Create an objectStore for this database\n        this.db.createObjectStore(\"tickets\", { keyPath: \"identifier\" });\n    }\n\n    /**\n     * Getter for the IDB Connection.\n     * @returns Returns a Promis that is resolved with a IDBConnection when it is ready.\n     */\n    _getIDB() {\n        return new Promise((resolve) => {\n            if (this.db) {\n                resolve(this.db);\n            } else {\n                this.waitingForIDBReadyQueue.push(resolve);\n            }\n        });\n    }\n\n    async dumpTicketMirror() {\n        var db = await this._getIDB().catch(console.error);\n        if (!db) return;\n\n        var objectStore = db.transaction(\"tickets\", \"readwrite\").objectStore(\"tickets\");\n\n        // TODO: Fetch real data from the blockchain when online\n        const dummyData = [{\n            \"identifier\": \"ca6c9409-0ec9-42fb-9ca7-d42a74642d7e\",\n            \"isValid\": true,\n            \"isUsed\": false,\n            \"ticketType\": \"Parken\"\n        }, {\n            \"identifier\": \"cea4b540-63a4-4abd-9a9a-499bb3879b8c\",\n            \"isValid\": false,\n            \"isUsed\": true,\n            \"ticketType\": \"Begleitperson\"\n        }, {\n            \"identifier\": \"2537f4c1-2bfa-416f-9098-9b61fe4bb59d\",\n            \"isValid\": true,\n            \"isUsed\": false,\n            \"ticketType\": \"Begleitperson\"\n        }, {\n            \"identifier\": \"c3573a44-f9e8-4772-bf80-57d1d07239c8\",\n            \"isValid\": true,\n            \"isUsed\": true,\n            \"ticketType\": \"Begleitperson\"\n        }, {\n            \"identifier\": \"5506d14d-8090-411a-897c-3f6c898ec8d2\",\n            \"isValid\": true,\n            \"isUsed\": true,\n            \"ticketType\": \"Begleitperson\"\n        }]\n\n        dummyData.forEach((item) => {\n            objectStore.add(item);\n        });\n\n    }\n\n    /**\n     * For frontend purposes to get all tickets out of the db.\n     * @returns {Ticket[]}\n     */\n    getTicketList() {\n        return new Promise(async (resolve, reject) => {\n            var db = await this._getIDB().catch(console.error);\n            if (!db) return reject();\n            var objectStore = db.transaction(\"tickets\", \"readonly\").objectStore(\"tickets\");\n            var request = objectStore.getAll();\n            request.onerror = reject;\n            request.onsuccess = function (event) {\n                var tickets = event.target.result;\n                return resolve(tickets);\n            };\n        });\n    }\n\n    /**\n     * Fetches a ticket by its identifier\n     * @param {String} identifier - Unique identifier of the ticket\n     * @returns {Ticket} Returns a promise that resolves as the ticket\n     */\n    getTicket(identifier) {\n        return new Promise(async (resolve, reject) => {\n            var db = await this._getIDB().catch(console.error);\n            if (!db) return reject();\n            var objectStore = db.transaction(\"tickets\", \"readonly\").objectStore(\"tickets\");\n            var request = objectStore.get(identifier);\n            request.onerror = reject;\n            request.onsuccess = function (event) {\n                var ticket = event.target.result;\n                if (!ticket) return reject(\"Ticket does not exist.\");\n                return resolve(ticket);\n            };\n        });\n    }\n\n    /**\n     * Obliterates a ticket selected by its unique identifer.\n     * The signature of the owner is checked to validate the persons identity.\n     * @param {String} identifier - Unique identifier of the ticket\n     * @param {String} signature - Specific signature of the owner that was used to generate the identifer\n     * @returns {Promise} Returns a promise that is resolved with null or rejected with an error message\n     */\n    obliterateTicket(identifier, signature) {\n        return new Promise(async (resolve, reject) => {\n            var db = await this._getIDB().catch(console.error);\n            if (!db) return reject();\n            var objectStore = db.transaction(\"tickets\", \"readwrite\").objectStore(\"tickets\");\n            var request = objectStore.get(identifier);\n            request.onerror = reject;\n            request.onsuccess = (event) => {\n                // Get the old value that we want to update\n                var ticket = event.target.result;\n                if (!ticket) return reject(\"Ticket does not exist.\");\n\n                // TODO: Check signature and identifier hash\n\n                // Check validity and if it was not used before\n                if (!ticket.isValid) return reject(\"Ticket is not valid.\");\n                if (ticket.isUsed) return reject(\"Ticket was already used.\");\n\n                ticket.isUsed = true;\n\n                // Put this updated object back into the database.\n                var requestUpdate = objectStore.put(ticket);\n                requestUpdate.onerror = reject;\n                requestUpdate.onsuccess = resolve;\n            };\n        });\n    }\n\n}\n\nexport default LocalTicketMirror;","import React from 'react';\nimport { Box, Button } from 'grommet';\n\n// eslint-disable-next-line\nimport { LocalTicketMirror } from '../Classes/LocalTicketMirror';\n\n\nclass IndexedDBExample extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = { tickets: [] };\n        this.handleDumpMirror = this.handleDumpMirror.bind(this);\n        this.showTickets = this.showTickets.bind(this);\n        if (!this.props.localTicketMirror) throw new Error(\"Missing LocalTicketMirror\");\n        this.showTickets();\n    }\n\n    handleDumpMirror() {\n        /**\n         * @type LocalTicketMirror\n         */\n        let ltm = this.props.localTicketMirror;\n        ltm.dumpTicketMirror();\n        this.showTickets();\n    }\n\n    async showTickets() {\n        // Reading out of idb all tickets\n        /**\n         * @type LocalTicketMirror\n         */\n        let ltm = this.props.localTicketMirror;\n        let tickets = await ltm.getTicketList().catch(console.error);\n        if (!tickets) return;\n\n        this.setState({ tickets });\n    }\n\n    render() {\n        let tickets = this.state.tickets.map((ticket) => {\n            return <li key={ticket.identifier}>{ticket.isValid && 'Valid'}{!ticket.isValid && 'Not Valid'} -  {ticket.isUsed && 'Used'}{!ticket.isUsed && 'Not Used'} - {ticket.ticketType}</li>\n        });\n\n        return (\n            <Box className=\"IndexedDBExample\" pad=\"medium\">\n                <ul>\n                    {tickets}\n                </ul>\n                <Button label=\"Dump Mirror\" onClick={this.handleDumpMirror}></Button>\n            </Box>\n        );\n    }\n}\n\nexport default IndexedDBExample;\n","// eslint-disable-next-line\nimport adapter from 'webrtc-adapter';\nimport QRCode from 'qrcode';\nimport pako from 'pako';\n\n/**\n * Represents an object holder for diverse connectio objects to the ticket reader.\n */\nclass RemoteTicketReader {\n\n    constructor() {\n        // Binding \"this\" to the event handlers\n        this._iceCandidatesHandler = this._iceCandidatesHandler.bind(this);\n        this._dataChannelOpenHandler = this._dataChannelOpenHandler.bind(this);\n        this._generateOfferCode = this._generateOfferCode.bind(this);\n        this._dataChannelClosedHandler = this._dataChannelClosedHandler.bind(this);\n        this._connectionChangeHandler = this._connectionChangeHandler.bind(this);\n        this.setTicketReaderConfig = this.setTicketReaderConfig.bind(this);\n        this._messageHandler = this._messageHandler.bind(this);\n\n        // Initializing empty event listeners to prevent \"undefined\" errors\n\n        /**\n         * This eventlistener is called when the \n         * ticket reader is disconnected. Please implement externally.\n         */\n        this.onDisconnected = function () { };\n\n        /**\n         * This eventlistener is called when the \n         * ticket reader datachannel is ready to use. Please implement externally.\n         */\n        this.onReady = function () { };\n\n        /**\n         * This eventlistener is called when the QR-Code \n         * for the connection offer is generated and accessible via url. Please implement externally.\n         * @param {String} url - The URL of the QR-Code.\n         */\n        this.onOfferCode = function (url) { };\n\n        /**\n         * This callback is for onGetTicket eventlistener.\n         * @callback onGetTicketCallback\n         * @param {Object} ticket - The ticket as JS Object.\n         * @param {String} [errorMessage] - In case of ticket = null an error a message should be provided.\n         */\n\n        /**\n         * This eventlistener requires an identifier and a callback \n         * that needs to be called with the ticket as JS Object.\n         * Please implement externally.\n         * @param {String} identifier - Identifier of the ticket.\n         * @param {onGetTicketCallback} callback - Callback that should be called with a ticket Object.\n         */\n        this.onGetTicket = function (identifier, callback) { };\n\n        /**\n         * This callback is for onObliterateTicket eventlistener.\n         * @callback onObliterateTicketCallback\n         * @param {Boolean} success - Whether the obliterating was successful or not.\n         * @param {String} [errorMessage] - In case of success = false, an error message should be provided.\n         */\n\n        /**\n         * This eventlistener requires identifier and signature and a callback \n         * that needs to be called with true or false depending if successfully obliterated or not. \n         * Please implement externally.\n         * @param {String} identifier - Identifier of the ticket.\n         * @param {String} signature - Signature used for generating the identifier of the ticket.\n         * @param {onObliterateTicketCallback} callback - Callback that should be called with a ticket Object.\n         */\n        this.onObliterateTicket = function (identifier, signature, callback) { };\n\n        // Initializing the RTC connection\n        this._initConnection();\n    }\n\n    _initConnection() {\n        const servers = null;\n        const dataConstraint = null;\n\n        this.icecandidates = [];\n\n        this.localPeerConnection = new RTCPeerConnection(servers);\n        this.localPeerConnection.addEventListener('icecandidate', this._iceCandidatesHandler);\n        this.localPeerConnection.addEventListener('iceconnectionstatechange', this._connectionChangeHandler);\n\n        this.dataChannel = this.localPeerConnection.createDataChannel('sendDataChannel', dataConstraint);\n        this.dataChannel.addEventListener('message', this._messageHandler);\n        this.dataChannel.addEventListener('open', this._dataChannelOpenHandler);\n        this.dataChannel.addEventListener('close', this._dataChannelClosedHandler);\n\n        this._createOffer();\n    }\n\n    _iceCandidatesHandler(event) {\n        this.icecandidates.push(event.candidate);\n        if (this.offer && !this.qrcode) {\n            setTimeout(this._generateOfferCode, 200); // Set a delay to collect some more icecandidates\n        }\n    }\n\n    _connectionChangeHandler(event) {\n        console.debug(event);\n        if (event.target.iceConnectionState === \"disconnected\") {\n            this.onDisconnected();\n        }\n    }\n\n    _dataChannelOpenHandler(event) {\n        console.debug(event);\n        this.onReady();\n        this.dataChannel.send('Hallo Client!');\n    }\n\n    _dataChannelClosedHandler(event) {\n        console.debug('Data Channel Closed', event);\n    }\n\n    _messageHandler(event) {\n        console.debug(\"Message received:\", event.data);\n        var msg;\n        try {\n            msg = JSON.parse(event.data);\n        } catch (e) {\n            console.error(e);\n            console.debug(\"Message was:\", event.data);\n            return;\n        }\n\n        /** Messages look like this...\n         * msg = {\n                type: \"Request\",     \n                reqId: Unique String,\n                context: String,\n                method: String,\n                params: [Any]\n            }\n         */\n\n        /** Answer Messages should look like this...\n        * msg = {\n               type: \"Answer\",\n               reqId: Unique String,\n               result: Any\n           }\n        */\n\n        // Switching between different request types and contexts\n        switch (msg.context) {\n            case \"ticketMirror\":\n                if (msg.method === \"getTicket\") {\n                    this.onGetTicket(msg.params[0], (ticket, errorMsg) => {\n                        let answerMsg = {\n                            reqId: msg.reqId,\n                            result: { ticket: ticket, errorMessage: errorMsg}\n                        }\n                        try{\n                            this.dataChannel.send(JSON.stringify(answerMsg));\n                        }catch(error){\n                            console.error(error);\n                        }\n                    });\n                } else if (msg.method === \"obliterateTicket\") {\n                    this.onObliterateTicket(msg.params[0], msg.params[1], (success, errorMsg) => {\n                        let answerMsg = {\n                            reqId: msg.reqId,\n                            result: { success: success, errorMessage: errorMsg }\n                        }\n                        try{\n                            this.dataChannel.send(JSON.stringify(answerMsg));\n                        }catch(error){\n                            console.error(error);\n                        }\n                    });\n                }\n                break;\n            default:\n                break;\n        }\n    }\n\n    _createUUID() {\n        var dt = new Date().getTime();\n        var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n            var r = (dt + Math.random() * 16) % 16 | 0;\n            dt = Math.floor(dt / 16);\n            return (c === 'x' ? r : (r & 0x3 & 0x8)).toString(16);\n        });\n        return uuid;\n    }\n\n    async _createOffer() {\n        this.offer = await this.localPeerConnection.createOffer().catch(console.error);\n        await this.localPeerConnection.setLocalDescription(this.offer).catch(console.error);\n    }\n\n    async _generateOfferCode() {\n        let data = { offer: this.offer, candidates: this.icecandidates };\n\n        // Compress data\n        let binaryString = pako.deflate(JSON.stringify(data), { level: 9, to: \"string\" });\n\n        // Create QR Code\n        let url = await QRCode.toDataURL(binaryString).catch(console.error);\n        this.qrcode = url;\n        this.onOfferCode(url);\n    }\n\n    async setTicketReaderConfig(binaryString) {\n        let obj = JSON.parse(pako.inflate(binaryString, { to: 'string' }));\n\n        // Setting remote description\n        await this.localPeerConnection.setRemoteDescription(new RTCSessionDescription(obj.answer)).catch(this.handleError);\n\n        // Adding ice candidates from remote\n        obj.candidates.forEach((candidate) => {\n            this.localPeerConnection.addIceCandidate(candidate).catch(this.handleError);\n        });\n    }\n\n}\nexport default RemoteTicketReader;","import React from 'react';\nimport { Box, Button } from 'grommet';\nimport QRScanner from '../../Utilities/Components/QRScanner';\nimport Dialog from '../../Utilities/Components/Dialog';\n\nimport RemoteTicketReader from '../Classes/RemoteTicketReader';\n\n/**\n * The main unit (master) to which instances of TicketReader can connect.\n */\nclass TicketReaderManager extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = { };\n        this.connectRemoteTicketReader = this.connectRemoteTicketReader.bind(this);\n    }\n\n    /**\n     * Initiates the RTC Peer connection to an instance of TicketReader on another device.\n     */\n    connectRemoteTicketReader() {\n        let remoteTicketReader = new RemoteTicketReader();\n        remoteTicketReader.onReady = () => {\n            this.setState({ connectRTR: null });\n            this.props.onRTR(remoteTicketReader);\n        };\n        remoteTicketReader.onOfferCode = (url) => {\n            this.setState({ RTRQRCode: url });\n        }\n        this.setState({ connectRTR: remoteTicketReader, addRTRStep: 0 });\n    }\n\n    disconnectRemoteTicketReader(remoteTicketReader) {\n\n    }\n\n    disconnectAll() {\n\n    }\n\n    render() {\n        return (\n            <Box className=\"TicketReaderManager\" pad=\"medium\">\n                <p>\n                    Derzeit sind {this.props.RTRList.length} Ticket Leser verbunden.\n                </p>\n                <Button onClick={this.connectRemoteTicketReader} label=\"Ticket Leser Hinzufügen\"></Button>\n                {this.state.connectRTR &&\n                    <Dialog title=\"Remote Ticket Reader Hinzufügen\" onAbort={() => { this.setState({ connectRTR: null }); }}>\n                        {this.state.addRTRStep === 0 &&\n                            <div>\n                                <div className=\"ticket-reader-qrcode\">\n                                    {!this.state.RTRQRCode && <div className=\"loader\">Loading...</div>}\n                                    {this.state.RTRQRCode && <img src={this.state.RTRQRCode} width=\"100%\" alt=\"Ein QR-Code sollte hier angezeigt werden.\" />}\n                                </div>\n                                <div className=\"ticket-reader-description\">\n                                    <p>Bitte mit dem Zielgerät scannen</p>\n                                </div>\n                                <div className=\"ticket-reader-action\">\n                                    <Button onClick={() => { this.setState({ addRTRStep: 1 }); }} label=\"Weiter\"></Button>\n                                </div>\n                            </div>\n                        }\n                        {this.state.addRTRStep === 1 &&\n                            <div>\n                                <div className=\"ticket-reader-scanner\">\n                                    <QRScanner onDone={this.state.connectRTR.setTicketReaderConfig} label=\"Scanvorgang starten\"></QRScanner>\n                                </div>\n                                <div className=\"ticket-reader-description\">\n                                    <p>Bitte nun den Code des Zielgeräts scannen</p>\n                                </div>\n                            </div>\n                        }\n                    </Dialog>\n                }\n            </Box>\n        );\n    }\n\n}\n\nexport default TicketReaderManager;","import React from 'react';\nimport { Box } from 'grommet';\nimport { Switch, Route, Link } from \"react-router-dom\";\nimport IndexedDBExample from './Components/IndexedDBExample';\nimport TicketReaderManager from './Components/TicketReaderManager';\n\nimport LocalTicketMirror from './Classes/LocalTicketMirror';\n\n// eslint-disable-next-line\nimport RemoteTicketReader from './Classes/RemoteTicketReader';\n\nclass EventManagement extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.rTRHandler = this.rTRHandler.bind(this);\n\n        // Required code for offline ticket data sync\n        this.localTicketMirror = new LocalTicketMirror();\n\n        // RTRList should be an array of remoteTicketReaders\n        this.state = { RTRList: [] };\n    }\n\n    /**\n     * Handler for new connected remote ticket readers\n     * @param {RemoteTicketReader} remoteTicketReader \n     */\n    rTRHandler(remoteTicketReader) {\n        // Adding the remote ticket reader to the list\n        let RTRList = this.state.RTRList;\n        RTRList.push(remoteTicketReader);\n        this.setState({ RTRList: RTRList });\n\n        // In case the rtr is dicsonnected, it should be removed from the list in the view state\n        remoteTicketReader.onDisconnected = () => {\n            console.debug(\"Attempting to remove closed remote ticket reader\");\n            let RTRList = this.state.RTRList;\n            let idx = RTRList.indexOf(remoteTicketReader);\n            RTRList.splice(idx, 1);\n            this.setState({ RTRList: RTRList });\n        }\n\n        // Setting eventhandler for reading a ticket\n        remoteTicketReader.onGetTicket = (identifier, callback) => {\n            // Trying to get the ticket from the IDB\n            this.localTicketMirror.getTicket(identifier).then((ticket) => {\n                callback(ticket);\n            }).catch((error) => { \n                // In case of an error, providing an error msg\n                callback(null, error);\n            });\n        }\n\n        // Setting eventhandler for obliterating a ticket\n        remoteTicketReader.onObliterateTicket = (identifier, signature, callback) => {\n            // TODO: Request localmirror \n            callback(true);\n        }\n    }\n\n    render() {\n        return (\n            <Box className=\"EventManagement\">\n                <ul>\n                    <li><Link to=\"/eventmgmt/rtrm\">Manage Remote Ticket Readers</Link></li>\n                    <li><Link to=\"/eventmgmt/entrancedb\">Show Entrance Dashboard</Link></li>\n                    <li><Link to=\"/eventmgmt/ticketshop\">Manage Ticketshop</Link></li>\n                </ul>\n                <Switch>\n                    <Route path=\"/eventmgmt/rtrm\">\n                        <TicketReaderManager RTRList={this.state.RTRList} onRTR={this.rTRHandler}></TicketReaderManager>\n                    </Route>\n                    <Route path=\"/eventmgmt/entrancedb\">\n                        <IndexedDBExample localTicketMirror={this.localTicketMirror}></IndexedDBExample>\n                    </Route>\n                    <Route path=\"/eventmgmt/ticketshop\">\n                        <Box pad=\"medium\">Hier müsste dann sowas wie ein Ticketshop Management Dashboard hin...</Box>\n                    </Route>\n                </Switch>\n            </Box>\n        );\n    }\n}\n\nexport default EventManagement;\n","import React from 'react';\nimport './App.css';\nimport Guest from './Guest/Guest';\nimport EntranceManagement from './EntranceManagement/EntranceManagement';\nimport EventManagement from './EventManagement/EventManagement';\nimport { Grommet, grommet } from 'grommet';\nimport { Switch, Route, Link } from \"react-router-dom\";\n\n\nclass App extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      account: null\n    };\n    this.scanDoneHandler = this.scanDoneHandler.bind(this);\n    this.obliterateTokens = this.obliterateTokens.bind(this);\n    //this.scanDoneHandler(\"0x9a2f730AFd66E990567AFc09665bE014EB76FAeB\");\n  }\n\n  errorDisplay(msg) {\n    alert('Sorry, there was an error. Please try again.');\n  }\n\n  scanDoneHandler(address) {\n    this.getAccountDetails(address).then((details) => {\n      if (!details.verified) {\n        return alert('Account nicht für TBN-Nutzung verifiziert');\n      }\n\n      this.getAccountBalance(address).then((balance) => {\n        const st = this.state;\n        st.account = {\n          address: address,\n          balance: balance,\n          verified: details.verified,\n          paidTickets: details.paidTickets,\n          poolTickets: details.poolTickets,\n          parkTickets: details.parkTickets\n        };\n        this.setState(st);\n      })\n    });\n  }\n\n  async getAccountBalance(address) {\n    // Fetch current token balance\n    const response = await fetch('http://localhost:3000/balanceOf?address=' + address, {\n      method: 'GET',\n      //headers: myHeaders,\n      mode: 'cors',\n      cache: 'no-cache',\n    }).catch(this.errorDisplay);\n    const data = await response.json().catch(this.errorDisplay);\n    return data;\n  }\n\n  async getAccountDetails(address) {\n    // Fetch current token balance\n    const response = await fetch('http://localhost:3000/accountDetails?address=' + address, {\n      method: 'GET',\n      //headers: myHeaders,\n      mode: 'cors',\n      cache: 'no-cache',\n    }).catch(this.errorDisplay);\n    const data = await response.json().catch(this.errorDisplay);\n    return data;\n  }\n\n  obliterateTokens(number) {\n    let prom = new Promise((resolve, reject) => {\n      setTimeout(() => { resolve('Übertragen'); this.scanDoneHandler(null) }, 3000); // DUMMY\n      // Call transferFrom address to obliterate-wallet\n    });\n\n    return prom;\n  }\n\n  render() {\n    return (\n      <Grommet theme={grommet}>\n        <Switch>\n          <Route exact path=\"/\">\n            <ul>\n              <li><Link to=\"/guest\">Gast</Link></li>\n              <li><Link to=\"/entrance\">Einlass-Management</Link></li>\n              <li><Link to=\"/eventmgmt\">Event-Management</Link></li>\n            </ul>\n          </Route>\n        </Switch>\n        <Switch>\n          <Route path=\"/guest\">\n            <Guest></Guest>\n          </Route>\n          <Route path=\"/entrance\">\n            <EntranceManagement></EntranceManagement>\n          </Route>\n          <Route path=\"/eventmgmt\">\n            <EventManagement></EventManagement>\n          </Route>\n        </Switch>\n      </Grommet>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter } from \"react-router-dom\";\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<HashRouter><App /></HashRouter>, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}