(this["webpackJsonpexample-client"]=this["webpackJsonpexample-client"]||[]).push([[0],{313:function(e,t,n){e.exports=n(618)},318:function(e,t,n){},320:function(e,t,n){},330:function(e,t){},355:function(e,t){},357:function(e,t){},398:function(e,t){},400:function(e,t){},429:function(e,t){},537:function(e,t){},589:function(e,t,n){},593:function(e,t,n){},594:function(e,t,n){},616:function(e,t,n){},618:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(153),i=n.n(c),s=n(39),l=(n(318),n(11)),o=n.n(l),u=n(33),d=n(19),h=n(20),m=n(15),f=n(18),v=n(21),p=(n(320),n(620)),b=n(628),k=n(631),E=n(77),g=n(633),w=n(634),C=n(127),y=n.n(C),O=n(291),j=n.n(O),_=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={},a.sign=a.sign.bind(Object(m.a)(a)),a.connectWallet=a.connectWallet.bind(Object(m.a)(a)),a}return Object(h.a)(n,[{key:"componentDidMount",value:function(){this.init()}},{key:"displayError",value:function(){alert("Ups, das hat nicht geklappt")}},{key:"init",value:function(){this.setState({walletAvailable:!!window.ethereum}),window.ethereum||(this.walletLink=new j.a({appName:"DHBW Bachelors Night Ticketing 2020",appLogoUrl:"https://einfachtierisch.de/media/cache/article_teaser/cms/2015/09/Katze-lacht-in-die-Kamera-shutterstock-Foonia-76562038.jpg?595617",darkMode:!1}),window.ethereum=this.walletLink.makeWeb3Provider("https://mainnet.infura.io/v3/efaece4f5f4443979063839c124c8171",1)),this.setState({connected:!!window.ethereum.selectedAddress}),this.web3=new y.a(window.ethereum)}},{key:"connectWallet",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.ethereum.enable().catch(this.displayError);case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:console.log("User's address is ".concat(t[0])),this.web3.eth.defaultAccount=t[0],this.setState({connected:!0});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"sign",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t,n,a,r=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.ethereum){e.next=2;break}return e.abrupt("return",this.displayError());case 2:if(window.ethereum.selectedAddress){e.next=4;break}return e.abrupt("return",this.displayError());case 4:t=window.ethereum.selectedAddress,"Hallo du Frosch!",n=this.web3.utils.stringToHex("Hallo du Frosch!"),a=[n,t],"personal_sign",this.web3.currentProvider.send({method:"personal_sign",params:a,from:t},(function(e,a){if(e)return console.error(e);if(a.error)return console.error(a.error);console.log(a);var c=r.web3.eth.accounts.recover(n,a.result);c.toLowerCase()===t.toLowerCase()?alert("Successfully ecRecovered signer as "+t):alert("Failed to verify signer when comparing "+c+" to "+t)}));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"linkToDownloadMetaMask",value:function(){window.open("https://wallet.coinbase.com/","_blank")}},{key:"render",value:function(){return r.a.createElement(p.a,{className:"WalletSetup",direction:"column",gap:"medium",pad:"medium"},r.a.createElement("h1",null,"Wallet Setup"),r.a.createElement(g.a,null,"Um Tickets zu erwerben ben\xf6tigen Sie ein sogenanntes Wallet. Dieses ist vergleichbar mit Ihrer Geldb\xf6rse zu der nur Sie Zugriff haben."),!this.state.walletAvailable&&!this.state.connected&&r.a.createElement(p.a,{gap:"medium"},r.a.createElement(g.a,null,"F\xfcr unser Ticket-System muss dieses Wallet Ethereum-f\xe4hig sein. Wir empfehlen Ihnen daher das Coinbase Wallet. Bitte installieren Sie sich das Coinbase Wallet \xfcber die offizielle Website. Kommen Sie nach Abschluss der Einrichtung wieder auf diese Seite zur\xfcck."),r.a.createElement(w.a,{label:"Coinbase f\xfcr's Smartphone installieren",onClick:this.linkToDownloadMetaMask})),!this.state.connected&&r.a.createElement(p.a,{gap:"medium"},r.a.createElement(g.a,null,"Als N\xe4chstes ben\xf6tigt unsere Plattform die Adresse Ihres Wallets. Bitte best\xe4tigen Sie daher die Verbindung mit Ihrem Wallet \xfcber folgende Schaltfl\xe4che. Sie geben dadurch ",r.a.createElement("b",null,"nicht")," Ihre Kontrolle \xfcber das Wallet ab!"),r.a.createElement(w.a,{label:"Mit dem Wallet verbinden",onClick:this.connectWallet})),r.a.createElement(g.a,null,"Hier folgt eine DEMO!!!"),r.a.createElement(w.a,{label:"Sign and Verify Message",onClick:this.sign}))}}]),n}(r.a.Component),H=(n(589),function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={},a}return Object(h.a)(n,[{key:"render",value:function(){return r.a.createElement(p.a,{className:"UserMainMenu",direction:"column",gap:"medium",pad:"medium"},r.a.createElement(s.b,{className:"MenuLink",to:"/guest/tickets"},"Tickets Anzeigen"),r.a.createElement(s.b,{className:"MenuLink",to:"/guest/"},"Tickets Bestellen"),r.a.createElement(s.b,{className:"MenuLink",to:"/guest/"},"Bestellungen Anzeigen"),r.a.createElement(s.b,{className:"MenuLink",to:"/guest/setup"},"Setup"))}}]),n}(r.a.Component)),S=(n(593),n(594),n(128)),T=n.n(S),R=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={qrcode:void 0},a.web3=new y.a(y.a.givenProvider||"ws://localhost:8545"),a.state={error:!1},a.sign(),a}return Object(h.a)(n,[{key:"sign",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t,n,a,r=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.connect();case 2:return e.next=4,this.getSelectedAddress();case 4:t=e.sent,"Hallo du Frosch!",n=this.web3.utils.stringToHex("Hallo du Frosch!"),a=[n,t],"personal_sign",this.web3.currentProvider.sendAsync({method:"personal_sign",params:a,from:t},(function(e,t){if(e)return r.setState({error:!0}),console.error(e);if(t.error)return r.setState({error:!0}),console.error(t.error);var n=t.result;T.a.toDataURL(n).then((function(e){r.setState({qrcode:e})})).catch((function(e){r.setState({error:!0}),console.error(e)}))}));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"connect",value:function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"===typeof window.ethereum){e.next=3;break}return e.next=3,window.ethereum.enable().catch(console.error);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getSelectedAddress",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.web3.eth.getAccounts().catch(console.error);case 2:return t=e.sent,e.abrupt("return",t[0].toLowerCase());case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(p.a,{className:"Obliterator",direction:"column",gap:"medium",pad:"medium"},!this.state.error&&r.a.createElement(p.a,null,r.a.createElement("img",{src:this.state.qrcode,alt:"QRCODE",width:"300px",height:"300px"}),r.a.createElement("h2",null,this.props.ticketType)),this.state.error&&r.a.createElement(p.a,null,r.a.createElement(g.a,null,"Ups, das hat nicht geklappt!")),r.a.createElement(w.a,{label:"Fertig",onClick:this.props.onReady}))}}]),n}(r.a.Component),N=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).obliterate=a.obliterate.bind(Object(m.a)(a)),a.onReadyHandler=a.onReadyHandler.bind(Object(m.a)(a)),a.state={obliterate:void 0},a}return Object(h.a)(n,[{key:"onReadyHandler",value:function(){this.setState({obliterate:void 0})}},{key:"obliterate",value:function(){this.setState({obliterate:"Absolvent"})}},{key:"render",value:function(){return r.a.createElement(p.a,{className:"TicketOverview",direction:"column",gap:"medium",pad:"medium"},r.a.createElement(p.a,null,r.a.createElement(p.a,null,r.a.createElement("h1",{className:"NumberOfTickets"},"4")),r.a.createElement(p.a,null,r.a.createElement(p.a,{className:"Ticket",direction:"row",gap:"small",pad:"small"},r.a.createElement(g.a,{className:"Type"},"Absolvent"),r.a.createElement(w.a,{label:"Einl\xf6sen",onClick:this.obliterate})),r.a.createElement(p.a,{className:"Ticket",direction:"row",gap:"small",pad:"small"},r.a.createElement(g.a,{className:"Type"},"Gast Regul\xe4r"),r.a.createElement(w.a,{label:"Einl\xf6sen",onClick:this.obliterate})),r.a.createElement(p.a,{className:"Ticket",direction:"row",gap:"small",pad:"small"},r.a.createElement(g.a,{className:"Type"},"Gast Regul\xe4r"),r.a.createElement(w.a,{label:"Einl\xf6sen",onClick:this.obliterate})),r.a.createElement(p.a,{className:"Ticket",direction:"row",gap:"small",pad:"small"},r.a.createElement(g.a,{className:"Type"},"Parken"),r.a.createElement(w.a,{label:"Einl\xf6sen",onClick:this.obliterate})))),this.state.obliterate&&r.a.createElement(R,{ticketType:this.state.obliterate,onReady:this.onReadyHandler}))}}]),n}(r.a.Component),D=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={},a}return Object(h.a)(n,[{key:"render",value:function(){return r.a.createElement(p.a,{className:"Guest"},r.a.createElement(b.a,{background:"brand",justify:"between",pad:"10px"},r.a.createElement(s.b,{to:"/guest"},"Home"),r.a.createElement(k.a,{label:"Account",items:[{label:"Logout"}]})),r.a.createElement(E.c,null,r.a.createElement(E.a,{path:"/guest/tickets"},r.a.createElement(N,null)),r.a.createElement(E.a,{path:"/guest/setup"},r.a.createElement(_,null)),r.a.createElement(E.a,{path:"/guest/"},r.a.createElement(H,null))))}}]),n}(r.a.Component),x=n(310),A=n(308),L=n.n(A),P=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={},a.video=r.a.createRef(),a.canvasElement=r.a.createRef(),a.startScan=a.startScan.bind(Object(m.a)(a)),a.tick=a.tick.bind(Object(m.a)(a)),a}return Object(h.a)(n,[{key:"componentWillUnmount",value:function(){this.stopScan()}},{key:"tick",value:function(){if(this.video&&this.video.current){if(this.video.current.readyState===this.video.current.HAVE_ENOUGH_DATA){this.canvasElement.current.height=this.video.current.videoHeight,this.canvasElement.current.width=this.video.current.videoWidth,this.canvas.drawImage(this.video.current,0,0,this.canvasElement.current.width,this.canvasElement.current.height);var e=this.canvas.getImageData(0,0,this.canvasElement.current.width,this.canvasElement.current.height),t=L()(e.data,e.width,e.height,{inversionAttempts:"dontInvert"});if(t)switch(this.props.contentType){case"ETHEREUM_ADDRESS":var n=t.data.match(Object(x.a)(/(?:ethereum:)(0x[0-9A-Za-z]*)/,{address:1}));if(n&&n.groups.address)return this.stopScan(),void this.props.onDone(n.groups.address);break;case"ETHEREUM_SIGNATURE":case"IP_ADDRESS":case"JSON_DATA":break;default:return this.stopScan(),void this.props.onDone(t.data)}}requestAnimationFrame(this.tick)}}},{key:"startScan",value:function(){var e=this;if(!navigator.mediaDevices)return alert("Der Browser unterst\xfctzt diese Funktion nicht.");navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:300,height:300}}).then((function(t){e.canvas=e.canvasElement.current.getContext("2d"),e.video.current.srcObject=t,e.video.current.setAttribute("playsinline",!0),e.video.current.play(),requestAnimationFrame(e.tick),e.setState({isScanning:!0})})).catch((function(e){console.error(e),alert("Sorry, Kamera-Stream konnte nicht geladen werden.")}))}},{key:"stopScan",value:function(){this.video&&this.video.current&&this.video.current.srcObject&&(this.video.current.srcObject.getVideoTracks()[0].stop(),this.setState({isScanning:!1}))}},{key:"render",value:function(){return r.a.createElement(p.a,{className:"QRScanner"},r.a.createElement(p.a,{pad:"medium"},r.a.createElement("canvas",{ref:this.canvasElement,hidden:!this.state.isScanning}),r.a.createElement("video",{ref:this.video,hidden:!0})),!this.state.isScanning&&r.a.createElement(w.a,{label:this.props.label||"Scan",onClick:this.startScan}))}}]),n}(r.a.Component),M=(r.a.Component,n(617),n(616),function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={step:0},a._iceCandidatesHandler=a._iceCandidatesHandler.bind(Object(m.a)(a)),a._dataChannelOpenHandler=a._dataChannelOpenHandler.bind(Object(m.a)(a)),a._generateOfferCode=a._generateOfferCode.bind(Object(m.a)(a)),a._abortHandler=a._abortHandler.bind(Object(m.a)(a)),a._scanDoneHandler=a._scanDoneHandler.bind(Object(m.a)(a)),a._initConnection(),a}return Object(h.a)(n,[{key:"_initConnection",value:function(){this.icecandidates=[],this.localPeerConnection=new RTCPeerConnection(null),this.localPeerConnection.addEventListener("icecandidate",this._iceCandidatesHandler),this.localPeerConnection.addEventListener("iceconnectionstatechange",this._connectionChangeHandler),this.dataChannel=this.localPeerConnection.createDataChannel("sendDataChannel",null),this.dataChannel.addEventListener("message",this._messageHandler),this.dataChannel.addEventListener("open",this._dataChannelOpenHandler),this.dataChannel.addEventListener("close",this._dataChannelClosedHandler),this._createOffer()}},{key:"_iceCandidatesHandler",value:function(e){this.icecandidates.length<=1&&this.icecandidates.push(e.candidate),this.offer&&!this.qrcode&&setTimeout(this._generateOfferCode,100)}},{key:"_connectionChangeHandler",value:function(e){console.log(e)}},{key:"_dataChannelOpenHandler",value:function(e){console.log(e),this.props.onReady(),this.dataChannel.send("Hallo Client!")}},{key:"_dataChannelClosedHandler",value:function(e){console.log(e)}},{key:"_messageHandler",value:function(e){alert(e.data)}},{key:"_readTicketRemote",value:function(){}},{key:"_obliterateTicketRemote",value:function(){}},{key:"_createOffer",value:function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.localPeerConnection.createOffer().catch(console.error);case 2:return this.offer=e.sent,e.next=5,this.localPeerConnection.setLocalDescription(this.offer).catch(console.error);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_generateOfferCode",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={offer:this.offer,candidates:this.icecandidates},e.next=3,T.a.toDataURL(JSON.stringify(t)).catch(console.error);case 3:n=e.sent,this.setState({qrcode:n});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_scanDoneHandler",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var n,a=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=JSON.parse(t),e.next=3,this.localPeerConnection.setRemoteDescription(new RTCSessionDescription(n.answer)).catch(this.handleError);case 3:n.candidates.forEach((function(e){a.localPeerConnection.addIceCandidate(e).catch(a.handleError)}));case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_abortHandler",value:function(){this.props.onAbort()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"ticket-reader-dialog"},r.a.createElement("div",{className:"ticket-reader-background-box"}),r.a.createElement("div",{className:"ticket-reader-dialog-center"},r.a.createElement("div",{className:"ticket-reader-dialog-box"},r.a.createElement("div",{className:"ticket-reader-db-header"},r.a.createElement("h1",null,"Remote Ticket Reader Hinzuf\xfcgen"),r.a.createElement(w.a,{className:"abort",onClick:this._abortHandler},"X")),0===this.state.step&&r.a.createElement("div",null,r.a.createElement("div",{className:"ticket-reader-qrcode"},!this.state.qrcode&&r.a.createElement("div",{className:"loader"},"Loading..."),this.state.qrcode&&r.a.createElement("img",{src:this.state.qrcode,alt:"Ein QR-Code sollte hier angezeigt werden."})),r.a.createElement("div",{className:"ticket-reader-description"},r.a.createElement("p",null,"Bitte mit dem Zielger\xe4t scannen")),r.a.createElement("div",{className:"ticket-reader-action"},r.a.createElement(w.a,{onClick:function(){e.setState({step:1})},label:"Weiter"}))),1===this.state.step&&r.a.createElement("div",null,r.a.createElement("div",{className:"ticket-reader-scanner"},r.a.createElement(P,{onDone:this._scanDoneHandler,label:"Scanvorgang starten"})),r.a.createElement("div",{className:"ticket-reader-description"},r.a.createElement("p",null,"Bitte nun den Code des Zielger\xe4ts scannen"))))))}}]),n}(r.a.Component)),W=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={step:0},a._iceCandidatesHandler=a._iceCandidatesHandler.bind(Object(m.a)(a)),a._dataChannelOpenHandler=a._dataChannelOpenHandler.bind(Object(m.a)(a)),a._receiveChannelHandler=a._receiveChannelHandler.bind(Object(m.a)(a)),a._generateAnswerCode=a._generateAnswerCode.bind(Object(m.a)(a)),a._abortHandler=a._abortHandler.bind(Object(m.a)(a)),a._scanDoneHandler=a._scanDoneHandler.bind(Object(m.a)(a)),a._initConnection(),a}return Object(h.a)(n,[{key:"_initConnection",value:function(){this.icecandidates=[],this.localPeerConnection=new RTCPeerConnection(null),this.localPeerConnection.addEventListener("icecandidate",this._iceCandidatesHandler),this.localPeerConnection.addEventListener("iceconnectionstatechange",this._connectionChangeHandler),this.localPeerConnection.addEventListener("datachannel",this._receiveChannelHandler)}},{key:"_iceCandidatesHandler",value:function(e){this.icecandidates.length<=1&&this.icecandidates.push(e.candidate),this.answer&&!this.qrcode&&setTimeout(this._generateAnswerCode,100)}},{key:"_connectionChangeHandler",value:function(e){console.log(e)}},{key:"_dataChannelOpenHandler",value:function(e){console.log(e),this.props.onReady(),this.dataChannel.send("Hallo Master!")}},{key:"_dataChannelClosedHandler",value:function(e){console.log(e)}},{key:"_messageHandler",value:function(e){alert(e.data)}},{key:"_receiveChannelHandler",value:function(e){this.dataChannel=e.channel,this.dataChannel.addEventListener("message",this._messageHandler),this.dataChannel.addEventListener("open",this._dataChannelOpenHandler),this.dataChannel.addEventListener("close",this._connectionChangeHandler)}},{key:"_readTicketRemote",value:function(){}},{key:"_obliterateTicketRemote",value:function(){}},{key:"_generateAnswerCode",value:function(){var e=Object(u.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={answer:this.answer,candidates:this.icecandidates},e.next=3,T.a.toDataURL(JSON.stringify(t)).catch(console.error);case 3:n=e.sent,this.setState({qrcode:n});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_scanDoneHandler",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var n,a=this;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=JSON.parse(t),e.next=3,this.localPeerConnection.setRemoteDescription(new RTCSessionDescription(n.offer)).catch(console.error);case 3:return n.candidates.forEach((function(e){a.localPeerConnection.addIceCandidate(e).catch(console.error)})),e.next=6,this.localPeerConnection.createAnswer().catch(console.error);case 6:return this.answer=e.sent,e.next=9,this.localPeerConnection.setLocalDescription(this.answer).catch(console.error);case 9:this.setState({step:1});case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_abortHandler",value:function(){this.props.onAbort()}},{key:"render",value:function(){return r.a.createElement("div",{className:"ticket-reader-dialog"},r.a.createElement("div",{className:"ticket-reader-background-box"}),r.a.createElement("div",{className:"ticket-reader-dialog-center"},r.a.createElement("div",{className:"ticket-reader-dialog-box"},r.a.createElement("div",{className:"ticket-reader-db-header"},r.a.createElement("h1",null,"Als Ticket Reader verbinden"),r.a.createElement(w.a,{className:"abort",onClick:this._abortHandler},"X")),0===this.state.step&&r.a.createElement("div",null,r.a.createElement("div",{className:"ticket-reader-scanner"},r.a.createElement(P,{onDone:this._scanDoneHandler,label:"Scanvorgang starten"})),r.a.createElement("div",{className:"ticket-reader-description"},r.a.createElement("p",null,"Bitte den Code des Initiators scannen"))),1===this.state.step&&r.a.createElement("div",null,r.a.createElement("div",{className:"ticket-reader-qrcode"},!this.state.qrcode&&r.a.createElement("div",{className:"loader"},"Loading..."),this.state.qrcode&&r.a.createElement("img",{src:this.state.qrcode,alt:"Ein QR-Code sollte hier angezeigt werden."})),r.a.createElement("div",{className:"ticket-reader-description"},r.a.createElement("p",null,"Bitte nun mit dem Initiator Ger\xe4t scannen"))))))}}]),n}(r.a.Component),q=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={remoteTicketReader:[]},a.connectRemoteTicketReader=a.connectRemoteTicketReader.bind(Object(m.a)(a)),a}return Object(h.a)(n,[{key:"connectRemoteTicketReader",value:function(){var e=this,t=r.a.createElement(M,{onAbort:function(){e.setState({connect:null})},onReady:function(){e.setState({connect:null}),e.setState({remoteTicketReader:e.state.remoteTicketReader.push(t)})}});this.setState({connect:t})}},{key:"disconnectRemoteTicketReader",value:function(e){}},{key:"disconnectAll",value:function(){}},{key:"render",value:function(){return r.a.createElement(p.a,{className:"TicketReaderManager",pad:"medium"},r.a.createElement("p",null,"Derzeit sind ",this.state.remoteTicketReader.length," Ticket Leser verbunden."),r.a.createElement(w.a,{onClick:this.connectRemoteTicketReader,label:"Ticket Leser Hinzuf\xfcgen"}),this.state.connect)}}]),n}(r.a.Component),B=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={},a.connectTicketReader=a.connectTicketReader.bind(Object(m.a)(a)),a}return Object(h.a)(n,[{key:"connectTicketReader",value:function(){var e=this,t=r.a.createElement(W,{onAbort:function(){e.setState({connect:null})},onReady:function(){e.setState({connect:null}),e.ticketReader=t}});this.setState({connect:t})}},{key:"render",value:function(){return r.a.createElement(p.a,{className:"EntranceManagement",pad:"medium"},r.a.createElement("p",null,"Wenn Sie dieses Ger\xe4t als Ticket Leser verwenden m\xf6chten, m\xfcssen Sie es erst mit dem Event-Manager verbinden."),r.a.createElement(w.a,{onClick:this.connectTicketReader,label:"Ticket Reader Aktivieren"}),this.state.connect,!1)}}]),n}(r.a.Component),z=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={},a}return Object(h.a)(n,[{key:"showTicketHandler",value:function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(new q).connectTicketReader();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement(p.a,{className:"IndexedDBExample"},r.a.createElement(q,null))}}]),n}(r.a.Component),I=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={},a}return Object(h.a)(n,[{key:"render",value:function(){return r.a.createElement(p.a,{className:"EventManagement"},r.a.createElement(E.c,null,r.a.createElement(E.a,{path:"/"},r.a.createElement(z,null))))}}]),n}(r.a.Component),U=n(632),F=n(630),G=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={account:null},a.scanDoneHandler=a.scanDoneHandler.bind(Object(m.a)(a)),a.obliterateTokens=a.obliterateTokens.bind(Object(m.a)(a)),a}return Object(h.a)(n,[{key:"errorDisplay",value:function(e){alert("Sorry, there was an error. Please try again.")}},{key:"scanDoneHandler",value:function(e){var t=this;this.getAccountDetails(e).then((function(n){if(!n.verified)return alert("Account nicht f\xfcr TBN-Nutzung verifiziert");t.getAccountBalance(e).then((function(a){var r=t.state;r.account={address:e,balance:a,verified:n.verified,paidTickets:n.paidTickets,poolTickets:n.poolTickets,parkTickets:n.parkTickets},t.setState(r)}))}))}},{key:"getAccountBalance",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:3000/balanceOf?address="+t,{method:"GET",mode:"cors",cache:"no-cache"}).catch(this.errorDisplay);case 2:return n=e.sent,e.next=5,n.json().catch(this.errorDisplay);case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getAccountDetails",value:function(){var e=Object(u.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:3000/accountDetails?address="+t,{method:"GET",mode:"cors",cache:"no-cache"}).catch(this.errorDisplay);case 2:return n=e.sent,e.next=5,n.json().catch(this.errorDisplay);case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"obliterateTokens",value:function(e){var t=this;return new Promise((function(e,n){setTimeout((function(){e("\xdcbertragen"),t.scanDoneHandler(null)}),3e3)}))}},{key:"render",value:function(){return r.a.createElement(U.a,{theme:F.a},r.a.createElement(E.c,null,r.a.createElement(E.a,{exact:!0,path:"/"},r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement(s.b,{to:"/guest"},"Gast")),r.a.createElement("li",null,r.a.createElement(s.b,{to:"/entrance"},"Einlass-Management")),r.a.createElement("li",null,r.a.createElement(s.b,{to:"/eventmgmt"},"Event-Management"))))),r.a.createElement(E.c,null,r.a.createElement(E.a,{path:"/guest"},r.a.createElement(D,null)),r.a.createElement(E.a,{path:"/entrance"},r.a.createElement(B,null)),r.a.createElement(E.a,{path:"/eventmgmt"},r.a.createElement(I,null))))}}]),n}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(s.a,null,r.a.createElement(G,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[313,1,2]]]);
//# sourceMappingURL=main.95f97f56.chunk.js.map