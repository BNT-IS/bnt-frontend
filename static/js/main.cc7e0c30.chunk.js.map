{"version":3,"sources":["config.js","AppContexts/UserContext.js","Authentication/Login.js","SystemSetup/SystemSetup.js","Ticketshop/Components/UserMainMenu.js","Ticketshop/Components/TicketOverview.js","Ticketshop/Components/BookingOverview.js","Ticketshop/Components/TicketBestellung.js","Ticketshop/Ticketshop.js","Utilities/Components/QRScanner.js","Utilities/Components/Dialog.js","EventManagement/Classes/TicketReader.js","Entrance/Entrance.js","EventManagement/Classes/LocalTicketMirror.js","EventManagement/Components/EntranceDashboard.js","EventManagement/Classes/RemoteTicketReader.js","EventManagement/Components/TicketReaderManager.js","EventManagement/Components/ShopManagementConfMaxTickets.js","EventManagement/Components/ShopManagementViewBookings.js","EventManagement/Components/ShopManagementManageSalesStatus.js","EventManagement/Components/ShopManagamentAbsolventenListe.js","EventManagement/Components/ShopManagementPaymentOptions.js","EventManagement/Components/ShopManagementManageOTPS.js","EventManagement/Components/ShopManagementViewOTPs.js","EventManagement/Components/ShopManagement.js","EventManagement/EventManagement.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","BACKEND_BASE_URI","INFURA_URI","IDB_NAME","UserContext","React","createContext","Login","props","createUser","bind","login","loginPassHandler","mailHandler","otpBestätigen","otpInputHandler","pass1Handler","pass2Handler","setState0","setState1","setState6","state","dhbw_mail","login_pass","new_pass","otp","pass1","pass2","step","access_token","tokenHandler","verifyPasswort","this","context","user","redirectUserToHome","event","setState","target","value","console","log","alert","pw","fetch","Config","method","mode","cache","headers","body","JSON","stringify","newPassword","catch","response","ok","json","rückgabe","message","handleFinalLogin","mose","email","password","status","userData","setUserContext","Box","className","gap","Header","background","justify","pad","Text","style","textDecoration","color","href","Heading","Button","label","onClick","TextInput","placeholder","onChange","classname","direction","Component","contextType","Hauptansicht","getConfigured","key","wert","statusMap","get","Ansicht","initializeStep","doneOnce","textAlign","weight","size","List","primaryKey","secondaryKey","data","doneSteps","AddWallet","httpProvider","created","deploymentPrice","configureTheAdminWallet","http_provider","setWalletAddress","wallet_address","changeValueOfStatusMap","changeValueOfGasprices","price_deployment","setHttpProvider","align","changeStep","DeploySmartContract","walletBalance","deployed","getBalanceFromWallet","checkBalancesAndExecute","walletAddress","Web3","require","web3","providers","HttpProvider","eth","getBalance","error","balance","utils","fromWei","getValueOfGasPrices","deploySmartContract","create_ticket_price","relinquish_place_price","ConfigureAdminAccount","configureTheAdminAcc","ConfigureDatabase","host","db","port","configureTheDatabase","database","ConfigureMailserver","conncetion","standardMail","standardPrefix","configureTheMailserver","secure","default_from","default_subject_prefix","textInput","Select","options","option","ConfigureShopConfig","maxPersonenProEvent","maxTicketProEvent","maxVIPPersonen","configureTheShopConfig","max_Person_pro_Event","max_Tickets_pro_Event","max_VIP_Person","setShopConfiguration","SystemSetup","goToStep","Map","gasPrices","shopConfig","price","set","address","values","window","location","assign","finishSystemSetup","UserMainMenu","wrap","to","SingleTicketViewer","identifier","hash","replace","ticket","forename","surename","ticketType","tempTicket","tickets","find","generateQRCode","id","sIG","secretIngredient","QRCode","toDataURL","then","url","qrcode","surname","width","height","src","alt","print","TicketListItem","TicketOverview","loading","fetchTickets","token","forEach","Token","localStorage","setItem","getItem","ticketElements","map","path","length","BuchungsItem","ticketsForBooking","push","buchung","booking","accPanelLabel","Date","createdAt","toLocaleDateString","paidAt","AccordionPanel","margin","BookingOverview","loadListHandler","loadTicketsHandler","translateTicketType","buchungen","indexOfBooking","undefined","bookingId","findIndex","kopieTickets","concat","filteredTickets","filter","Accordion","onActive","activeItems","PersonInput","onInputHandler","onCheckBox","isWheelchairUser","stateCopy","name","onInput","CheckBox","checked","TicketBestellung","increment","property","guestcount","MaxAnzahBesuchertickets","personsIndex","persons","personInput","personName","personsList","personInputFields","parkcount","decrement","pop","windowAbsolventTicket","windowGuestTicket","windowParkTicket","toOverview","toPayment","createTickets","createBooking","ShopConfig","getPaymentOptions","paymentCalculation","MaxAnzahlAbsolvententickets","TicketPrice_Type0","TicketPrice_Type1","TicketPrice_Type2","PaymentBankActive","PaymentBankReceiver","PaymentBankName","PaymentBankIban","PaymentPayPalActive","PaymentPayPalLink","PaymentPayPalMail","TotalInvoice","graduate","bookingResult","type","gesamtBetrag","configData","max_TicketType_0_pro_Absolvent","max_TicketType_1_pro_Absolvent","parseInt","price_TicketType_0","price_TicketType_1","price_TicketType_2","salesStatus","Bank","Aktiviert","Empfänger","Name_der_Bank","IBAN","PayPal","PayPal_Link","PayPal_Verwendung","userId","result","element","anzahlparktick","i","showPaymentOptions","Ticketshop","requireLogin","Menu","items","logout","QRScanner","video","createRef","canvasElement","startScan","tick","stopScan","current","readyState","HAVE_ENOUGH_DATA","canvas","drawImage","imageData","getImageData","code","jsQR","inversionAttempts","contentType","match","groups","onDone","requestAnimationFrame","navigator","mediaDevices","getUserMedia","facingMode","stream","getContext","srcObject","setAttribute","play","isScanning","err","getVideoTracks","stop","ref","hidden","Dialog","title","onAbort","children","TicketReader","_iceCandidatesHandler","_dataChannelOpenHandler","_receiveChannelHandler","_dataChannelClosedHandler","_connectionChangeHandler","_generateAnswer","_messageHandler","requestMap","icecandidates","remoteICECandidates","onConnectionChanged","connectionState","_initConnection","localPeerConnection","RTCPeerConnection","addEventListener","candidate","answer","setTimeout","debug","onReady","parse","reqId","callbacks","dataChannel","channel","dt","getTime","c","r","Math","random","floor","toString","Promise","resolve","reject","_createUUID","msg","params","send","e","signature","config","setRemoteDescription","RTCSessionDescription","offer","candidates","addIceCandidate","createAnswer","setLocalDescription","onAnswer","lstore","localDescription","currentLocalDescription","remoteDescription","currentRemoteDescription","Entrance","connected","currentTicket","connectTicketReader","scanDoneHandler","capturedTicketHandler","obliterateTicketHandler","closeTicketViewHandler","ticketReader","connectTR","a","binaryString","pako","deflate","level","TRQRCode","connectTRStep","obj","inflate","setMasterConfig","ticketData","Error","readTicketRemote","currentSecretIngredient","obliterateTicketRemote","isValid","isUsed","LocalTicketMirror","_createDB","saveTicketMirror","getTicketList","indexedDB","waitingForIDBReadyQueue","_initDB","onTicketListChanged","request","open","ev","errorCode","objectStore","createObjectStore","keyPath","createIndex","unique","_getIDB","transaction","clear","add","getAll","onerror","onsuccess","valuesForHash","sha3","requestUpdate","put","EntranceDashboard","lockDataset","handleDumpMirror","showTickets","lockHandler","usedTicketsCount","localTicketMirror","ltm","confirm","unusedTicketsCount","Clock","alignSelf","disabled","toggle","Stack","Meter","aria-label","max","thickness","RemoteTicketReader","iceCandidatesHandler","dataChannelOpenHandler","generateOfferCode","dataChannelClosedHandler","connectionChangeHandler","setTicketReaderConfig","messageHandler","uuid","createUUID","onOffer","onGetTicket","callback","onObliterateTicket","initConnection","createDataChannel","createOffer","errorMsg","answerMsg","success","handleError","TicketReaderManager","connectRemoteTicketReader","connectRTR","remoteTicketReader","onRTR","RTRQRCode","addRTRStep","RTRList","rtr","onClickItem","onRemoveRTR","ShopManagementConfMaxTickets","Absolvententickets","Begleitertickets","setValuesAndChangeStep","changeToShopMangement","setConfMaxTicketsFromConf","ShopManagementViewBookings","paid","searchOpen","searchPaid","headline1","approve","cancel","headline2","componentDidMount","getBookings","searchOpenHandler","searchPaidHandler","postTicket","lauf2","lauf3","speicher","speicher2","lauf","canceled","today","now","response2","mail","toLowerCase","includes","mail2","openBooking","finishedBooking","test","ShopManagementManageSalesStatus","switchSalesStatus","salesStatusBoolean","setConfSalesStatus","position","left","top","ShopManagamentAbsolventenListe","handleOnDrop","eingleseneListe","liste","eMail","newElement","Name","listeEingelesen","initialeListe","handleOnError","file","inputElem","reason","handleOnRemoveFile","transferListForCreation","switchBackToShopmanagament","emailList","counter","createOTPwithEmailAndRole","setShopConfigInitialList","onDrop","onError","delimiter","header","addRemoveButton","onRemoveFile","ShopManagementPaymentOptions","receiverName","bankName","iban","bic","verwendung","bankAktiviert","payPalLink","payPalMail","payPalVerwendung","payPalAktiviert","bankStatus","payPalStatus","receiverNameHandler","bankNameHandler","ibanHandler","bicHandler","verwendungHandler","assignBankValues","payPalLinkHandler","payPalMailHandler","payPalVerwendungHandler","assignPayPalValues","switchBankStatus","setBankValuesAndChangeStep","switchPayPalStatus","setPayPalValuesAndChangeStep","empfänger","name_der_bank","verwendungszweck","BIC","Verwendungszweck","PayPal_Mail","bankStatusBoolean","setConfBankStatus","payPalStatusBoolean","setConfPayPalStatus","ShopManagementManageOTPS","OTP","role","lastEmail","lastRole","addOTP","ShopManagementViewOTPs","OTPs","searchOTP","targetRole","getOTPs","searchOTPHandler","deleteOtp","otps","otpsRole","optId","DataQuickViewMaxTickets","callShopManagamentConfTickets","DataTable","columns","primary","maxTicketmenge","DataQuickViewPayment","getBankStatus","getPayPalStatus","bezahl","BezahlOption","Status","callConfiguratePaymentMethods","DataQuickViewBookings","callShopManagementViewBookings","statusBookings","DataQuickViewSalesStatistics","statusSales","DataQuickViewManageSales","callShopManagementManageSales","Beschreibung","Class-Name","DataQuickViewCreateOTPS","callShopManagementCreateOTPS","initialList","switchInitialList","DataQuickViewManageOTPS","DataQuickViewViewOTPs","callShopManagementViewOTPS","ShopManagement","openBookings","maxTicketsProEvent","Tickettype","Anzahl","changeInitializeStep","getValuesFromConfig","setMaxTicketMenge","setBankStatus","setPayPalStatus","getTickets","setTickets","res","bezahlt","unbezahlt","storniert","setBookings","verfügbar","verkauft","rollstuhlFahrer","parkTickets","maxTickets","initialeOPTListe","absolvententickets","begleitertickets","newSalesStatus","setSalesStatus","intialListStatus","newBankStatus","paymentOptions","newPayPalStatus","ClassName","EventManagement","rTRHandler","removeRTR","forceUpdate","getTicket","obliterateTicket","idx","indexOf","splice","App","userContext","setupMode","initUserContext","checkUserContext","detectSystemState","setInterval","detectAuthState","Authorization","clearUserContext","deleteDatabase","requiredRole","Provider","Object","Grommet","theme","grommet","eigenschaft1","alignContent","isLocalhost","Boolean","hostname","registerValidSW","swUrl","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","ReactDOM","render","document","getElementById","URL","process","origin","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.cc7e0c30.chunk.js","sourcesContent":["module.exports = {\n    BACKEND_BASE_URI: \"http://localhost:3000\",\n    INFURA_URI: \"https://mainnet.infura.io/v3/efaece4f5f4443979063839c124c8171\",\n    IDB_NAME: \"TicketMirror\"\n};","import React from 'react';\n\nconst UserContext = React.createContext();\n\nexport default UserContext;","import React from 'react';\nimport { Box, Button, TextInput, Text, Header, Heading } from 'grommet';\nimport Config from '../config';\nimport UserContext from '../AppContexts/UserContext';\n\nclass Login extends React.Component {\n\n    static contextType = UserContext;\n\n    constructor(props) {\n        super(props);\n        this.createUser = this.createUser.bind(this);\n        this.login = this.login.bind(this);\n        this.loginPassHandler = this.loginPassHandler.bind(this);\n        this.mailHandler = this.mailHandler.bind(this);\n        this.otpBestätigen = this.otpBestätigen.bind(this);\n        this.otpInputHandler = this.otpInputHandler.bind(this);\n        this.pass1Handler = this.pass1Handler.bind(this);\n        this.pass2Handler = this.pass2Handler.bind(this);\n        this.setState0 = this.setState0.bind(this);\n        this.setState1 = this.setState1.bind(this);\n        this.setState6 = this.setState6.bind(this);\n        this.state = { dhbw_mail: \"\", login_pass: \"\", new_pass: \"\", otp: \"\", pass1: \"\", pass2: \"\", step: 0, access_token: \"\" };\n        this.tokenHandler = this.tokenHandler.bind(this);\n        this.verifyPasswort = this.verifyPasswort.bind(this);\n    }\n\n    componentDidUpdate(){\n        if(this.context.user){\n            this.context.redirectUserToHome();\n        }\n    }\n\n    otpInputHandler(event) {\n        //Liest das eingegebene OTP aus dem Input-Feld aus und speichert es zwischen\n        this.setState({ otp: event.target.value });\n    }\n\n    tokenHandler(event) {\n        //Liest den eingegebenen Token aus dem Input-Feld aus und speichert diesen zwischen\n        this.setState({ access_token: event.target.value });\n    }\n\n    otpBestätigen() {\n        //Gibt das OTP aus und springt zum nächsten Schritt\n        console.log(this.state.otp);\n        this.setState({ step: 2 });\n    }\n\n    pass1Handler(event) {\n        //Aktualisiert das eingegebene Passwort im TextInput\n        this.setState({ pass1: event.target.value });\n    }\n\n    pass2Handler(event) {\n        //Aktualisiert das eingegebene Passwort zur Bestätigung im TextInput\n        this.setState({ pass2: event.target.value });\n    }\n\n    mailHandler(event) {\n        //Aktualisiert die eingegebene E-Mail-Adresse im TextInput\n        this.setState({ dhbw_mail: event.target.value });\n    }\n\n    loginPassHandler(event) {\n        //Aktualisiert das eingegebene Passwort zur Anmeldung im TextInput\n        this.setState({ login_pass: event.target.value });\n    }\n\n    verifyPasswort() {\n        //Überprüft, ob Passwort1 und Passwort2 übereinstimmen\n        if (this.state.pass1 === this.state.pass2) {\n            alert(\"Die angegebenen Passwörter stimmen überein!\");\n            this.createUser(this.state.pass2);\n        }\n        else {\n            alert(\"Die angegebenen Passwörter stimmen nicht überein!\");\n            this.setState({ pass1: \"\" });\n            this.setState({ pass2: \"\" });\n        }\n    }\n\n    displayError() {\n        //Wirft eine Standardfehlermeldung aus\n        alert(\"Ups, das hat leider nicht funktioniert. Bitte versuchen Sie es erneut.\")\n    }\n\n    async createUser(pw) {\n        //Legt anhand des eingegebenen OTP's einen User mit dem gewählten Passwort an\n        const response = await fetch(Config.BACKEND_BASE_URI + '/auth/createUser/' + this.state.otp, {\n            method: 'POST',\n            mode: 'cors',\n            cache: 'no-cache',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({ newPassword: pw })\n        }).catch(console.log);\n\n        if (!response.ok) {\n            alert(\"Für das eingegebene OTP konnte kein User angelegt werden.\");\n            const rückgabe = await response.json().catch(console.log);\n            if (rückgabe.message) {\n                alert(rückgabe.message + \" Ihr angegebenes OTP scheint nicht zu exisitieren. Bitte überprüfen Sie die Eingabe.\");\n                this.setState({ step: 1 });\n            }\n            return;\n        } else {\n            const rückgabe = await response.json().catch(console.log);\n            if (rückgabe) {\n                alert(\"Der Nutzer wurde erfolgreich angelegt.\");\n                this.handleFinalLogin(rückgabe);\n            }\n        }\n    }\n\n    async login() {\n        //Führt anhand der eingegebenen Mail-Adresse und des eingegebenen Passworts eine Anmeldung aus\n        const response = await fetch(Config.BACKEND_BASE_URI + '/auth/login', {\n            method: 'POST',\n            mose: 'cors',\n            cache: 'no-cache',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({ email: this.state.dhbw_mail, password: this.state.login_pass })\n        }).catch(console.log);\n\n        if (!response.ok) {\n            const rückgabe = await response.json().catch(console.log);\n            switch (response.status) {\n                case 401:\n                    alert(\"Ihre Anmeldedaten scheinen nicht zu stimmen. Bitte überprüfen Sie ihre Angaben.\");\n                    break;\n                case 500:\n                    alert(\"Die Anmeldung ist aufgrund eines Server-Fehlers fehlgeschlagen. Bitte versuchen Sie es später erneut.\");\n                    break;\n                default:\n                    alert(rückgabe.message);\n            }\n            this.setState({ step: 6 });\n            return;\n        } else {\n            const rückgabe = await response.json().catch(console.log);\n            if (rückgabe) {\n                this.handleFinalLogin(rückgabe);\n            }\n        }\n    }\n\n    handleFinalLogin(userData) {\n        //Schreibt nach der Anmeldung die spezifischen Userdaten in den UserContext und leitet ihn auf die Startseite weiter\n        this.context.setUserContext(userData);\n        this.context.redirectUserToHome();\n    }\n\n    setState0() {\n        //Springt zur Übersicht des Login-Fensters\n        this.setState({ step: 0 });\n    }\n\n    setState1() {\n        //Springt zur Eingabe des OTP's im Erstellungsprozess\n        this.setState({ step: 1 });\n    }\n\n    setState6() {\n        //Springt zur Anmeldung mit einem vorhandenen Wallet\n        this.setState({ step: 6 });\n    }\n\n    render() {\n        //Stellt die jeweiligen Schritte für den Benutzer dar\n        return (\n\n            <Box className=\"AccountManagement\" gap=\"small\">\n                <Header background=\"brand\" justify=\"between\" pad=\"10px\">\n                    <Text><a style={{textDecoration: \"none\", color: \"white\"}} href=\"./\">BNT Ticketsystem</a></Text>\n                </Header>\n                <Box pad=\"small\">\n                    {this.state.step === 0 &&\n                        //Startseite des Accountmanagements, Auswahl zwischen Neuanlage eines Áccounts und Anmeldung mit einem bestehenden Account\n                        <Box gap=\"small\">\n                            <Heading>Login</Heading>\n                            <Text>Klicke hier, um einen neuen Account anzulegen</Text>\n                            <Button label=\"Neuen Account anlegen\" gap=\"small\" onClick={this.setState1}></Button>\n                            <Text>Klicke hier, um dich mit einem bestehenden Account anzumelden</Text>\n                            <Button label=\"Mit bestehendem Account anmelden\" onClick={this.setState6}></Button>\n                        </Box>\n                    }\n                    {this.state.step === 1 &&\n                        //Eingabe des persönlichen OTP's\n                        <Box gap=\"small\">\n                            <Heading>Angabe des Einmal-Passworts</Heading>\n                            <Text>Bitte geben Sie das OneTime-Passwort ein, das wir an Ihre DHBW-Mailadresse versendet haben, und bestätigen Sie die Eingabe</Text>\n                            <TextInput placeholder=\"OTP eingeben\" value={this.state.otp} onChange={this.otpInputHandler}></TextInput>\n                            <Button label=\"Eingabe bestätigen\" onClick={this.otpBestätigen}></Button>\n                            <Button label=\"Zurück zur Übersicht\" onClick={this.setState0}></Button>\n                        </Box>\n                    }\n                    {this.state.step === 2 &&\n                        //Vergabe eines neuen Passwortes, muss durch zweifache Eingabe bestätigt werden\n                        <Box classname=\"Passwortvergabe\" direction=\"column\" gap=\"small\">\n                            <Heading>Passwortvergabe</Heading>\n                            <Text>Bitte vergeben Sie ein neues Passwort für Ihren Account</Text>\n                            <TextInput placeholder=\"Neues Passwort vergeben\" value={this.state.pass1} onChange={this.pass1Handler}></TextInput>\n                            <TextInput placeholder=\"Neues Passwort bestätigen\" value={this.state.pass2} onChange={this.pass2Handler}></TextInput>\n                            <Button label=\"Passwort bestätigen\" onClick={this.verifyPasswort}></Button>\n                        </Box>\n                    }\n                    {this.state.step === 6 &&\n                        //Anmeldefenster für bestehende Accounts\n                        <Box gap=\"small\">\n                            <Heading>Anmeldung mit einem vorhandenen Account</Heading>\n                            <TextInput placeholder=\"DHBW-Mailadresse eingeben\" value={this.state.dhbw_mail} onChange={this.mailHandler}></TextInput>\n                            <TextInput placeholder=\"Account-Passwort eingeben\" value={this.state.login_pass} onChange={this.loginPassHandler}></TextInput>\n                            <Button label=\"Anmelden\" onClick={this.login}></Button>\n                            <Button label=\"Zurück zur Übersicht\" onClick={this.setState0}></Button>\n                        </Box>\n                    }\n                </Box>\n            </Box>\n        );\n    }\n}\nexport default Login;\n\n\n","import React from 'react';\nimport { Box, Button, Select, Text, List, TextInput } from 'grommet';\nimport Config from '../config';\n\nclass Hauptansicht extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n        };\n        this.getConfigured = this.getConfigured.bind(this);\n\n    }\n\n    //Function to Switch Boolean Values from statusMap into Text\n    getConfigured(key) {\n        var wert = this.props.statusMap.get(key);\n        if (!wert)\n            return <Text key={key}>Nicht erledigt</Text>;\n        if (wert)\n            return <Text key={key}>Erledigt</Text>;\n    }\n\n    render() {\n        var Ansicht = [];\n        //Start Text\n        if (this.props.initializeStep === 0 && this.props.doneOnce === false) {\n            Ansicht[0] = <Box pad=\"medium\" key=\"start\">\n                <Text textAlign=\"center\" weight=\"bold\" size=\"xxlarge\">\n                    Herzlich Wilkommen zum Bachelors-Night Ticketsystem.\n                </Text>\n                <Box pad=\"medium\"></Box>\n                <Text>\n                    Die nächsten Schritte dienen zur Initalisierung des Systems.\n                    Sie werden durch die notwendigen Vorbereitungsschritte geführt.\n                </Text>\n                <Text textAlign=\"center\">\n                    Für die Initalisierung sind folgende Schritte notwendig\n                </Text>\n            </Box>\n        }\n        // Text if Steps are Finished\n        if (this.props.initializeStep === 7 || this.props.doneOnce) {\n            Ansicht[0] = <Box pad=\"medium\" key=\"end\">\n                <Text weight=\"bold\" size=\"xxlarge\" textAlign=\"center\">Konfiguration abgeschlossen</Text>\n                <Box pad=\"medium\"></Box>\n                <Text textAlign=\"center\">\n                    Herzlich Glückwunsch Sie haben das Ticketsystem erfolgreich konfiguriert!\n                    Mit \"Zurück\" gelangen Sie wieder zur ersten Ansicht und können erneut durch die Konfiguration navigieren.\n                    Mit \"Initalisierung abschließen\" können Sie zur Login-Seite zurück.\n                </Text>\n            </Box>\n        }\n        Ansicht[1] =\n            <Box>\n                <List\n                    primaryKey=\"initializeStep\"\n                    secondaryKey=\"doneSteps\"\n                    data={[\n                        { initializeStep: <Text size=\"large\" weight=\"bold\" key=\"header\">Vorbereitsungsschritt</Text>, doneSteps: <Text size=\"large\" weight=\"bold\" key=\"headerZustand\">Zustand</Text> },\n                        { initializeStep: <Text weight=\"normal\" key=\"StatusDB\"> Initalisieren der Datenbank</Text>, doneSteps: this.getConfigured(\"DB\") },\n                        { initializeStep: <Text weight=\"normal\" key=\"StatusAdminAccount\" >Hinzufügen eines Administratorbenutzers</Text>, doneSteps: this.getConfigured(\"AA\") },\n                        { initializeStep: <Text weight=\"normal\" key=\"StatusMS\">Initialisieren des Mailservers</Text>, doneSteps: this.getConfigured(\"MS\") },\n                        { initializeStep: <Text weight=\"normal\" key=\"StatusAdminWallet\">Einrichten des Master-Wallets</Text>, doneSteps: this.getConfigured(\"AW\") },\n                        { initializeStep: <Text weight=\"normal\" key=\"StatusSmartContract\">Veröffentlichen des Smart Contracts</Text>, doneSteps: this.getConfigured(\"DC\") },\n                        { initializeStep: <Text weight=\"normal\" key=\"StatusShopConfig\">Anzahl der Plätze, Tickets und VIP-Plätze festlegen</Text>, doneSteps: this.getConfigured(\"SC\") },\n                    ]}\n                />\n            </Box>\n        return Ansicht;\n    }\n}\n\nclass AddWallet extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            httpProvider: \"\",\n            created: false,\n            deploymentPrice: \"\",\n        };\n        this.configureTheAdminWallet = this.configureTheAdminWallet.bind(this);\n    }\n\n    //Function to Send the HTTP-Request to gernerate a New Wallet \n    async configureTheAdminWallet() {\n        var response = await fetch(Config.BACKEND_BASE_URI + \"/setup/generateWallet\", {\n            method: 'POST', // *GET, POST, PUT, DELETE, etc.\n            mode: 'cors', // no-cors, *cors, same-origin\n            cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                http_provider: this.state.httpProvider,\n            })\n\n        }).catch(console.log)\n\n        if (!response.ok) {\n            const rückgabe = await response.json().catch(console.log);\n            alert(rückgabe.message);\n        }\n\n        if (response.ok) {\n            console.log(response)\n            var data = await response.json().catch(console.log)\n            this.props.setWalletAddress(data.wallet_address);\n            this.props.changeValueOfStatusMap(\"AW\");\n            this.props.changeValueOfGasprices(\"deployContract\", data.price_deployment)\n            this.setState({ deploymentPrice: data.price_deployment })\n            this.setState({ created: true });\n            this.props.setHttpProvider(this.state.httpProvider)\n        }\n    }\n\n    render() {\n        var Ansicht = [];\n        //View if the Admin Wallet isnt created yet.\n        if (!this.state.created) {\n            Ansicht = <Box>\n                <Box pad=\"medium\"></Box>\n                <Text weight=\"bold\" size=\"xxlarge\" align=\"center\">Hinzufügen des Wallets für den Master-User</Text>\n                <Box pad=\"medium\"></Box>\n                <Box pad=\"medium\">\n                    <TextInput\n                        placeholder=\"HTTP-Provider DNS:Port\"\n                        value={this.state.httpProvider}\n                        onChange={(event) => { this.setState({ httpProvider: event.target.value }) }}\n                    />\n                </Box>\n                <Button onClick={this.configureTheAdminWallet} label=\"Hinzufügen\"></Button>\n            </Box>\n        }\n        //View if the Admin Wallet ist created\n        if (this.state.created) {\n            Ansicht = <Box>\n                <Box pad=\"medium\">\n                    <Text size=\"large\" weight=\"bold\">Hinzufügen des Wallets für den Master-User:</Text>\n                </Box>\n                <Box pad=\"medium\">\n                    <Text>Die Einrichtung wurde Erfolgreich abgeschlossen. Für die Veröffentlichung des Smart Contracts wird</Text>\n                    <Box pad=\"medium\"></Box>\n                    <Text weight=\"bold\" size=\"xxlarge\" align=\"center\">Ethereum: {this.state.deploymentPrice}</Text><Text>benötigt.</Text>\n                    <Box pad=\"medium\"></Box>\n                    <Text>Im nächsten Schritt wird zusätzlich noch eine geringe Menge Ethereum für die Erstellung eines Testtickets benötigt.</Text>\n                    <Text>Laden Sie daher etwas mehr Ethereum in das Wallet!</Text>\n                </Box>\n                <Button label=\"Guthaben aufgeladen\" onClick={this.props.changeStep}></Button>\n            </Box>\n        }\n        return Ansicht;\n    }\n}\n\nclass DeploySmartContract extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            walletBalance: \"\",\n            deployed: false\n        };\n        this.getBalanceFromWallet = this.getBalanceFromWallet.bind(this);\n        this.checkBalancesAndExecute = this.checkBalancesAndExecute.bind(this);\n    }\n    \n    componentDidMount(){\n        this.getBalanceFromWallet();\n    }\n\n    // Get Balance From Adrress and calculate Wei -> Ether from Response this.props.walletAddress\n    async getBalanceFromWallet() {\n        if (this.props.httpProvider !== \"\" || this.props.walletAddress !== \"\") {\n            var Web3 = require('web3');\n            var web3 = new Web3(new Web3.providers.HttpProvider(this.props.httpProvider));\n            console.log(Web3)\n            web3.eth.getBalance(this.props.walletAddress, (error, response) => {\n                console.log(response)\n                if (error) {\n                    console.log(error);\n                    return;\n                }\n                if (!response) {\n                    console.log(\"Fehler beim Abruf der Balance des Wallets\");\n                    alert(response.message);\n                    return\n                }\n\n                if (response) {\n\n                    var balance = web3.utils.fromWei(response, \"ether\")\n                    console.log(balance);\n                    this.setState({ walletBalance: balance });\n                }\n            });\n        } else {\n            alert(\"Fehler beim Abruf des Guthabens mit den Daten: \")\n        }\n    }\n\n    //Function to Compare the Amount of Ether from the Wallet and the needed Ether to deploy the Contract -> If Enough Call the Deployment Function\n    checkBalancesAndExecute() {\n        this.getBalanceFromWallet();\n        console.log(this.state.walletBalance);\n        console.log(this.props.getValueOfGasPrices(\"deployContract\"))\n        if (this.state.walletBalance > this.props.getValueOfGasPrices(\"deployContract\")) {\n            this.deploySmartContract();\n            console.log(\"Deployment Done\")\n        }\n        else if (this.state.walletBalance < this.props.getValueOfGasPrices(\"deployContract\")) {\n            alert(\"Bitte zuerst das Wallet aufladen!\")\n        }\n        else {\n            alert(\"Ein unbestimmter Fehler ist aufgetreten! Das Deployment konnte nicht durchgeführt werden!\")\n        }\n    }\n\n    //Function to publish Contract on Blockchain and get Prices \n    async deploySmartContract() {\n        var response = await fetch(Config.BACKEND_BASE_URI + \"/setup/deployContract\", {\n            method: 'POST', // *GET, POST, PUT, DELETE, etc.\n            mode: 'cors', // no-cors, *cors, same-origin\n            cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n            headers: {\n                'Content-Type': 'application/json'\n            }\n        }).catch(console.log)\n\n        if (!response.ok) {\n            console.log(\"Fehler im Deployment\")\n            const rückgabe = await response.json().catch(console.log);\n            alert(rückgabe.message);\n            console.log(rückgabe.message)\n        }\n\n        if (response.ok) {\n            var data = await response.json();\n            this.props.changeValueOfGasprices(\"createTicket\", data.create_ticket_price);\n            this.props.changeValueOfGasprices(\"relinquishPlace\", data.relinquish_place_price);\n            this.props.changeValueOfStatusMap(\"DC\");\n            this.setState({ deployed: true })\n            this.getBalanceFromWallet();\n        }\n    }\n\n    render() {\n        var Ansicht = [];\n        if (!this.state.deployed) {\n            Ansicht = <Box>\n                <Box pad=\"medium\"></Box>\n                <Text weight=\"bold\" size=\"xxlarge\" align=\"center\">Veröffentlichen des Smart Contracts</Text>\n                <Box pad=\"medium\"></Box>\n                <Text weight=\"bold\" size=\"large\">Wallet-Daten</Text>\n                <Text>Die Wallet-Adresse ist: {this.props.walletAddress}</Text>\n                <Text> Das Guthaben des Wallets beträgt: {this.state.walletBalance}</Text>\n                <Box pad=\"medium\"></Box>\n                <Text size=\"large\" weight=\"bold\">Smart Contract auf der Blockchain veröffentlichen:</Text>\n                <Box pad=\"medium\"></Box>\n                <Button onClick={this.checkBalancesAndExecute} label=\"Hinzufügen\"></Button>\n            </Box>\n        }\n\n        if (this.state.deployed) {\n            Ansicht = <Box>\n                <Text>Der Contract wurde erfolgreich deployed.</Text>\n                <Box pad=\"medium\"></Box>\n                <Text> Das Guthaben des Wallets beträgt: {this.state.walletBalance}</Text>\n                <Text> Der Preis für die Erstellung eines Tickets beträgt: {this.props.getValueOfGasPrices(\"createTicket\")}</Text>\n                <Text> Der Preis für die Übertragung eines Tickets beträgt: {this.props.getValueOfGasPrices(\"relinquishPlace\")}</Text>\n                <Button onClick={this.props.changeStep} label=\"Weiter\"></Button>\n            </Box>\n        }\n        return Ansicht;\n    }\n};\n\nclass ConfigureAdminAccount extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = { email: \"\", password: \"\" };\n        this.configureTheAdminAcc = this.configureTheAdminAcc.bind(this);\n    }\n\n    //Function to Confiugre Admin Account in Database \n    async configureTheAdminAcc() {\n        var response = await fetch(Config.BACKEND_BASE_URI + \"/setup/adminUser\", {\n            method: 'POST', // *GET, POST, PUT, DELETE, etc.\n            mode: 'cors', // no-cors, *cors, same-origin\n            cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                email: this.state.email,\n                password: this.state.password,\n            })\n        }).catch(console.log)\n\n        if (!response.ok) {\n            const rückgabe = await response.json().catch(console.log);\n            if (!response.ok) {\n                alert(rückgabe.message)\n            }\n        }\n\n        if (response.ok) {\n            this.props.changeValueOfStatusMap(\"AA\");\n            this.props.changeStep();\n        }\n    }\n\n    render() {\n        var Ansicht = [];\n        Ansicht = <Box>\n            <Box pad=\"medium\"></Box>\n            <Text weight=\"bold\" size=\"xxlarge\" align=\"center\">Hinzufügen des Administratorbenutzers</Text>\n            <Box pad=\"medium\"></Box>\n            <Box pad=\"medium\">\n                <Text weight=\"bold\">E-Mail-Adresse</Text>\n                <TextInput\n                    placeholder=\"E-Mail\"\n                    value={this.state.email}\n                    onChange={(event) => { this.setState({ email: event.target.value }) }}\n                />\n            </Box>\n            <Box pad=\"medium\">\n                <Text weight=\"bold\">Passwort:</Text>\n                <TextInput\n                    placeholder=\"Passwort\"\n                    value={this.state.password}\n                    onChange={(event) => { this.setState({ password: event.target.value }) }}\n                />\n            </Box>\n            <Button onClick={this.configureTheAdminAcc} label=\"Hinzufügen\"></Button>\n        </Box>\n        return Ansicht;\n    }\n}\n\nclass ConfigureDatabase extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = { host: \"\", user: \"\", password: \"\", db: \"\", port: \"\" };\n        this.configureTheDatabase = this.configureTheDatabase.bind(this);\n    }\n\n    //Function to send HTTP-Request to Configure Database\n    async configureTheDatabase() {\n        var response = await fetch(Config.BACKEND_BASE_URI + \"/setup/database\", {\n            method: 'POST', // *GET, POST, PUT, DELETE, etc.\n            mode: 'cors', // no-cors, *cors, same-origin\n            cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                host: this.state.host,\n                user: this.state.user,\n                password: this.state.password,\n                database: this.state.db,\n                port: this.state.port,\n            })\n        }).catch(console.log)\n        if (!response.ok) {\n            const rückgabe = await response.json().catch(console.log);\n            alert(rückgabe.message)\n        }\n        if (response.ok) {\n            this.props.changeValueOfStatusMap(\"DB\");\n            this.props.changeStep();\n        }\n    }\n\n    render() {\n        var Ansicht = [];\n        Ansicht = <Box>\n            <Box pad=\"medium\"></Box>\n            <Text weight=\"bold\" size=\"xxlarge\" align=\"center\">Konfigurieren der Datenbank</Text>\n            <Box pad=\"medium\"></Box>\n            <Box pad=\"medium\">\n                <Text weight=\"bold\">Datenbank-Host:</Text>\n                <TextInput\n                    placeholder=\"Hier bitte den Datenbank-Host eingeben\"\n                    value={this.state.host}\n                    onChange={(event) => { this.setState({ host: event.target.value }) }}\n                />\n            </Box>\n            <Box pad=\"medium\">\n                <Text weight=\"bold\">Port:</Text>\n                <TextInput\n                    placeholder=\"Hier bitte den Port eingeben\"\n                    value={this.state.port}\n                    onChange={(event) => { this.setState({ port: event.target.value }) }}\n                />\n            </Box>\n            <Box pad=\"small\">\n                <Text weight=\"bold\">Benutzer:</Text>\n                <TextInput\n                    placeholder=\"Hier bitte den Benutzer eingeben\"\n                    value={this.state.user}\n                    onChange={(event) => { this.setState({ user: event.target.value }) }}\n                />\n            </Box>\n            <Box pad=\"small\">\n                <Text weight=\"bold\">Passwort:</Text>\n                <TextInput\n                    placeholder=\"Hier bitte das Passwort eingeben\"\n                    value={this.state.password}\n                    onChange={(event) => { this.setState({ password: event.target.value }) }}\n                />\n            </Box>\n            <Box pad=\"small\">\n                <Text weight=\"bold\"> Datenbank:</Text>\n                <TextInput\n                    placeholder=\"Hier bitte die Datenbank eingeben\"\n                    value={this.state.db}\n                    onChange={(event) => { this.setState({ db: event.target.value }) }}\n                />\n            </Box>\n            <Box pad=\"medium\">\n                <Button onClick={this.configureTheDatabase} label=\"Abschließen\"></Button>\n            </Box>\n        </Box>\n        return Ansicht;\n    }\n}\n\nclass ConfigureMailserver extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = { host: \"\", port: \"\", conncetion: 'true', user: \"\", password: \"\", standardMail: \"\", standardPrefix: \"\" };\n        this.configureTheMailserver = this.configureTheMailserver.bind(this);\n    }\n\n    //Function for HTTP-Request to Configure Mail Server\n    async configureTheMailserver() {\n        var response = await fetch(Config.BACKEND_BASE_URI + \"/setup/mailserver\", {\n            method: 'POST', // *GET, POST, PUT, DELETE, etc.\n            mode: 'cors', // no-cors, *cors, same-origin\n            cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n            headers: {\n                'Content-Type': 'application/json'\n            },\n\n            body: JSON.stringify({\n                host: this.state.host,\n                port: this.state.port,\n                secure: this.state.conncetion,\n                user: this.state.user,\n                password: this.state.password,\n                default_from: this.state.standardMail,\n                default_subject_prefix: this.state.standardPrefix,\n            })\n        }).catch(console.log)\n\n        if (!response.ok) {\n            const rückgabe = await response.json().catch(console.log);\n            if (!response.ok) {\n                alert(rückgabe.message)\n            }\n        }\n\n        if (response.ok) {\n            this.props.changeValueOfStatusMap(\"MS\");\n            this.props.changeStep();\n        }\n    }\n\n    render() {\n        var Ansicht = [];\n        Ansicht = <Box>\n            <Box pad=\"medium\"></Box>\n            <Text weight=\"bold\" size=\"xxlarge\" align=\"center\">Konfigurieren des Mailservers</Text>\n            <Box pad=\"medium\"></Box>\n            <Box pad=\"small\">\n                <Text weight=\"bold\">Mailserver-Host:</Text>\n                <TextInput\n                    placeholder=\"Hier bitte den Mailserver-Host eingeben\"\n                    value={this.state.textInput}\n                    onChange={(event) => { this.setState({ host: event.target.value }) }}\n                />\n            </Box>\n            <Box pad=\"small\">\n                <Text weight=\"bold\"> Port:</Text>\n                <TextInput\n                    placeholder=\"Hier bitte den Port eingeben\"\n                    value={this.state.port}\n                    onChange={(event) => { this.setState({ port: event.target.value }) }}\n                />\n            </Box>\n            <Box pad=\"small\">\n                <Text weight=\"bold\">Sichere Verbindung:</Text>\n                <Select\n                    options={['true', 'false']}\n                    value={this.state.conncetion}\n                    onChange={({ value, option }) => { this.setState({ conncetion: option }) }}\n                />\n            </Box>\n            <Box pad=\"small\">\n                <Text weight=\"bold\"> Benutzer:</Text>\n                <TextInput\n                    placeholder=\"Hier bitte den Benutzer eingeben\"\n                    value={this.state.user}\n                    onChange={(event) => { this.setState({ user: event.target.value }) }}\n                />\n            </Box>\n\n            <Box pad=\"small\">\n                <Text weight=\"bold\">Passwort: </Text>\n                <TextInput\n                    placeholder=\"Hier bitte das Passwort eingeben\"\n                    value={this.state.password}\n                    onChange={(event) => { this.setState({ password: event.target.value }) }}\n                />\n            </Box>\n            <Box pad=\"small\">\n                <Text weight=\"bold\">Standard Mail:</Text>\n                <TextInput\n                    placeholder=\"Hier bitte die Standard Mail eingeben\"\n                    value={this.state.standardMail}\n                    onChange={(event) => { this.setState({ standardMail: event.target.value }) }}\n                />\n            </Box>\n            <Box pad=\"small\">\n                <Text weight=\"bold\">Standard Subject Prefix:</Text>\n                <TextInput\n                    placeholder=\"Hier bitte den Standard Prefix eingeben\"\n                    value={this.state.standardPrefix}\n                    onChange={(event) => { this.setState({ standardPrefix: event.target.value }) }}\n                />\n            </Box>\n            <Box pad=\"small\">\n                <Button onClick={this.configureTheMailserver} label=\"Abschließen\"></Button>\n            </Box>\n        </Box>\n        return Ansicht;\n    }\n}\n\nclass ConfigureShopConfig extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            maxPersonenProEvent: \"\",\n            maxTicketProEvent: \"\",\n            maxVIPPersonen: \"\"\n        };\n\n        this.configureTheShopConfig = this.configureTheShopConfig.bind(this);\n    }\n\n    //Function for HTTP-Request to set Shop Configuration\n    async configureTheShopConfig() {\n        var response = await fetch(Config.BACKEND_BASE_URI + \"/setup/shopConfig\", {\n            method: 'POST', // *GET, POST, PUT, DELETE, etc.\n            mode: 'cors', // no-cors, *cors, same-origin\n            cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n            headers: {\n                'Content-Type': 'application/json'\n            },\n\n            body: JSON.stringify({\n                max_Person_pro_Event: this.state.maxPersonenProEvent,\n                max_Tickets_pro_Event: this.state.maxTicketProEvent,\n                max_VIP_Person: this.state.maxVIPPersonen\n            })\n        }).catch(console.log)\n\n        if (!response.ok) {\n            const rückgabe = await response.json().catch(console.log);\n            if (!response.ok) {\n                alert(rückgabe.message)\n            }\n        }\n\n        if (response.ok) {\n            this.props.setShopConfiguration(this.state.maxPersonenProEvent, this.state.maxTicketProEvent, this.state.maxVIPPersonen);\n            this.props.changeStep();\n        }\n    }\n\n    render() {\n        var Ansicht = []\n        Ansicht[0] = <Box>\n            <Box pad=\"medium\"></Box>\n            <Text weight=\"bold\" size=\"xxlarge\">Konfigurieren der Shop Grundeinstellungen:</Text>\n            <Box pad=\"medium\"></Box>\n            <Box pad=\"small\">\n                <Text weight=\"bold\">Maximale Personen pro Event:</Text>\n                <TextInput\n                    placeholder=\"Max Personen pro Event\"\n                    value={this.state.maxPersonenProEvent}\n                    onChange={(event) => { this.setState({ maxPersonenProEvent: event.target.value }) }}\n                />\n            </Box>\n            <Box pad=\"small\">\n                <Text weight=\"bold\">Maximale Anzahl an Tickets pro Event:</Text>\n                <TextInput\n                    placeholder=\"Max Tickets pro Event\"\n                    value={this.state.maxTicketProEvent}\n                    onChange={(event) => { this.setState({ maxTicketProEvent: event.target.value }) }}\n                />\n            </Box>\n            <Box pad=\"small\">\n                <Text weight=\"bold\">Maximale Anzahl der VIP-Personen pro Event:</Text>\n                <TextInput\n                    placeholder=\"Max VIP-Personen pro Event\"\n                    value={this.state.maxVIPPersonen}\n                    onChange={(event) => { this.setState({ maxVIPPersonen: event.target.value }) }}\n                />\n            </Box>\n            <Box pad=\"small\">\n                <Button onClick={this.configureTheShopConfig} label=\"Hinzufügen\"></Button>\n            </Box>\n        </Box>\n\n\n        return Ansicht;\n    }\n\n}\n\nclass SystemSetup extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.changeStep = this.changeStep.bind(this);\n        this.changeValueOfStatusMap = this.changeValueOfStatusMap.bind(this);\n        this.setWalletAddress = this.setWalletAddress.bind(this);\n        this.changeValueOfGasprices = this.changeValueOfGasprices.bind(this);\n        this.getValueOfGasPrices = this.getValueOfGasPrices.bind(this);\n        this.setShopConfiguration = this.setShopConfiguration.bind(this);\n        this.goToStep = this.goToStep.bind(this);\n        this.state = {\n            initializeStep: 0,\n            doneOnce: false,\n            statusMap: new Map([[\"AW\", false], [\"DB\", false], [\"MS\", false], [\"AL\", false], [\"AA\", false], [\"DC\", false], [\"SC\", false]]),\n            gasPrices: new Map([[\"deployContract\", \"\"], [\"createTicket\", \"\"], [\"relinquishPlace\", \"\"]]),\n            shopConfig: new Map([[\"MaxPersonProEvent\", \"\"], [\"MaxTicketProEvent\", \"\"], [\"MaxVIPPersonen\", \"\"]]),\n            walletAddress: \"\",\n            httpProvider: \"\",\n        };\n    }\n\n    //Function to Set GasPrices in gasPriceMap\n    changeValueOfGasprices(key, price) {\n        this.setState(this.state.gasPrices.set(key, price));\n    }\n\n    getValueOfGasPrices(key) {\n        var price = this.state.gasPrices.get(key);\n        return price;\n    }\n\n    //Function to change Value of StatusMap \n    changeValueOfStatusMap(key) {\n        this.setState(this.state.statusMap.set(key, true));\n    }\n\n    //Function to set WalletAddress as State\n    setWalletAddress(address) {\n        this.setState({ walletAddress: address });\n    }\n\n    //FUnction to set HTTP-Provider as State\n    setHttpProvider(httpProvider) {\n        this.setState({ httpProvider: httpProvider });\n    }\n\n    //Function to set Shop-Configuration Values into Map\n    setShopConfiguration(maxPersonenProEvent, maxTicketProEvent, maxVIPPersonen) {\n        let values = this.state.shopConfig\n        values = new Map([[\"MaxPersonProEvent\", maxPersonenProEvent], [\"MaxTicketProEvent\", maxTicketProEvent], [\"MaxVIPPersonen\", maxVIPPersonen]])\n        this.setState({ shopConfig: values })\n    }\n\n    // Function to Change the Value of the state of Configuration\n    changeStep() {\n        var value;\n        var doneOnceBooolean;\n\n        // Set Initialize Step to 0 to Start a new Process flow\n        if (this.state.initializeStep > 6) {\n            value = 0;\n            this.setState({\n                initializeStep: value,\n            });\n        }\n        // Finished all Configuration once - Set Boolean to true and switch to last View\n        if (this.state.initializeStep === 6) {\n            value = 1 + this.state.initializeStep;\n            doneOnceBooolean = true;\n\n            this.setState({\n                initializeStep: value,\n                doneOnce: doneOnceBooolean\n            });\n        }\n        // Normal Process Flow - Add 1 to Initialize Step \n        if (this.state.initializeStep < 7) {\n            value = 1 + this.state.initializeStep;\n            this.setState({\n                initializeStep: value,\n            });\n        }\n    }\n\n    finishSystemSetup() {\n        window.location.assign(\"#/login\")\n    }\n\n    goToStep(value) {\n        this.setState({ initializeStep: value })\n    }\n\n    render() {\n        return (\n            <Box className=\"SystemSetup\" direction=\"column\" gap=\"medium\" pad=\"medium\" align=\"center\">\n                {this.state.initializeStep === 0 && <Hauptansicht goToStep={this.goToStep.bind(this)} doneOnce={this.state.doneOnce} statusMap={this.state.statusMap} initializeStep={this.state.initializeStep}></Hauptansicht>}\n\n                {this.state.initializeStep === 1 && <ConfigureDatabase changeValueOfStatusMap={this.changeValueOfStatusMap.bind(this)}\n                    changeStep={this.changeStep.bind(this)}></ConfigureDatabase>}\n\n                {this.state.initializeStep === 2 && <ConfigureAdminAccount changeValueOfStatusMap={this.changeValueOfStatusMap.bind(this)}\n                    changeStep={this.changeStep.bind(this)}></ConfigureAdminAccount>}\n\n                {this.state.initializeStep === 3 && <ConfigureMailserver changeValueOfStatusMap={this.changeValueOfStatusMap.bind(this)}\n                    changeStep={this.changeStep.bind(this)}></ConfigureMailserver>}\n\n                {this.state.initializeStep === 4 && <AddWallet setWalletAddress={this.setWalletAddress.bind(this)} changeValueOfStatusMap={this.changeValueOfStatusMap.bind(this)}\n                    changeStep={this.changeStep.bind(this)} changeValueOfGasprices={this.changeValueOfGasprices.bind(this)} getValueOfGasPrices={this.getValueOfGasPrices.bind(this)} setHttpProvider={this.setHttpProvider.bind(this)}></AddWallet>}\n\n                {this.state.initializeStep === 5 && <DeploySmartContract httpProvider={this.state.httpProvider} walletAddress={this.state.walletAddress} changeValueOfStatusMap={this.changeValueOfStatusMap.bind(this)}\n                    changeStep={this.changeStep.bind(this)} getValueOfGasPrices={this.getValueOfGasPrices.bind(this)} changeValueOfGasprices={this.changeValueOfGasprices.bind(this)}></DeploySmartContract>}\n\n                {this.state.initializeStep === 6 && <ConfigureShopConfig setShopConfiguration={this.setShopConfiguration.bind(this)} changeStep={this.changeStep.bind(this)}></ConfigureShopConfig>}\n                {this.state.initializeStep === 7 && <Hauptansicht goToStep={this.goToStep.bind(this)} doneOnce={this.state.doneOnce} statusMap={this.state.statusMap} initializeStep={this.state.initializeStep}\n                    changeStep={this.changeStep.bind(this)}></Hauptansicht>}\n\n                {this.state.initializeStep === 0 && this.state.doneOnce === false && <Button onClick={this.changeStep} label=\"Konfiguration beginnen\"></Button>}\n                {this.state.initializeStep === 0 && this.state.doneOnce === true && <Button onClick={this.changeStep} label=\"Erneuter Durchlauf\"></Button>}\n                {this.state.initializeStep !== 7 && this.state.initializeStep !== 0 && this.state.initializeStep < 7 && <Button onClick={this.changeStep} label=\"Schritt überspringen\"></Button>}\n                {this.state.initializeStep === 7 && <Box pad=\"medium\"> <Button label=\"Zurück\" onClick={this.changeStep}></Button></Box>}\n                {this.state.doneOnce === true && (this.state.initializeStep === 0 || this.state.initializeStep === 7) && <Button label=\"Initialisierung abschließen\" onClick={this.finishSystemSetup}></Button>}\n            </Box>\n        );\n    }\n}\n\nexport default SystemSetup;\n","import React from 'react';\nimport './UserMainMenu.css';\nimport { Box } from 'grommet';\nimport { Link } from \"react-router-dom\";\n\nclass UserMainMenu extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = { };\n    }\n\n    render() {\n        return (\n            <Box className=\"UserMainMenu\" direction=\"row\" pad=\"medium\" wrap={true}>\n                <Link className=\"MenuLink\" to=\"/guest/tickets\">Tickets Anzeigen</Link>\n                <Link className=\"MenuLink\" to=\"/guest/buy\">Tickets Buchen</Link>\n                <Link className=\"MenuLink\" to=\"/guest/bookings\">Buchungen Anzeigen</Link>\n            </Box>\n        );\n    }\n}\n\nexport default UserMainMenu;\n","import React from 'react';\nimport './TicketOverview.css';\nimport { Box, Button, Text } from 'grommet';\nimport { Switch, Route, Link } from \"react-router-dom\";\nimport QRCode from 'qrcode';\nimport Config from '../../config';\n\nimport UserContext from '../../AppContexts/UserContext';\n\nclass SingleTicketViewer extends React.Component {\n\n    static contextType = UserContext;\n\n    constructor(props) {\n        super(props);\n        this.state = {};\n        this.identifier = window.location.hash.replace(\"#/guest/tickets/\", \"\");\n        this.ticket = { forename: null, surename: null, ticketType: null };\n        let tempTicket = this.props.tickets.find(ticket => ticket.identifier === this.identifier);\n        if (tempTicket) {\n            this.ticket = tempTicket;\n        }\n    }\n\n    componentDidMount() {\n        this.generateQRCode(this.ticket);\n    }\n\n    async generateQRCode(ticket) {\n        // Generate code\n        let data = { id: ticket.identifier, sIG: this.context.user.secretIngredient };\n        QRCode.toDataURL(JSON.stringify(data)).then((url) => {\n            this.setState({ qrcode: url });\n        }).catch(console.log);\n    }\n\n    render() {\n        return (\n            <Box className=\"SingleTicket\">\n                <Box pad=\"small\">\n                    <p>{this.ticket.forename}</p>\n                    <p>{this.ticket.surname}</p>\n                    <p>{this.ticket.ticketType}</p>\n                </Box>\n                <Box pad=\"small\">\n                    <img width=\"300\" height=\"300\" src={this.state.qrcode} alt=\"Hier sollte ein QR-Code stehen\"></img>\n                    <Button onClick={window.print} label=\"Drucken\"></Button>\n                </Box>\n            </Box>\n        );\n    }\n}\n\nfunction TicketListItem(props) {\n    return (\n        <Box className=\"TicketListItem\" direction=\"row\" gap=\"small\" pad=\"small\">\n            <Text className=\"Name\">{props.ticket.forename} {props.ticket.surname}</Text>\n            <Text className=\"Type\">{props.ticket.ticketType}</Text>\n            <Button label=\"Anzeigen\" onClick={() => { window.location.assign('#/guest/tickets/' + props.ticket.identifier); }}></Button>\n        </Box>\n    );\n}\n\nclass TicketOverview extends React.Component {\n\n    static contextType = UserContext;\n\n    constructor(props) {\n        super(props);\n        this.state = { tickets: [], loading: false }\n    }\n\n    componentDidMount() {\n        this.fetchTickets();\n    }\n\n    async fetchTickets() {\n        this.setState({ loading: true });\n        var response = await fetch(Config.BACKEND_BASE_URI + \"/api/v2/users/\" + this.context.user.id + \"/tickets\", {\n            //method: 'GET', // *GET, POST, PUT, DELETE, etc.\n            mode: 'cors', // no-cors, *cors, same-origin\n            cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': 'Bearer ' + this.context.token,\n            }\n        }).catch(console.log);\n\n        if (!response.ok) {\n            this.setState({ loading: false });\n            alert('Beim Laden der Tickets ist ein Fehler aufgetreten.');\n            return;\n        }\n\n        var tickets = await response.json().catch(console.log);\n\n        if (!tickets) return;\n\n        tickets.forEach((ticket) => {\n            switch (ticket.ticketType) {\n                case \"0\": ticket.ticketType = \"Absolvent\"; break;\n                case \"1\": ticket.ticketType = \"Begleitperson\"; break;\n                case \"2\": ticket.ticketType = \"Parkticket\"; break;\n                default: break;\n            }\n        });\n\n        this.setState({ tickets: tickets, loading: false });\n    }\n\n    setToken(Token) {\n        localStorage.setItem('Tokenwert', Token);\n    }\n    getToken() {\n        var value = localStorage.getItem('Tokenwert');\n        console.log(value);\n    }\n\n    render() {\n        let ticketElements = this.state.tickets.map((ticket) => <TicketListItem key={ticket.identifier} ticket={ticket}></TicketListItem>);\n\n        return (\n            <Box className=\"TicketOverview\" direction=\"column\" gap=\"medium\" pad=\"medium\">\n                <Switch>\n                    <Route path=\"/guest/tickets/:identifier\">\n                        <Link to=\"/guest/tickets/\">Alle Tickets anzeigen</Link>\n                        <SingleTicketViewer tickets={this.state.tickets}></SingleTicketViewer>\n                    </Route>\n                    <Route path=\"/guest/tickets/\">\n                        <Box>\n                            <Box>\n                                <h1 className=\"NumberOfTickets\">{this.state.tickets.length}</h1>\n                            </Box>\n                            <Box className=\"TicketList\">\n                                {this.state.loading && <p className=\"loader\"></p>}\n                                {ticketElements}\n                            </Box>\n                        </Box>\n                    </Route>\n                </Switch>\n            </Box>\n        );\n    }\n}\n\nexport default TicketOverview;\n","import React from 'react';\nimport './TicketOverview.css';\nimport { Box, Text, Accordion, AccordionPanel } from 'grommet';\nimport Config from '../../config';\nimport UserContext from '../../AppContexts/UserContext';\n\nclass BuchungsItem extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {};\n    }\n\n    render() {\n        var ticketsForBooking = [];\n        this.props.tickets.forEach((ticket) => {\n            ticketsForBooking.push(\n                <Box key={ticket.identifier} pad=\"small\">\n                    <span>Ticket Identifier: {ticket.identifier}</span>\n                    <span>Nachname: {ticket.surname}</span>\n                    <span>Vorname: {ticket.forename}</span>\n                    <span>Ticket Typ: {ticket.ticketType}</span>\n                </Box>\n            )\n        });\n        var buchung = this.props.booking;\n        var accPanelLabel = \"Buchung \" + buchung.id + \", gebucht am \" + (new Date(buchung.createdAt).toLocaleDateString()) + \" - \" + (buchung.paidAt ? 'Bezahlt' : 'Zahlung ausstehend');\n        return (\n            <AccordionPanel label={accPanelLabel}>\n                {ticketsForBooking.length > 0 &&\n                    <Text margin=\"small\">Folgende Tickets wurden gebucht:</Text>\n                }\n                {ticketsForBooking.length > 0 && ticketsForBooking}\n                {ticketsForBooking.length === 0 && <Text margin=\"small\">Keine Daten vorhanden.</Text>}\n            </AccordionPanel >\n        )\n    }\n\n}\n\nclass BookingOverview extends React.Component {\n\n    static contextType = UserContext;\n\n    constructor(props) {\n        super(props);\n        this.loadListHandler = this.loadListHandler.bind(this);\n        this.loadTicketsHandler = this.loadTicketsHandler.bind(this);\n        this.translateTicketType = this.translateTicketType.bind(this);\n        this.state = { buchungen: [], tickets: [] };\n    }\n\n    componentDidMount() {\n        this.loadListHandler();\n    }\n\n    async loadListHandler() {\n        this.setState({ loading: true });\n        var response = await fetch(Config.BACKEND_BASE_URI + \"/api/v2/users/\" + this.context.user.id + \"/bookings\", {\n            method: 'GET', // *GET, POST, PUT, DELETE, etc.\n            mode: 'cors', // no-cors, *cors, same-origin\n            cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': 'Bearer ' + this.context.token\n            }\n        }).catch(console.log);\n\n        if (!response.ok) {\n            alert('Buchungen konnten nicht geladen werden.');\n            return;\n        }\n\n        var data = await response.json().catch(console.log)\n        if (!data) return;\n\n        this.setState({ buchungen: data, loading: false })\n    }\n\n    async loadTicketsHandler(indexOfBooking) {\n        if (indexOfBooking === undefined) return;\n\n        let bookingId = this.state.buchungen[indexOfBooking].id;\n        let ticketsLoaded = this.state.tickets.findIndex((ticket) => {\n            return ticket.bookingId === bookingId\n        })\n\n        if (ticketsLoaded !== -1) return;\n\n        var response = await fetch(Config.BACKEND_BASE_URI + \"/api/v2/bookings/\" + bookingId + \"/ticketsBooked\", {\n            method: 'GET', // *GET, POST, PUT, DELETE, etc.\n            mode: 'cors', // no-cors, *cors, same-origin\n            cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': 'Bearer ' + this.context.token\n            }\n        }).catch(console.log)\n\n        if (!response.ok) {\n            alert('Gebuchte Tickets konnten nicht geladen werden.');\n            return;\n        }\n\n        var data = await response.json().catch(console.log)\n\n        if (!data) return\n\n        var kopieTickets = this.state.tickets;\n        kopieTickets = kopieTickets.concat(data);\n\n        kopieTickets.forEach((ticket) => {\n            ticket.ticketType = this.translateTicketType(ticket.ticketType);  \n        })\n\n        this.setState({ tickets: kopieTickets });\n    }\n\n    translateTicketType(ticketType){\n        switch (ticketType) {\n            case 0: return \"Absolvent\";\n            case 1 : return \"Begleitperson\";\n            case 2 : return \"Parkticket\";\n            default: return \"Kein gültiger Tickettyp\"\n        }\n    }\n\n    render() {\n        var buchungen = [];\n        this.state.buchungen.forEach((buchung) => {\n            var filteredTickets = this.state.tickets.filter((ticket) => {\n                return ticket.bookingId === buchung.id\n            })\n            buchungen.push(<BuchungsItem key={buchung.id} booking={buchung} tickets={filteredTickets}></BuchungsItem>)\n        });\n\n        return (\n            <Box className=\"BookingOverview\" direction=\"column\" gap=\"medium\" pad=\"medium\">\n                <Box>\n                    {this.state.loading && <p className=\"loader\"></p>}\n                    {buchungen.length > 0 &&\n                        <Accordion onActive={(activeItems) => { this.loadTicketsHandler(activeItems[0]) }}>\n                            {buchungen}\n                        </Accordion>\n                    }\n                    {buchungen.length === 0 &&\n                        <Text>Keine Buchungen vorhanden</Text>\n                    }\n                </Box>\n            </Box>\n        );\n    }\n}\n\nexport default BookingOverview;\n","import React from 'react';\nimport { Box, Button, Text, TextInput, CheckBox, Heading } from 'grommet';\nimport Config from '../../config';\n\nimport UserContext from '../../AppContexts/UserContext';\n\nclass PersonInput extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.onInputHandler = this.onInputHandler.bind(this);\n        this.onCheckBox = this.onCheckBox.bind(this)\n        this.state = {\n            forename: \"\",\n            surname: \"\",\n            isWheelchairUser: false,\n        }\n    }\n\n    onInputHandler(event) {\n        const stateCopy = this.state;\n        stateCopy[event.target.name] = event.target.value;\n        this.setState(stateCopy);\n        this.props.onInput(this.state)\n    }\n\n    onCheckBox(event) {\n        const stateCopy = this.state;\n        stateCopy[event.target.name] = !stateCopy[event.target.name];\n        this.setState(stateCopy);\n        this.props.onInput(this.state)\n    }\n\n    render() {\n        return (\n            <Box>\n                <TextInput name=\"forename\" placeholder=\"Vorname des Gastes\" value={this.state.forename} onChange={this.onInputHandler}></TextInput>\n                <TextInput name=\"surname\" placeholder=\"Nachname des Gastes\" value={this.state.surname} onChange={this.onInputHandler}></TextInput>\n                <CheckBox name=\"isWheelchairUser\" label=\"Rollstuhlfahrer bitte ankreuzen\" onChange={this.onCheckBox} checked={this.state.isWheelchairUser} />\n            </Box>\n        );\n    }\n\n}\n\nclass TicketBestellung extends React.Component {\n\n    static contextType = UserContext;\n\n    constructor(props) {\n        super(props);\n        this.windowAbsolventTicket = this.windowAbsolventTicket.bind(this);\n        this.windowGuestTicket = this.windowGuestTicket.bind(this);\n        this.windowParkTicket = this.windowParkTicket.bind(this);\n        this.toOverview = this.toOverview.bind(this);\n        this.toPayment = this.toPayment.bind(this);\n        this.createTickets = this.createTickets.bind(this);\n        this.createBooking = this.createBooking.bind(this);\n        this.onInputHandler = this.onInputHandler.bind(this);\n        this.ShopConfig = this.ShopConfig.bind(this);\n        this.getPaymentOptions = this.getPaymentOptions.bind(this);\n        this.paymentCalculation = this.paymentCalculation.bind(this);\n\n\n        this.state = {\n            MaxAnzahlAbsolvententickets: 0,\n            MaxAnzahBesuchertickets: 0,\n            TicketPrice_Type0: 0,\n            TicketPrice_Type1: 0,\n            TicketPrice_Type2: 0,\n            PaymentBankActive: false,\n            PaymentBankReceiver: \"\",\n            PaymentBankName: \"\",\n            PaymentBankIban: \"\",\n            PaymentPayPalActive: false,\n            PaymentPayPalLink: \"\",\n            PaymentPayPalMail: \"\",\n            TotalInvoice: 0,\n            guestcount: 0,\n            parkcount: 0,\n            step: 0,\n            persons: [],\n            personInputFields: [],\n            graduate: {\n                forename: \"\",\n                surname: \"\",\n                isWheelchairUser: false\n            },\n            bookingResult: null\n        };\n\n\n    }\n\n    onInputHandler(event, type) {\n        if (type === \"forename\") {\n            this.setState({\n                graduate: {\n                    forename: event.target.value,\n                    surname: this.state.graduate.surname\n                }\n            })\n        } else {\n            this.setState({\n                graduate: {\n                    surname: event.target.value,\n                    forename: this.state.graduate.forename\n                }\n            })\n        }\n\n\n    }\n\n    componentDidMount() {\n        this.ShopConfig();\n        this.getPaymentOptions();\n    }\n    //Wechsel der Ansichtenfenster\n    windowAbsolventTicket() {\n        this.setState({ step: 0 })\n    }\n    windowGuestTicket() {\n        this.setState({ step: 1 })\n    }\n    windowParkTicket() {\n        this.setState({ step: 2 })\n    }\n    toOverview() {\n        this.setState({ step: 3 });\n        this.paymentCalculation();\n    }\n    toPayment() {\n        this.createBooking();\n        this.setState({ step: 4 })\n    }\n\n\n    //Funktion für die Counter und der Namen der Gäste\n    increment = (property) => {\n        if (property === \"guest\" && this.state.guestcount < this.state.MaxAnzahBesuchertickets) {\n\n            let personsIndex = this.state.persons.length;\n            let personInput = <PersonInput key={personsIndex} onInput={(personName) => { let personsList = this.state.persons; personsList[personsIndex] = personName; this.setState({ persons: personsList }) }}></PersonInput>\n            let personsList = this.state.persons;\n            personsList[personsIndex] = {};\n            this.state.personInputFields.push(personInput);\n            this.setState({ persons: personsList, personInputFields: this.state.personInputFields, guestcount: this.state.guestcount + 1 });\n\n        }\n        else if (property === \"park\" && this.state.parkcount < 1 + this.state.guestcount) {\n            this.setState({ parkcount: this.state.parkcount + 1 });\n        }\n    }\n    decrement = (property) => {\n        if (property === \"guest\" && this.state.guestcount > 0) {\n\n            this.state.personInputFields.pop();\n            this.state.persons.pop();\n\n            this.setState({ guestcount: this.state.guestcount - 1, personInputFields: this.state.personInputFields, persons: this.state.persons });\n        }\n        else if (property === \"park\" && this.state.parkcount > 0) {\n            this.setState({ parkcount: this.state.parkcount - 1 });\n        }\n    }\n\n\n\n    //Soll die zur Verfügung stehenden Zahlungsoptionen bereitstellen. Diese werden im BAckend aus der Config \"paymentOptions\" geholt\n    showPaymentOptions (PaymentBankActive){\n        if (PaymentBankActive === true){\n                this.state.PaymentBankName.print();\n                this.state.PaymentBankReceiver.print();\n                this.state.PaymentBankIban.print();\n        }\n    }\n\n    paymentCalculation (){\n        var gesamtBetrag = this.state.TicketPrice_Type0 + (this.state.guestcount * this.state.TicketPrice_Type1) + (this.state.parkcount * this.state.TicketPrice_Type2);\n        this.setState({ TotalInvoice: gesamtBetrag });\n     \n    }\n\n    //Abfragen Backend\n    async ShopConfig() {\n        var response = await fetch(Config.BACKEND_BASE_URI + '/api/v2/shopConfig', {\n            method: 'GET',\n            mose: 'cors',\n            cache: 'no-cache',\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': 'Bearer ' + this.context.token,\n            },\n        }).catch(console.log)\n        if (!response.ok) {\n            alert(response.message);\n        }\n        if (response.ok) {\n            var configData = await response.json();\n            this.setState({MaxAnzahlAbsolvententickets: configData.max_TicketType_0_pro_Absolvent});\n            this.setState({MaxAnzahBesuchertickets: configData.max_TicketType_1_pro_Absolvent});\n            this.setState({TicketPrice_Type0: parseInt(configData.price_TicketType_0)});\n            this.setState({TicketPrice_Type1: parseInt(configData.price_TicketType_1)});\n            this.setState({TicketPrice_Type2: parseInt(configData.price_TicketType_2)});\n            if (!configData.salesStatus) {\n                alert(\"Der Ticketverkauf ist derzeit nicht aktiv!\");\n                this.context.redirectUserToHome();\n            }\n        }\n    }\n\n    async getPaymentOptions() {\n        //Liest die Werte der Zahlungsverbindungen aus\n        var response = await fetch(Config.BACKEND_BASE_URI + \"/api/v2/paymentOptions\", {\n            method: 'GET', // *GET, POST, PUT, DELETE, etc.\n            mode: 'cors', // no-cors, *cors, same-origin\n            cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': 'Bearer ' + this.context.token,\n            },\n        }).catch(console.log)\n\n        if (response) {\n            var configData = await response.json().catch(console.log);\n            this.setState({PaymentBankActive: configData.Bank.Aktiviert});\n            this.setState({PaymentBankReceiver: configData.Bank.Empfänger});\n            this.setState({PaymentBankName: configData.Bank.Name_der_Bank});\n            this.setState({PaymentBankIban: configData.Bank.IBAN});\n            this.setState({PaymentPayPalActive: configData.PayPal.Aktiviert});\n            this.setState({PaymentPayPalLink: configData.PayPal.PayPal_Link});\n            this.setState({PaymentPayPalMail: configData.PayPal.PayPal_Verwendung})\n            return;\n        }    \n        //Error Handling noch machen\n    }\n\n\n\n\n\n\n    //Buchung erstellen\n    async createBooking() {\n        var response = await fetch(Config.BACKEND_BASE_URI + \"/api/v2/bookings\", {\n            method: 'POST', // *GET, POST, PUT, DELETE, etc.\n            mode: 'cors', // no-cors, *cors, same-origin\n            cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': 'Bearer ' + this.context.token\n            },\n            body: JSON.stringify({ userId: this.context.user.id })\n        }).catch(console.log);\n        // Error Handling für Benutzer\n        if (!response.ok) {\n            this.setState({ step: 100 });\n            return;\n        }\n\n\n        var result = await response.json().catch(console.log);\n        this.setState({ bookingResult: result });\n\n        if (!result) {\n            this.setState({ step: 100 });\n            return;\n        }\n\n        await this.createTickets();\n    }\n\n    async createTickets() {\n        let bookingResult = this.state.bookingResult.id;\n        for (let element of this.state.persons) {\n            var response = await fetch(Config.BACKEND_BASE_URI + \"/api/v2/ticketsBooked\", {\n                method: 'POST', // *GET, POST, PUT, DELETE, etc.\n                mode: 'cors', // no-cors, *cors, same-origin\n                cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': 'Bearer ' + this.context.token\n                },\n                body: JSON.stringify({\n                    bookingId: bookingResult,\n                    ticketType: 1,\n                    forename: element.forename,\n                    surname: element.surname,\n                    isWheelchairUser: element.isWheelchairUser,\n                })\n            }).catch(console.log);\n\n            // Error Handling für Benutzer\n            if (!response.ok) {\n                this.setState({ step: 100 });\n                return;\n            }\n            var result = await response.json().catch(console.log);\n            if (!result) {\n                this.setState({ step: 100 });\n                return;\n            }\n        }\n\n        //Ticket für Absolvent in DB schreiben\n        response = await fetch(Config.BACKEND_BASE_URI + \"/api/v2/ticketsBooked\", {\n            method: 'POST', // *GET, POST, PUT, DELETE, etc.\n            mode: 'cors', // no-cors, *cors, same-origin\n            cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': 'Bearer ' + this.context.token\n            },\n            body: JSON.stringify({\n                bookingId: bookingResult,\n                ticketType: 0,\n                forename: this.state.graduate.forename,\n                surname: this.state.graduate.surname,\n                isWheelchairUser: false,\n            })\n        }).catch(console.log);\n\n        // Error Handling für Benutzer\n        if (!response.ok) {\n            this.setState({ step: 100 });\n            return;\n        }\n\n        result = await response.json().catch(console.log);\n\n        if (!result) {\n            this.setState({ step: 100 });\n            return;\n        }\n\n        //Parkticket in DB schreiben\n        let anzahlparktick = this.state.parkcount;\n        for (var i = 0; i < anzahlparktick; i++) {\n            response = await fetch(Config.BACKEND_BASE_URI + \"/api/v2/ticketsBooked\", {\n                method: 'POST', // *GET, POST, PUT, DELETE, etc.\n                mode: 'cors', // no-cors, *cors, same-origin\n                cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': 'Bearer ' + this.context.token\n                },\n                body: JSON.stringify({\n                    bookingId: bookingResult,\n                    ticketType: 2,\n                    forename: this.state.graduate.forename + \" \" + i,\n                    surname: this.state.graduate.surname,\n                    isWheelchairUser: false,\n                })\n            }).catch(console.log);\n\n            // Error Handling für Benutzer\n            if (!response.ok) {\n                this.setState({ step: 100 });\n                return;\n            }\n            result = await response.json().catch(console.log);\n            if (!result) {\n                this.setState({ step: 100 });\n                return;\n            }\n        }\n\n    }\n\n\n    render() {\n        return (\n            <Box className=\"TicketBestellung\" direction=\"column\" gap=\"medium\" pad=\"medium\">\n\n                {this.state.step === 0 &&\n                    <Box gap=\"small\">\n                        <Heading>Angaben zu Ihnen</Heading>\n                        <Text>Bitte tragen Sie Ihren vollständigen Namen ein.</Text>\n                        <Text>Ticketpreis in EURO: {this.state.TicketPrice_Type0} €</Text>\n                        <TextInput name=\"forename\" placeholder=\"Vorname des Absolventen\" value={this.state.graduate.forename} onChange={(event) => this.onInputHandler(event, \"forename\")}></TextInput>\n                        <TextInput name=\"surname\" placeholder=\"Nachname des Absolventen\" value={this.state.graduate.surname} onChange={(event) => this.onInputHandler(event, \"surname\")}></TextInput>\n                        <CheckBox name=\"isWheelchairUser\" label=\"Rollstuhlfahrer bitte ankreuzen\" value={this.state.graduate.isWheelchairUser} onChange={this.onCheckBox} checked={this.state.isWheelchairUser} />\n                        <Button label=\"Weiter\" onClick={this.windowGuestTicket} gap=\"small\"></Button>\n                    </Box>\n                }\n\n                {this.state.step === 1 &&\n                    <Box gap=\"small\">\n                        <Heading>Angaben zu Begleitpersonen</Heading>\n                        <Text>Bitte geben Sie an, wie viele Begleitpersonen Sie mitnehmen wollen.</Text>\n                        <Text>Ticketpreis in EURO: {this.state.TicketPrice_Type1} €</Text>\n                        <Button onClick={() => this.increment(\"guest\")} className=\"guestcount\" label=\"+\"></Button>\n                        <Button onClick={() => this.decrement(\"guest\")} className=\"guestcount\" label=\"-\"></Button>\n                        <h2>Anzahl der Begleitpersonen: {this.state.guestcount}</h2>\n                        {this.state.personInputFields}\n                        <Button onClick={this.windowAbsolventTicket} label=\"Zurück\"></Button>\n                        <Button onClick={this.windowParkTicket} label=\"Weiter\"></Button>\n                    </Box>\n                }\n\n                {this.state.step === 2 &&\n                    <Box gap=\"small\">\n                        <Heading>Parktickets</Heading>\n                        <Text>Bitte geben Sie an, wie viele Parktickets Sie benötigen.</Text>\n                        <Text>Ticketpreis in EURO: {this.state.TicketPrice_Type2} €</Text>\n                        <Button onClick={() => this.increment(\"park\")} className=\"parkcount\" label=\"+\"></Button>\n                        <Button onClick={() => this.decrement(\"park\")} className=\"parkcount\" label=\"-\"></Button>\n                        <h2>Anzahl der Parktickets: {this.state.parkcount}</h2>\n                        <Button onClick={this.windowGuestTicket} label=\"Zurück\"></Button>\n                        <Button onClick={this.toOverview} label=\"Weiter\"></Button>\n                    </Box>\n                }\n\n                {this.state.step === 3 &&\n                    <Box gap=\"small\">\n                        <Text>Sie haben folgende Tickets bestellt: <br />\n                            Absolvent: 1 x  {this.state.TicketPrice_Type0} €<br />\n                            Begleitpersonen: {this.state.guestcount} x {this.state.TicketPrice_Type1} €<br />\n                            Parkticket: {this.state.parkcount} x {this.state.TicketPrice_Type2} €\n                        </Text>\n                        <Text>Summe: {this.state.TotalInvoice}</Text>\n                        <Button onClick={this.windowParkTicket} label=\"Zurück\"></Button>\n                        <Button onClick={this.toPayment} label=\"Zahlungspflichtig bestellen\"></Button>\n                    </Box>\n                }\n                {this.state.step === 4 &&\n                    <Box gap=\"small\">\n                        <Text>Die Buchung wurde erfolgreich übermittelt.<br />\n                            Bitte überweisen Sie folgenden Betrag auf das Konto: XXXXYYYYZZZZ.<br />\n                            {this.showPaymentOptions}\n                            Geben Sie ihren Namen als Verwendungszweck an.<br />\n                            Nach Rechnungseingang können Sie Ihre Tickets unter \"Tickets Anzeigen\" einsehen.<br />\n                        </Text>\n                        <Text>Sie haben folgende Tickets bestellt: <br />\n                            Absolvent: 1 <br />\n                            Begleitpersonen: {this.state.guestcount} <br />\n                            Parkticket: {this.state.parkcount}\n                        </Text>\n                    </Box>\n                }\n\n                {this.state.step === 100 &&\n                    <Box gap=\"small\">\n                        <Text>Es ist ein Fehler beim Bestellvorgang aufgetreten. Bitte versuche Sie es später erneut.</Text>\n                    </Box>\n                }\n\n            </Box>\n        );\n    }\n}\n\nexport default TicketBestellung;\n","import React from 'react';\n\nimport UserContext from '../AppContexts/UserContext';\n\nimport { Menu, Header, Box } from 'grommet';\nimport { Switch, Route, Link } from \"react-router-dom\";\nimport UserMainMenu from './Components/UserMainMenu';\nimport TicketOverview from './Components/TicketOverview';\nimport BookingOverview from './Components/BookingOverview';\nimport TicketBestellung from './Components/TicketBestellung';\n\nclass Ticketshop extends React.Component {\n\n    static contextType = UserContext;\n\n    constructor(props) {\n        super(props);\n        this.state = {};\n    }\n\n\n    // FOR LOGIN\n\n    componentDidMount() {\n        this.context.requireLogin(1);\n    }\n\n    componentDidUpdate() {\n        this.context.requireLogin(1);\n    }\n\n    // END: FOR LOGIN\n\n    render() {\n        return (\n            <Box className=\"Guest\">\n                <Header background=\"brand\" justify=\"between\" pad=\"10px\">\n                    <Link to=\"/guest\">Home</Link>\n                    <Menu label=\"Account\" items={[{ label: 'Logout', onClick: this.context.logout }]} />\n                </Header>\n                <Switch>\n                    <Route path=\"/guest/buy\">\n                        <TicketBestellung></TicketBestellung>\n                    </Route>\n                    <Route path=\"/guest/tickets/\">\n                        <TicketOverview></TicketOverview>\n                    </Route>\n                    <Route path=\"/guest/bookings\">\n                        <BookingOverview></BookingOverview>\n                    </Route>\n                    <Route path=\"/guest/\">\n                        <UserMainMenu></UserMainMenu>\n                    </Route>\n                </Switch>\n            </Box>\n        );\n    }\n}\n\nexport default Ticketshop;\n","import React from 'react';\nimport jsQR from 'jsqr';\nimport { Box, Button } from 'grommet';\n\nclass QRScanner extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {};\n    this.video = React.createRef();\n    this.canvasElement = React.createRef();\n    this.startScan = this.startScan.bind(this);\n    this.tick = this.tick.bind(this);\n  }\n\n  componentWillUnmount(){\n    this.stopScan();\n  }\n\n  tick() {\n    if (!this.video || !this.video.current) return;\n    if (this.video.current.readyState === this.video.current.HAVE_ENOUGH_DATA) {\n      this.canvasElement.current.height = 320;\n      this.canvasElement.current.width = 320;\n      this.canvas.drawImage(this.video.current, 0, 0, this.canvasElement.current.width, this.canvasElement.current.height);\n      let imageData = this.canvas.getImageData(0, 0, this.canvasElement.current.width, this.canvasElement.current.height);\n      let code = jsQR(imageData.data, imageData.width, imageData.height, { inversionAttempts: \"dontInvert\" });\n      if (code) {\n        // Selecting the right search pattern\n        // This should be defined via props: contentType\n        switch (this.props.contentType) {\n          case 'ETHEREUM_ADDRESS':\n            let match = code.data.match(/(?:ethereum:)(?<address>0x[A-Za-z\\d]*)/);\n            if (match && match.groups.address) {\n              this.stopScan();\n              this.props.onDone(match.groups.address);\n              return;\n            }\n            break;\n          case 'ETHEREUM_SIGNATURE':\n            // TODO: enter regex\n            break;\n          case 'IP_ADDRESS':\n            // TODO: enter regex\n            break;\n          case 'JSON_DATA':\n            // TODO: enter regex\n            break;\n          default:\n            this.stopScan();\n            this.props.onDone(code.data);\n            return;\n        }\n      }\n    }\n    requestAnimationFrame(this.tick);\n  }\n\n  startScan() {\n    if (!navigator.mediaDevices) return alert('Der Browser unterstützt diese Funktion nicht.');\n    const constraints = { video: { facingMode: \"environment\", width: 320, height: 320 } }\n    navigator.mediaDevices.getUserMedia(constraints)\n      .then((stream) => {\n        /* use the stream */\n        this.canvas = this.canvasElement.current.getContext(\"2d\");\n        this.video.current.srcObject = stream;\n        this.video.current.setAttribute('playsinline', true);\n        this.video.current.play();\n        requestAnimationFrame(this.tick);\n        this.setState({ isScanning: true });\n      })\n      .catch(function (err) {\n        console.error(err);\n        /* handle the error */\n        alert('Sorry, Kamera-Stream konnte nicht geladen werden.');\n      });\n  }\n\n  stopScan() {\n    if (!this.video || !this.video.current || !this.video.current.srcObject) return;\n    let videoTracks = this.video.current.srcObject.getVideoTracks();\n    videoTracks[0].stop();\n    this.setState({ isScanning: false });\n  }\n\n  render() {\n    return (\n      <Box className=\"QRScanner\">\n        <div>\n          <canvas ref={this.canvasElement} hidden={!this.state.isScanning} />\n          <video ref={this.video} hidden />\n        </div>\n        {!this.state.isScanning && <Button label={this.props.label || \"Scan\"} onClick={this.startScan}></Button>}\n      </Box>\n    );\n  }\n}\n\nexport default QRScanner;\n","import React from 'react';\nimport { Button } from 'grommet';\nimport './Dialog.css';\n\nclass Dialog extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = { };\n    }\n\n    render() {\n        return (\n            <div className=\"dialog\">\n                <div className=\"dialog-background-box\"></div>\n                <div className=\"dialog-center\">\n                    <div className=\"dialog-content\">\n                        <div className=\"dialog-header\">\n                            <h1>{this.props.title}</h1>\n                            <Button className=\"abort\" onClick={this.props.onAbort}>X</Button>\n                        </div>\n                        <div className=\"dialog-body\">\n                            {this.props.children}\n                        </div>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default Dialog;\n","// eslint-disable-next-line\nimport adapter from 'webrtc-adapter';\n\n/**\n * Represents a ticket reader on a remote device.\n * Use this class to connect to a RemoteTicketReader.\n */\nclass TicketReader {\n\n    constructor() {\n        this._iceCandidatesHandler = this._iceCandidatesHandler.bind(this);\n        this._dataChannelOpenHandler = this._dataChannelOpenHandler.bind(this);\n        this._receiveChannelHandler = this._receiveChannelHandler.bind(this);\n        this._dataChannelClosedHandler = this._dataChannelClosedHandler.bind(this);\n        this._connectionChangeHandler = this._connectionChangeHandler.bind(this);\n        this._generateAnswer = this._generateAnswer.bind(this);\n        this._messageHandler = this._messageHandler.bind(this);\n\n        // Map for requests sent via datachannel. Usage is: uuid =>  { resolve: resolve, reject: reject }\n        this.requestMap = new Map();\n\n        // Collection of all local icecandidates\n        this.icecandidates = [];\n\n        // Collection for all icecandidates that the master will provide\n        this.remoteICECandidates = [];\n\n        /**\n         * This eventlistener is called when the \n         * ticket reader changed its connection state. Please implement externally.\n         * @param {String} connectionState - State of the connection.\n         */\n        this.onConnectionChanged = function (connectionState) { };\n\n        // Finally prepare connection\n        this._initConnection();\n    }\n\n    /**\n     * Method that initializes the peer connection.\n     */\n    async _initConnection() {\n        const servers = null;\n\n        this.localPeerConnection = new RTCPeerConnection(servers);\n        this.localPeerConnection.addEventListener('icecandidate', this._iceCandidatesHandler);\n        this.localPeerConnection.addEventListener('connectionstatechange', this._connectionChangeHandler);\n        this.localPeerConnection.addEventListener('datachannel', this._receiveChannelHandler);\n    }\n\n    _iceCandidatesHandler(event) {\n        this.icecandidates.push(event.candidate);\n        if (this.answer && !this.qrcode) {\n            setTimeout(this._generateAnswer, 200); // Set a delay to collect some more icecandidates\n        }\n    }\n\n    _connectionChangeHandler(event) {\n        console.debug(event);\n        let connectionState = event.target.connectionState;\n\n        switch (connectionState) {\n            case \"connected\":\n                // The connection has become fully connected\n                break;\n            case \"disconnected\":\n                break;\n            case \"failed\":\n                // One or more transports has terminated unexpectedly or in an error\n                break;\n            case \"closed\":\n                // The connection has been closed\n                break;\n            default:\n                break;\n        }\n\n        this.onConnectionChanged(connectionState);\n\n    }\n\n    _dataChannelOpenHandler(event) {\n        console.debug(event);\n        this.onReady();\n    }\n\n    _dataChannelClosedHandler(event) {\n        console.debug(event);\n    }\n\n    _messageHandler(event) {\n        console.debug(event.data);\n        try{\n            let response = JSON.parse(event.data);\n            if(response.reqId){\n                let callbacks = this.requestMap.get(response.reqId);\n                if(response.error){\n                    callbacks['reject'](response.error);\n                } else {\n                    callbacks['resolve'](response.result);\n                }\n            }\n        } catch(error){\n            console.error(error);\n        }\n    }\n\n    _receiveChannelHandler(event) {\n        this.dataChannel = event.channel;\n        this.dataChannel.addEventListener('message', this._messageHandler);\n        this.dataChannel.addEventListener('open', this._dataChannelOpenHandler);\n        this.dataChannel.addEventListener('close', this._dataChannelClosedHandler);\n    }\n\n    _createUUID() {\n        var dt = new Date().getTime();\n        var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n            var r = (dt + Math.random() * 16) % 16 | 0;\n            dt = Math.floor(dt / 16);\n            return (c === 'x' ? r : (r & 0x3 & 0x8)).toString(16);\n        });\n        return uuid;\n    }\n\n    readTicketRemote(identifier) {\n        return new Promise((resolve, reject) => {\n            let reqId = this._createUUID();\n            this.requestMap.set(reqId, { resolve: resolve, reject: reject });\n            const msg = {\n                type: \"Request\",\n                reqId: reqId,\n                context: \"ticketMirror\",\n                method: \"getTicket\",\n                params: [identifier]\n            }\n            try {\n                this.dataChannel.send(JSON.stringify(msg));\n            } catch (e) {\n                reject(e);\n            }\n        });\n    }\n\n    obliterateTicketRemote(identifier, signature) {\n        return new Promise((resolve, reject) => {\n            let reqId = this._createUUID();\n            this.requestMap.set(reqId, { resolve: resolve, reject: reject });\n            const msg = {\n                type: \"Request\",\n                reqId: reqId,\n                context: \"ticketMirror\",\n                method: \"obliterateTicket\",\n                params: [identifier, signature]\n            }\n            try {\n                this.dataChannel.send(JSON.stringify(msg));\n            } catch (e) {\n                reject(e);\n            }\n        });\n    }\n\n    /**\n     * Method to set the config received from the master.\n     * @param {Object} config - A JS Object containing the offer and ice candidates from the master. \n     */\n    async setMasterConfig(config) {\n        // Setting remote description\n        await this.localPeerConnection.setRemoteDescription(new RTCSessionDescription(config.offer)).catch(console.error);\n\n        // Adding ice candidates from remote\n        config.candidates.forEach((candidate) => {\n            this.localPeerConnection.addIceCandidate(candidate).catch(console.error);\n            this.remoteICECandidates.push(candidate);\n        });\n\n        // Creating answer\n        this.answer = await this.localPeerConnection.createAnswer().catch(console.error);\n        await this.localPeerConnection.setLocalDescription(this.answer).catch(console.error);\n    }\n\n    _generateAnswer(){\n        let data = { answer: this.answer, candidates: this.icecandidates };\n        this.onAnswer(data);\n    }\n\n    /**\n     * Dumps all settings to JSON. Use this method to restore a broken session.\n     */\n    toJSON() {\n        let lstore = {\n            localDescription: this.localPeerConnection.currentLocalDescription,\n            remoteDescription: this.localPeerConnection.currentRemoteDescription,\n            candidates: this.remoteICECandidates\n        }\n        return JSON.stringify(lstore);\n    }\n\n}\n\nexport default TicketReader;","import React from 'react';\nimport { Box, Button, Text } from 'grommet';\nimport QRScanner from '../Utilities/Components/QRScanner';\nimport Dialog from '../Utilities/Components/Dialog';\n\nimport TicketReader from '../EventManagement/Classes/TicketReader';\n\nimport QRCode from 'qrcode';\nimport pako from 'pako';\n\nclass Entrance extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = { connected: null, currentTicket: null };\n        this.connectTicketReader = this.connectTicketReader.bind(this);\n        this.scanDoneHandler = this.scanDoneHandler.bind(this);\n        this.capturedTicketHandler = this.capturedTicketHandler.bind(this);\n        this.obliterateTicketHandler = this.obliterateTicketHandler.bind(this);\n        this.closeTicketViewHandler = this.closeTicketViewHandler.bind(this);\n        /**\n         * @type {TicketReader}\n         */\n        this.ticketReader = null;\n    }\n\n    translateTicketType(ticketType){\n        switch (ticketType) {\n            case \"0\": return \"Absolvent\";\n            case \"1\": return \"Begleitperson\";\n            case \"2\": return \"Parkticket\";\n            default: break;\n        }\n    }\n\n    connectTicketReader() {\n        let ticketReader = new TicketReader();\n        ticketReader.onReady = () => {\n            this.ticketReader = this.state.connectTR;\n            this.setState({ connectTR: null });\n        };\n        ticketReader.onConnectionChanged = (connectionState) => {\n            switch (connectionState) {\n                case \"connected\":\n                    // The connection has become fully connected\n                    this.setState({ connected: connectionState });\n                    break;\n                case \"disconnected\":\n                    this.setState({ connected: connectionState });\n                    break;\n                case 'failed':\n                    this.setState({ connected: connectionState });\n                    break;\n                case \"closed\":\n                    // The connection has been closed\n                    this.setState({ connected: connectionState });\n                    break;\n                default:\n                    break;\n            }\n        };\n        ticketReader.onAnswer = async (config) => {\n            // Compress data\n            let binaryString = pako.deflate(JSON.stringify(config), { level: 9, to: \"string\" });\n\n            // Create QR Code\n            let url = await QRCode.toDataURL(binaryString).catch(console.error);\n            this.setState({ TRQRCode: url, connectTRStep: 1 });\n        };\n        this.setState({ connectTR: ticketReader, connectTRStep: 0 });\n    }\n\n    scanDoneHandler(binaryString) {\n        let obj = JSON.parse(pako.inflate(binaryString, { to: 'string' }));\n        this.state.connectTR.setMasterConfig(obj);\n    }\n\n    /**\n     * @typedef TicketCodeData\n     * @property {String} id - Hex string of the identifier\n     * @property {String} sIG - Secret ingredient of the user to calculate the hash \n     */\n\n    /**\n     * Handler for the scanner when the ticket was scanned\n     * @param {TicketCodeData} data - The data from the QR-Code of the ticket\n     */\n    async capturedTicketHandler(data) {\n        try {\n            let ticketData = JSON.parse(data);\n            if (!ticketData.id || !ticketData.sIG) throw Error(\"Fehlende Angaben im Ticket-QR-Code. Möglicherweise liegt eine Fälschung vor.\");\n            let ticket = await this.ticketReader.readTicketRemote(ticketData.id);\n            this.setState({ currentTicket: ticket, currentSecretIngredient: ticketData.sIG });\n        } catch (error) {\n            alert(error);\n        }\n    }\n\n    /**\n     * Obliterates a ticket in the IDB\n     */\n    async obliterateTicketHandler() {\n        try {\n            await this.ticketReader.obliterateTicketRemote(this.state.currentTicket.identifier, this.state.currentSecretIngredient);\n            alert('Erfolgreich entwertet!');\n            this.closeTicketViewHandler();\n        } catch (error) {\n            alert(error);\n        }\n    }\n\n    closeTicketViewHandler() {\n        this.setState({ currentTicket: null, currentSecretIngredient: null });\n    }\n\n    render() {\n        return (\n            <Box className=\"Entrance\" pad=\"medium\">\n                {!this.state.connected &&\n                    <Box>\n                        <p>Wenn Sie dieses Gerät als Ticket Leser verwenden möchten, müssen Sie es erst mit dem Event-Manager verbinden.</p>\n                        <p>Bitte stellen Sie sicher, dass dieses Gerät mit dem selben lokalen Netzwerk, wie der Event-Manager verbunden ist.</p>\n                        <Button onClick={this.connectTicketReader} label=\"Ticket Reader Aktivieren\"></Button>\n                        {this.state.connectTR &&\n                            <Dialog title=\"Als Ticket Reader verbinden\" onAbort={() => { this.setState({ connectTR: null }); }}>\n                                {this.state.connectTRStep === 0 &&\n                                    <div>\n                                        <div className=\"scanner\">\n                                            <QRScanner onDone={this.scanDoneHandler} label=\"Scanvorgang starten\"></QRScanner>\n                                        </div>\n                                        <div className=\"description\">\n                                            <p>Bitte den Code des Initiators scannen</p>\n                                        </div>\n                                    </div>\n                                }\n                                {this.state.connectTRStep === 1 &&\n                                    <div>\n                                        <div className=\"qrcode\">\n                                            {!this.state.TRQRCode && <div className=\"loader\">Loading...</div>}\n                                            {this.state.TRQRCode && <img src={this.state.TRQRCode} width=\"100%\" alt=\"Ein QR-Code sollte hier angezeigt werden.\" />}\n                                        </div>\n                                        <div className=\"description\">\n                                            <p>Bitte nun mit dem Initiator Gerät scannen</p>\n                                        </div>\n                                    </div>\n                                }\n                            </Dialog>\n                        }\n                    </Box>\n                }\n                {this.state.connected === 'connected' &&\n                    <Box>\n                        <p>Sie sind verbunden</p>\n                        {this.state.currentTicket === null && <QRScanner onDone={this.capturedTicketHandler} label=\"Scanvorgang starten\"></QRScanner>}\n                        {this.state.currentTicket &&\n                            <Box>\n                                <h1>{this.state.currentTicket.surname}, {this.state.currentTicket.forename}</h1>\n                                <Text size=\"2em\" pad=\"small\">{this.translateTicketType(this.state.currentTicket.ticketType)}</Text>\n                                <Text size=\"2em\" pad=\"small\">{(this.state.currentTicket.isValid && !this.state.currentTicket.isUsed) ? 'OK' : 'Ungültiges Ticket!'}</Text>\n                                <Box gap=\"small\">\n                                    <Button label=\"Entwerte Ticket\" onClick={this.obliterateTicketHandler}></Button>\n                                    <Button label=\"Schließen\" onClick={this.closeTicketViewHandler}></Button>\n                                </Box>\n                            </Box>\n                        }\n                    </Box>\n                }\n                {this.state.connected === 'disconnected' &&\n                    <Box>\n                        <p>Die Verbindung wurde unterbrochen!</p>\n                        <p>Bitte warten Sie einen Moment...</p>\n                        <p className=\"loader\"></p>\n                    </Box>\n                }\n                {this.state.connected === 'failed' &&\n                    <Box>\n                        <p>Die Verbindung wurde unterbrochen!</p>\n                        <p>Bitte aktivieren Sie den Reader erneut.</p>\n                        <Button onClick={() => { this.setState({ connected: null }); this.connectTicketReader() }} label=\"Ticket Reader Aktivieren\"></Button>\n                    </Box>\n                }\n            </Box>\n        );\n    }\n}\n\nexport default Entrance;\n","import Web3 from 'web3';\nimport Config from '../../config';\n\n/**\n * Class for basic operations and preparations for the local caching of ticket data\n */\nclass LocalTicketMirror {\n\n    constructor() {\n\n        // Binding \"this\" to methods that get called from other contexts\n        this._createDB = this._createDB.bind(this);\n        this.saveTicketMirror = this.saveTicketMirror.bind(this);\n        this.getTicketList = this.getTicketList.bind(this);\n\n        // Check if Indexed DB (IDB) technology is supported in the current browser\n        if (!window.indexedDB) {\n            throw Error(\"Your browser doesn't support a stable version of IndexedDB. Such and such feature will not be available.\");\n        }\n\n        // Collection for DB Requests that happen before initialization of the DB connection instance (this.db)\n        this.waitingForIDBReadyQueue = [];\n\n        // Finally initializing DB connection\n        this._initDB();\n\n        /**\n         * @public\n         * This eventlistener is called when the \n         * ticket list were updated. Please implement externally.\n         * @param {Array} tickets - New ticket list.\n         */\n        this.onTicketListChanged = function (tickets) { };\n    }\n\n    /**\n     * Initializes connection to IDB and saves the connection\n     * instance to \"this.db\"\n     */\n    _initDB() {\n        console.debug('Initializing IDB Connection');\n        var request = window.indexedDB.open(Config.IDB_NAME, 1);\n\n        request.addEventListener('upgradeneeded', this._createDB);\n        request.addEventListener('success', (ev) => {\n            console.debug('IDB Connection established');\n            this.db = ev.target.result;\n            this.waitingForIDBReadyQueue.forEach((resolve) => {\n                resolve(this.db);\n            });\n        });\n        request.addEventListener('error', (ev) => {\n            console.error(\"Database error: \" + ev.target.errorCode);\n        });\n    }\n\n    /**\n     * Eventhandler for cases where the IDB has to be created / initialized\n     * Only for internal use.\n     * @param {Event} event \n     */\n    _createDB(event) {\n        this.db = event.target.result;\n\n        // Create an objectStore for this database\n        var objectStore = this.db.createObjectStore(\"tickets\", { keyPath: \"identifier\" });\n        objectStore.createIndex(\"forename\", \"forename\", { unique: false });\n        objectStore.createIndex(\"surname\", \"surname\", { unique: false });\n        objectStore.createIndex(\"ticketType\", \"ticketType\", { unique: false });\n    }\n\n    /**\n     * Getter for the IDB Connection. Only for internal use.\n     * @returns Returns a Promis that is resolved with a IDBConnection when it is ready.\n     */\n    _getIDB() {\n        return new Promise((resolve) => {\n            if (this.db) {\n                resolve(this.db);\n            } else {\n                this.waitingForIDBReadyQueue.push(resolve);\n            }\n        });\n    }\n\n    /**\n     * Method that writes data to the IDB datastore \"tickets\"\n     */\n    async saveTicketMirror(tickets) {\n        try {\n            var db = await this._getIDB();\n\n            var objectStore = db.transaction(\"tickets\", \"readwrite\").objectStore(\"tickets\");\n            objectStore.clear();\n\n            tickets.forEach((ticket) => {\n                objectStore.add(ticket);\n            });\n\n            this.onTicketListChanged();\n        } catch (error) {\n            console.error(error);\n            alert('Es ist ein Fehler bei der Indexed DB aufgetreten');\n        }\n    }\n\n    /**\n     * A local representation of a ticket joined out of the private db and the smart contract\n     * @typedef {Object} Ticket\n     * @property {String} identifier\n     * @property {Boolean} isValid\n     * @property {Boolean} isUsed\n     * @property {String} ticketType \n     */\n\n    /**\n     * For frontend purposes to get all tickets out of the db.\n     * @returns {Ticket[]} Returns an array of tickets\n     */\n    getTicketList() {\n        return new Promise(async (resolve, reject) => {\n            var db = await this._getIDB().catch(console.error);\n            if (!db) return reject();\n            var objectStore = db.transaction(\"tickets\", \"readonly\").objectStore(\"tickets\");\n            var request = objectStore.getAll();\n            request.onerror = reject;\n            request.onsuccess = function (event) {\n                var tickets = event.target.result;\n                return resolve(tickets);\n            };\n        });\n    }\n\n    /**\n     * Fetches a ticket by its identifier\n     * @param {String} identifier - Unique identifier of the ticket\n     * @returns {Ticket} Returns a promise that resolves as the ticket\n     */\n    getTicket(identifier) {\n        return new Promise(async (resolve, reject) => {\n            var db = await this._getIDB().catch(console.error);\n            if (!db) return reject();\n            var objectStore = db.transaction(\"tickets\", \"readonly\").objectStore(\"tickets\");\n            var request = objectStore.get(identifier);\n            request.onerror = reject;\n            request.onsuccess = function (event) {\n                var ticket = event.target.result;\n                if (!ticket) return reject(\"Ticket does not exist.\");\n                return resolve(ticket);\n            };\n        });\n    }\n\n    /**\n     * Obliterates a ticket selected by its unique identifer.\n     * The secretIngredient of the owner is checked to validate the persons identity.\n     * @param {String} identifier - Unique identifier of the ticket\n     * @param {String} secretIngredient - Specific secretIngredient of the user that was used to generate the identifer\n     * @returns {Promise} Returns a promise that is resolved with null or rejected with an error message\n     */\n    obliterateTicket(identifier, secretIngredient) {\n        return new Promise(async (resolve, reject) => {\n            var db = await this._getIDB().catch(console.error);\n            if (!db) return reject();\n            var objectStore = db.transaction(\"tickets\", \"readwrite\").objectStore(\"tickets\");\n            var request = objectStore.get(identifier);\n            request.onerror = reject;\n            request.onsuccess = (event) => {\n                // Get the old value that we want to update\n                var ticket = event.target.result;\n                if (!ticket) return reject(\"Das Ticket existiert nicht.\");\n\n                // Check secretIngredient and identifier hash\n                var valuesForHash = secretIngredient + ticket.forename + ticket.surname + ticket.ticketType;\n                var checkSum = Web3.utils.sha3(valuesForHash);\n\n                if (checkSum !== identifier) return reject(\"Die Identität des Tickets konnte nicht verifiziert werden.\");\n\n                // Check validity and if it was not used before\n                if (!ticket.isValid) return reject(\"Das Ticket ist nicht gültig.\");\n                if (ticket.isUsed) return reject(\"Das Ticket wurde breits entwertet.\");\n\n                ticket.isUsed = true;\n\n                // Put this updated object back into the database.\n                var requestUpdate = objectStore.put(ticket);\n                requestUpdate.onerror = reject;\n                requestUpdate.onsuccess = async (event) => {\n                    resolve(event);\n                    this.onTicketListChanged();\n                };\n            };\n        });\n    }\n\n}\n\nexport default LocalTicketMirror;","import React from 'react';\nimport { Box, Button, List, CheckBox, Clock, Meter, Stack, Text } from 'grommet';\n\n// eslint-disable-next-line\nimport LocalTicketMirror from '../Classes/LocalTicketMirror';\n\nimport UserContext from '../../AppContexts/UserContext';\nimport Config from '../../config';\n\nclass EntranceDashboard extends React.Component {\n\n    static contextType = UserContext;\n\n    constructor(props) {\n        super(props);\n        this.state = { lockDataset: false, tickets: [] };\n        this.handleDumpMirror = this.handleDumpMirror.bind(this);\n        this.showTickets = this.showTickets.bind(this);\n        this.lockHandler = this.lockHandler.bind(this);\n        this.usedTicketsCount = this.usedTicketsCount.bind(this);\n        if (!this.props.localTicketMirror) throw new Error(\"Missing LocalTicketMirror\");\n\n        // Reloading ticket list at each db change\n        // This could be inperformant with more ticket-reader at once\n        // Maybe a frequent polling mechanism would be better\n        this.props.localTicketMirror.onTicketListChanged = this.showTickets;\n    }\n\n    componentDidMount() {\n        this.showTickets();\n    }\n\n    translateTicketType(ticketType) {\n        switch (ticketType) {\n            case \"0\": return \"Absolvent\";\n            case \"1\": return \"Begleitperson\";\n            case \"2\": return \"Parkticket\";\n            default: break;\n        }\n    }\n\n    async handleDumpMirror() {\n        /**\n         * @type LocalTicketMirror\n         */\n        let ltm = this.props.localTicketMirror;\n\n        var response = await fetch(Config.BACKEND_BASE_URI + \"/api/v2/tickets/\", {\n            method: 'GET',\n            mode: 'cors',\n            cache: 'no-cache',\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': 'Bearer ' + this.context.token\n            }\n        }).catch(console.log);\n\n        if (!response.ok) {\n            return alert('Beim Laden der Tickets ist ein Fehler aufgetreten.');\n        }\n\n        var tickets = await response.json().catch(console.log);\n\n        if (!tickets) return alert('Beim Laden der Tickets ist ein Fehler aufgetreten.');\n\n        ltm.saveTicketMirror(tickets);\n\n        this.showTickets();\n    }\n\n    async showTickets() {\n        // Reading out of idb all tickets\n        /**\n         * @type LocalTicketMirror\n         */\n        let ltm = this.props.localTicketMirror;\n        let tickets = await ltm.getTicketList().catch(console.error);\n        if (!tickets) return;\n\n        this.setState({ tickets: tickets.filter(ticket => ticket.isValid && ticket.ticketType < 2), lockDataset: (tickets.length > 0 ? true : false) });\n    }\n\n    lockHandler(event) {\n        if (!event.target.checked) {\n            let ok = window.confirm('Sind Sie sich sicher, dass sie den Datensatz erneut herunterladen möchten? Sie werden alle Daten zu bisher eingelösten Tickets verlieren.');\n            if (ok) {\n                this.setState({ lockDataset: event.target.checked });\n            }\n        } else {\n            this.setState({ lockDataset: event.target.checked });\n        }\n    }\n\n    usedTicketsCount() {\n        let usedTicketsCount = this.state.tickets.filter(ticket => ticket.isUsed);\n        return usedTicketsCount.length;\n    }\n\n    render() {\n\n        const usedTicketsCount = this.usedTicketsCount();\n        const unusedTicketsCount = this.state.tickets.length - usedTicketsCount;\n\n        return (\n            <Box className=\"EntranceDashboard\" pad=\"medium\" gap=\"small\" direction=\"column\" wrap={true}>\n                <Box className=\"dashboardHead\" direction=\"row\" wrap={true} justify=\"center\">\n                    <Clock type=\"digital\" size=\"xxlarge\" />\n                </Box>\n                <Box className=\"dashboardRow1\" direction=\"row\" wrap={true} justify=\"center\" gap=\"small\">\n                    <Box className=\"dataControls\" direction=\"column\" gap=\"small\" justify=\"center\">\n                        <Button alignSelf=\"center\" label=\"Ticketdaten für den Offline-Einlass herunterladen\" onClick={this.handleDumpMirror} disabled={this.state.lockDataset}></Button>\n                        <CheckBox label=\"Datensatz schützen\" toggle={true} onChange={this.lockHandler} checked={this.state.lockDataset}></CheckBox>\n                    </Box>\n                    <Box className=\"StatisticalSummary\" direction=\"column\" wrap={false}>\n                        <p>Anzahl noch gültiger Personen-Tickets</p>\n                        <Stack>\n                            <Meter\n                                type=\"bar\"\n                                values={[{\n                                    value: unusedTicketsCount,\n                                    label: 'Anzahl noch gültiger Personen-Tickets'\n                                }]}\n                                aria-label=\"meter\"\n                                max={this.state.tickets.length}\n                                thickness=\"large\"\n                            />\n                            <Text size=\"2em\" margin=\"0.2em\" alignSelf=\"center\">{unusedTicketsCount}</Text>\n                        </Stack>\n                        <p>Anzahl eingetretener Personen</p>\n                        <Stack>\n                            <Meter\n                                type=\"bar\"\n                                values={[{\n                                    value: usedTicketsCount,\n                                    label: 'Anzahl eingetretener Personen'\n                                }]}\n                                aria-label=\"meter\"\n                                max={this.state.tickets.length}\n                                thickness=\"large\"\n                            />\n                            <Text size=\"2em\" margin=\"0.2em\" alignSelf=\"center\">{usedTicketsCount}</Text>\n                        </Stack>\n                    </Box>\n                </Box>\n                <Box className=\"TicketList\">\n                    <List\n                        primaryKey={(ticket) => { return <b key={ticket.identifier + 't'}>{ticket.surname || 'Unkown'}, {ticket.forename || 'Unkown'} - {this.translateTicketType(ticket.ticketType)} {ticket.isWheelchairUser ? '!Rollstuhlfahrer!' : ''}</b> }}\n                        secondaryKey={(ticket) => { return <span key={ticket.identifier + 's'}>{ticket.isUsed ? 'benutzt' : 'unbenutzt'}</span> }}\n                        data={this.state.tickets}\n                    />\n                </Box>\n            </Box>\n        );\n    }\n}\n\nexport default EntranceDashboard;\n","// eslint-disable-next-line\nimport adapter from 'webrtc-adapter';\n\n/**\n * Represents an object holder for diverse connectio objects to the ticket reader.\n */\nclass RemoteTicketReader {\n\n    constructor() {\n        // Binding \"this\" to the event handlers\n        this.iceCandidatesHandler = this.iceCandidatesHandler.bind(this);\n        this.dataChannelOpenHandler = this.dataChannelOpenHandler.bind(this);\n        this.generateOfferCode = this.generateOfferCode.bind(this);\n        this.dataChannelClosedHandler = this.dataChannelClosedHandler.bind(this);\n        this.connectionChangeHandler = this.connectionChangeHandler.bind(this);\n        this.setTicketReaderConfig = this.setTicketReaderConfig.bind(this);\n        this.messageHandler = this.messageHandler.bind(this);\n\n        // Defining a unique id for this instance\n        this.uuid = this.createUUID();\n\n        // Initializing empty event listeners to prevent \"undefined\" errors\n\n        /**\n         * @public\n         * This eventlistener is called when the \n         * ticket reader changed its connection state. Please implement externally.\n         * @param {String} connectionState - State of the connection.\n         */\n        this.onConnectionChanged = function (connectionState) { };\n\n        /**\n         * @public\n         * This eventlistener is called once when the \n         * ticket reader datachannel is ready to use after initiaization. Please implement externally.\n         */\n        this.onReady = function () { };\n\n        /**\n         * @public\n         * This eventlistener is called when the data \n         * for the connection offer is generated. Please implement externally.\n         * @param {Object} config - The config.\n         */\n        this.onOffer = function (config) { };\n\n        /**\n         * This callback is for onGetTicket eventlistener.\n         * @callback onGetTicketCallback\n         * @param {Object} ticket - The ticket as JS Object.\n         * @param {String} [errorMessage] - In case of ticket = null an error a message should be provided.\n         */\n\n        /**\n         * @public\n         * This eventlistener requires an identifier and a callback \n         * that needs to be called with the ticket as JS Object.\n         * Please implement externally.\n         * @param {String} identifier - Identifier of the ticket.\n         * @param {onGetTicketCallback} callback - Callback that should be called with a ticket Object.\n         */\n        this.onGetTicket = function (identifier, callback) { };\n\n        /**\n         * This callback is for onObliterateTicket eventlistener.\n         * @callback onObliterateTicketCallback\n         * @param {Boolean} success - Whether the obliterating was successful or not.\n         * @param {String} [errorMessage] - In case of success = false, an error message should be provided.\n         */\n\n        /**\n         * @public\n         * This eventlistener requires identifier and the secret ingredient and a callback \n         * that needs to be called with true or false depending if successfully obliterated or not. \n         * Please implement externally.\n         * @param {String} identifier - Identifier of the ticket.\n         * @param {String} secretIngredient - Secret ingredient used for generating the identifier of the ticket.\n         * @param {onObliterateTicketCallback} callback - Callback that should be called with a ticket Object.\n         */\n        this.onObliterateTicket = function (identifier, secretIngredient, callback) { };\n\n        // Initializing the RTC connection\n        this.initConnection();\n    }\n\n    /**\n     * @private\n     * Prepares RTCPeerConnection and datachannels for\n     * the connection with a ticket reader client.\n     */\n    initConnection() {\n        const servers = null;\n        const dataConstraint = null;\n\n        this.icecandidates = [];\n\n        this.localPeerConnection = new RTCPeerConnection(servers);\n        this.localPeerConnection.addEventListener('icecandidate', this.iceCandidatesHandler);\n\n        this.localPeerConnection.addEventListener('connectionstatechange', this.connectionChangeHandler);\n\n        this.dataChannel = this.localPeerConnection.createDataChannel('sendDataChannel', dataConstraint);\n        this.dataChannel.addEventListener('message', this.messageHandler);\n        this.dataChannel.addEventListener('open', this.dataChannelOpenHandler);\n        this.dataChannel.addEventListener('close', this.dataChannelClosedHandler);\n\n        this.createOffer();\n    }\n\n    /**\n     * @private\n     * Eventhandler for new icecandidates from the RTCPeerConnection.\n     * Only for internal use.\n     * @param {RTCPeerConnectionIceEvent} event \n     */\n    iceCandidatesHandler(event) {\n        this.icecandidates.push(event.candidate);\n        if (this.offer && !this.qrcode) {\n            setTimeout(this.generateOfferCode, 200); // Set a delay to collect some more icecandidates\n        }\n    }\n\n    /**\n     * @private\n     * Eventhandler for changed connection states.\n     * Only for internal use. For external event-listening, the \"onConnectionChanged\" property\n     * should be implemented!\n     * @param {Event} event \n     */\n    connectionChangeHandler(event) {\n        console.debug(event);\n        let connectionState = event.target.connectionState;\n\n        switch (connectionState) {\n            case \"connected\":\n                // The connection has become fully connected\n                break;\n            case \"disconnected\":\n                break;\n            case \"failed\":\n                // One or more transports has terminated unexpectedly or in an error\n                break;\n            case \"closed\":\n                // The connection has been closed\n                break;\n            default:\n                break;\n        }\n\n        this.onConnectionChanged(connectionState);\n\n    }\n\n    /**\n     * @private\n     * Eventhandler for the case when the datachannel is ready.\n     * @param {Event} event \n     */\n    dataChannelOpenHandler(event) {\n        console.debug(event);\n        this.onReady();\n        this.dataChannel.send('Hallo Client!');\n    }\n\n    /**\n     * @private\n     * Eventhandler for the case when the datachannel is closed.\n     * @param {Event} event \n     */\n    dataChannelClosedHandler(event) {\n        console.debug('Data Channel Closed', event);\n    }\n\n    /**\n     * @private\n     * Eventhandler for new incoming messages via the datachannel.\n     * @param {Event} event \n     */\n    messageHandler(event) {\n        console.debug(\"Message received:\", event.data);\n        var msg;\n        try {\n            msg = JSON.parse(event.data);\n        } catch (e) {\n            console.error(e);\n            console.debug(\"Message was:\", event.data);\n            return;\n        }\n\n        /** Messages look like this...\n         * msg = {\n                type: \"Request\",     \n                reqId: Unique String,\n                context: String,\n                method: String,\n                params: [Any]\n            }\n         */\n\n        /** Answer Messages should look like this...\n        * msg = {\n               type: \"Answer\",\n               reqId: Unique String,\n               result: Any,\n               error: String\n           }\n        */\n\n        // Switching between different request types and contexts\n        switch (msg.context) {\n            case \"ticketMirror\":\n                if (msg.method === \"getTicket\") {\n                    this.onGetTicket(msg.params[0], (ticket, errorMsg) => {\n                        let answerMsg = {\n                            reqId: msg.reqId,\n                            result: ticket,\n                            error: errorMsg\n                        }\n                        try {\n                            this.dataChannel.send(JSON.stringify(answerMsg));\n                        } catch (error) {\n                            console.error(error);\n                        }\n                    });\n                } else if (msg.method === \"obliterateTicket\") {\n                    this.onObliterateTicket(msg.params[0], msg.params[1], (success, errorMsg) => {\n                        let answerMsg = {\n                            reqId: msg.reqId,\n                            result: success,\n                            error: errorMsg\n                        }\n                        try {\n                            this.dataChannel.send(JSON.stringify(answerMsg));\n                        } catch (error) {\n                            console.error(error);\n                        }\n                    });\n                }\n                break;\n            default:\n                break;\n        }\n    }\n\n    /**\n     * @private\n     * Method to create unique id.\n     */\n    createUUID() {\n        var dt = new Date().getTime();\n        var uuid = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n            var r = (dt + Math.random() * 16) % 16 | 0;\n            dt = Math.floor(dt / 16);\n            return (c === 'x' ? r : (r & 0x3 & 0x8)).toString(16);\n        });\n        return uuid;\n    }\n\n    /**\n     * @private\n     * Method that creates a new connection configuration offer.\n     */\n    async createOffer() {\n        this.offer = await this.localPeerConnection.createOffer().catch(console.error);\n        await this.localPeerConnection.setLocalDescription(this.offer).catch(console.error);\n    }\n\n    /**\n     * @private\n     * Method to generate a complete configuration for the\n     * ticketreader client.\n     */\n    async generateOfferCode() {\n        let data = { offer: this.offer, candidates: this.icecandidates };\n        this.onOffer(data);\n    }\n\n    /**\n     * @typedef {Object} TicketReaderConfig\n     * @property {RTCSessionDescriptionInit} answer\n     * @property {RTCIceCandidate[]} candidates\n     */\n\n    /**\n     * @public\n     * Method to set the connection config received from the\n     * ticketreader client.\n     * @param {TicketReaderConfig} config \n     */\n    async setTicketReaderConfig(config) {\n        // Setting remote description\n        await this.localPeerConnection.setRemoteDescription(new RTCSessionDescription(config.answer)).catch(this.handleError);\n\n        // Adding ice candidates from remote\n        config.candidates.forEach((candidate) => {\n            this.localPeerConnection.addIceCandidate(candidate).catch(this.handleError);\n        });\n    }\n\n}\nexport default RemoteTicketReader;","import React from 'react';\nimport { Box, Button, List } from 'grommet';\nimport QRScanner from '../../Utilities/Components/QRScanner';\nimport Dialog from '../../Utilities/Components/Dialog';\n\nimport RemoteTicketReader from '../Classes/RemoteTicketReader';\n\nimport QRCode from 'qrcode';\nimport pako from 'pako';\n\n/**\n * The main unit (master) to which instances of TicketReader can connect.\n */\nclass TicketReaderManager extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = {};\n        this.connectRemoteTicketReader = this.connectRemoteTicketReader.bind(this);\n        this.scanDoneHandler = this.scanDoneHandler.bind(this);\n    }\n\n    scanDoneHandler(binaryString){\n        let config = JSON.parse(pako.inflate(binaryString, { to: 'string' }));\n        this.state.connectRTR.setTicketReaderConfig(config);\n    }\n\n    /**\n     * Initiates the RTC Peer connection to an instance of TicketReader on another device.\n     */\n    connectRemoteTicketReader() {\n        let remoteTicketReader = new RemoteTicketReader();\n        remoteTicketReader.onReady = () => {\n            this.setState({ connectRTR: null });\n            this.props.onRTR(remoteTicketReader);\n        };\n        remoteTicketReader.onOffer = async (config) => {\n            // Compress data\n            let binaryString = pako.deflate(JSON.stringify(config), { level: 9, to: \"string\" });\n\n            // Create QR Code\n            let url = await QRCode.toDataURL(binaryString).catch(console.error);\n            this.setState({ RTRQRCode: url });\n        }\n        this.setState({ connectRTR: remoteTicketReader, addRTRStep: 0 });\n    }\n\n    render() {\n        return (\n            <Box className=\"TicketReaderManager\" pad=\"medium\">\n                <p>\n                    Derzeit sind {this.props.RTRList.length} Ticket Leser verbunden.\n                </p>\n                <List\n                    primaryKey={(rtr) => { return <b key={rtr.uuid + 't'}> {rtr.uuid} - {rtr.localPeerConnection.connectionState} </b> }}\n                    secondaryKey={(rtr) => { return <span key={rtr.uuid + 's'}> Click to remove </span> }}\n                    onClickItem={this.props.onRemoveRTR}\n                    data={this.props.RTRList}\n                />\n                <Button onClick={this.connectRemoteTicketReader} label=\"Ticket Leser Hinzufügen\"></Button>\n                {this.state.connectRTR &&\n                    <Dialog title=\"Remote Ticket Reader Hinzufügen\" onAbort={() => { this.setState({ connectRTR: null }); }}>\n                        {this.state.addRTRStep === 0 &&\n                            <div>\n                                <div className=\"ticket-reader-qrcode\">\n                                    {!this.state.RTRQRCode && <div className=\"loader\">Loading...</div>}\n                                    {this.state.RTRQRCode && <img src={this.state.RTRQRCode} width=\"100%\" alt=\"Ein QR-Code sollte hier angezeigt werden.\" />}\n                                </div>\n                                <div className=\"ticket-reader-description\">\n                                    <p>Gehen Sie mit dem Zielgerät auf die Unterseite #/entrance/</p>\n                                    <p>Scannen Sie den angezeigten QR-Code anschließend mit dem Zielgerät</p>\n                                </div>\n                                <div className=\"ticket-reader-action\">\n                                    <Button onClick={() => { this.setState({ addRTRStep: 1 }); }} label=\"Weiter\"></Button>\n                                </div>\n                            </div>\n                        }\n                        {this.state.addRTRStep === 1 &&\n                            <div>\n                                <div className=\"ticket-reader-scanner\">\n                                    <QRScanner onDone={this.scanDoneHandler} label=\"Scanvorgang starten\"></QRScanner>\n                                </div>\n                                <div className=\"ticket-reader-description\">\n                                    <p>Bitte nun den Code des Zielgeräts scannen</p>\n                                </div>\n                            </div>\n                        }\n                    </Dialog>\n                }\n            </Box>\n        );\n    }\n\n}\n\nexport default TicketReaderManager;","import React from 'react';\nimport { Box, Button, Text, TextInput } from 'grommet';\nimport './ShopManagement.css';\nimport './ShopManagement.js';\nimport UserContext from '../../AppContexts/UserContext'\n\nclass ShopManagementConfMaxTickets extends React.Component {\n\n    static contextType = UserContext;\n    \n    constructor(props) {\n        super(props);\n        this.state = {\n            Absolvententickets: 0,\n            Begleitertickets: 0,           \n        }\n\n        this.setValuesAndChangeStep = this.setValuesAndChangeStep.bind(this)\n        this.changeToShopMangement = this.changeToShopMangement.bind(this)\n    }\n\n    setValuesAndChangeStep (){\n        this.props.setConfMaxTicketsFromConf(this.state.Absolvententickets, this.state.Begleitertickets);\n        window.location.assign(\"#/eventmgmt/shop\");\n    }\n    changeToShopMangement() {\n        window.location.assign(\"#/eventmgmt/shop\");\n    }\n\n    render() {\n        var Ansicht = [];\n        return (\n            Ansicht[0]=\n            <Box className=\"outerBoxOverview\" direction=\"column\" align=\"center\">\n                <Text weight=\"bold\" size=\"xxlarge\">Ticketkonfiguration</Text>\n                <Box pad=\"medium\"></Box>\n                Hier können die maximalen Tickets, die ein Benutzer (Absolvent) erwerben kann, konfiguriert werden. \n                <Box pad=\"medium\">\n                    <Text weight=\"bold\">Absolvententickets:</Text>\n                    <TextInput\n                        type=\"number\"\n                        placeholder=\"Absolvententickets\"\n                        value={this.state.Absolvententickets}\n                        onChange={(event) => { this.setState({ Absolvententickets: parseInt(event.target.value)}) }}\n                    />\n                </Box>\n                <Box pad=\"medium\">\n                    <Text weight=\"bold\">Begleitertickets:</Text>\n                    <TextInput\n                        type=\"number\"\n                        placeholder=\"Begleitertickets\"\n                        value={this.state.Begleitertickets}\n                        onChange={(event) => { this.setState({ Begleitertickets: parseInt(event.target.value)}) }}\n                    />\n                </Box>\n                <Box direction=\"row\" pad=\"medium\">\n                <Button label=\"Zurück\" onClick={this.changeToShopMangement}></Button>\n                <Button label=\"Bestätigen\" onClick={this.setValuesAndChangeStep}></Button>\n                </Box>\n            </Box>\n        );\n    }\n}\nexport default ShopManagementConfMaxTickets;\n","import React from 'react';\nimport { Box, Button, Text, List, TextInput } from 'grommet';\nimport Config from '../../config';\nimport './ShopManagement.css';\nimport './ShopManagement.js';\nimport UserContext from '../../AppContexts/UserContext'\n\n\nclass ShopManagementViewBookings extends React.Component {\n\n    static contextType = UserContext;\n\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            open: [], paid: [], searchOpen: \"\", searchPaid: \"\",\n            headline1: [{ id: \"ID der Buchung\", email: \"E-Mail-Adresse des Absolventen\", createdAt: \"Erstellungsdatum\", approve: \"Buchung freigeben\", cancel: \"Buchung stornieren\" }],\n            headline2: [{ id: \"ID der Buchung\", email: \"E-Mail-Adresse des Absolventen\", createdAt: \"Erstellungsdatum\", cancel: \"Buchung stornieren\" }]\n        };\n        this.changeStep = this.changeStep.bind(this);\n        this.componentDidMount = this.componentDidMount.bind(this);\n        this.getBookings = this.getBookings.bind(this);\n        this.cancel = this.cancel.bind(this);\n        this.approve = this.approve.bind(this);\n        this.searchOpenHandler = this.searchOpenHandler.bind(this);\n        this.searchPaidHandler = this.searchPaidHandler.bind(this);\n        this.postTicket = this.postTicket.bind(this);\n    }\n\n    componentDidMount() {\n        //Ruft beim Laden der Komponente die aktuellen Buchungen ab, indem die Funktion getBookings aufgerufen wird\n        this.getBookings();\n    }\n\n\n    async getBookings() {\n        //Ruft die aktuellen Buchungen aus der Datenbank ab und speichert diese lokal ab\n        const response = await fetch(Config.BACKEND_BASE_URI + '/api/v2/bookings/', {\n            method: 'GET',\n            mose: 'cors',\n            cache: 'no-cache',\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': 'Bearer ' + this.context.token,\n            },\n        }).catch(console.log);\n\n        if (!response.ok) {\n            switch (response.status) {\n                case 500:\n                    alert(\"Die Anmeldung ist aufgrund eines Server-Fehlers fehlgeschlagen. Bitte versuchen Sie es später erneut.\");\n                    break;\n                case 501:\n                    alert(\"Der Server kann die gewünschte Anfrage nicht ausführen.\");\n                    break;\n                default:\n                    alert(response.message);\n            }\n            return;\n        } else {\n            const rückgabe = await response.json().catch(console.log);\n            if (rückgabe) {\n                var lauf2 = 0;\n                var lauf3 = 0;\n                var speicher = [];\n                var speicher2 = [];\n                for (var lauf = 0; lauf < rückgabe.length; lauf++) {\n\n                    if (rückgabe[lauf].paidAt !== null && rückgabe[lauf].canceled === false) {\n                        if (rückgabe[lauf] !== null) {\n                            speicher[lauf2] = rückgabe[lauf];\n                        }\n                        lauf2 = lauf2 + 1;\n                    }\n                    if (rückgabe[lauf].paidAt === null && rückgabe[lauf].canceled === false) {\n                        if (rückgabe[lauf] !== null) {\n                            speicher2[lauf3] = rückgabe[lauf];\n                        }\n                        lauf3 = lauf3 + 1;\n                    }\n                }\n            }\n            this.setState({ paid: speicher })\n            this.setState({ open: speicher2 })\n        }\n    }\n\n    async cancel(bookingId) {\n        //Storniert eine Buchung mit der angegebenen Buchungs-ID\n        const response = await fetch(Config.BACKEND_BASE_URI + '/api/v2/bookings/' + bookingId, {\n            method: 'PUT',\n            mode: 'cors',\n            cache: 'no-cache',\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': 'Bearer ' + this.context.token,\n            },\n            body: JSON.stringify({ canceled: 1 })\n        }).catch(console.log);\n\n        if (!response.ok) {\n            alert(\"Die Stornierung ist Fehlgeschlagen\");\n            return\n        } else {\n            alert(\"Die Buchung mit der Buchungs-ID \" + bookingId + \" wurde storniert.\");\n            this.componentDidMount();\n        }\n    }\n\n    async approve(bookingId) {\n        //Gibt die Buchung mit der angegebenen Buchungs-ID frei\n        var today = Date.now();\n        const response = await fetch(Config.BACKEND_BASE_URI + '/api/v2/bookings/' + bookingId, {\n            method: 'PUT',\n            mode: 'cors',\n            cache: 'no-cache',\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': 'Bearer ' + this.context.token,\n            },\n            body: JSON.stringify({ paidAt: today })\n        }).catch(console.log);\n\n        if (!response.ok) {\n            alert(\"Die Bestätigung ist fehlgeschlagen\");\n            return\n        } else {\n            alert(\"Die Buchung mit der Buchungs-ID \" + bookingId + \" wurde bestätigt.\");\n            const response2 = await fetch(Config.BACKEND_BASE_URI + '/api/v2/bookings/' + bookingId + '/ticketsBooked/', {\n                method: 'GET',\n                mode: 'cors',\n                cache: 'no-cache',\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': 'Bearer ' + this.context.token,\n                },\n            }).catch(console.log);\n\n            if (!response2.ok) {\n                alert(\"Das Abrufen der Tickets ist fehlgeschlagen!\");\n                return;\n            } else {\n                const rückgabe = await response2.json().catch(console.log);\n                for (var lauf = 0; lauf < rückgabe.length; lauf++) {\n                    this.postTicket(rückgabe[lauf].identifier);\n                }\n            }\n            this.componentDidMount();\n        }\n    }\n\n    async postTicket(identifier) {\n        const response = await fetch(Config.BACKEND_BASE_URI + '/api/v2/tickets/', {\n            method: 'POST',\n            mode: 'cors',\n            cache: 'no-cache',\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': 'Bearer ' + this.context.token,\n            },\n            body: JSON.stringify({\n                identifier: identifier\n            })\n        }).catch(console.log);\n\n        if (!response) {\n            console.log(\"Keine Antwort vom Backend bei der Erstellung eines Tickets!\");\n            return;\n        }\n        if (!response.ok) {\n            console.log(\"Fehler bei der Erstellung eines Tickets!\");\n            return;\n        }\n        if (response.ok) {\n            console.log(\"Ticket wurde erstellt!\")\n            return;\n        }\n    }\n\n    changeStep() {\n        //Leitet den Besucher auf die allgemeine Übersichtsseite des Eventmanagements weiter\n        window.location.assign('#/eventmgmt/shop');\n    }\n\n    searchOpenHandler(event) {\n        //Speichert die Suchanfrage des TextInput-Feldes in den offenen Buchungen  \n        this.setState({ searchOpen: event.target.value });\n    }\n\n    searchPaidHandler(event) {\n        //Speichert die Suchanfrage des TextInput-Feldes in den bezahlten Buchungen\n        this.setState({ searchPaid: event.target.value });\n    }\n\n\n    render() {\n        //stellt die Buchungen und Filterfunktionen im Browser dar. Trennung zwischen offenen und bezahlten Buchungen\n        var ansicht = [];\n        let open;\n        var mail = this.state.searchOpen;\n        if (mail !== \"\") {\n            open = this.state.open.filter((booking) => { return booking.user.email.toLowerCase().includes(mail.toLowerCase()) });\n        } else {\n            open = this.state.open;\n        }\n\n        let paid;\n        var mail2 = this.state.searchPaid;\n        if (mail2 !== \"\") {\n            paid = this.state.paid.filter((booking) => { return booking.user.email.toLowerCase().includes(mail2.toLowerCase()) });\n        } else {\n            paid = this.state.paid;\n        }\n        return (\n            ansicht[0] =\n            <Box className=\"outerBoxOverview\" direction=\"column\" align=\"center\">\n                <Text weight=\"bold\" size=\"xlarge\">Bestellungsübersicht</Text>\n                <Box pad=\"medium\">\n                    <Text>Hier können die Bestellungen eingesehen, freigegeben und storniert werden.</Text>\n                    <Button label=\"Zurück zur Übersichtsseite\" onClick={this.changeStep} pad=\"small\"></Button>\n                </Box>\n                <Box pad=\"medium\">\n                    <Text>Offene Bestellungen: </Text>\n                    <Box pad=\"small\">\n                        <List\n                            pad=\"medium\"\n                            alignSelf=\"stretch\"\n                            margin=\"small\"\n                            primaryKey={(headline1) => { return <b key={headline1.id + 't'}> {headline1.id || 'Unknown'} </b> }}\n                            secondaryKey={(headline1) => { return <span key={headline1.id + 's'}> {\"|   \" + headline1.email + \"   |\" || 'Unknown'} {headline1.createdAt + \"   |\" || 'Unknown'} {headline1.approve + \"   |\" || 'Unknown'} {headline1.cancel + \"   |\" || 'Unknown'} </span> }}\n                            data={this.state.headline1}\n                        />\n                        <TextInput gap=\"small\" placeholder=\"Zum Suchen in den offenen Buchungen bitte eine E-Mail-Adresse eingeben\" value={this.state.searchOpen} onChange={this.searchOpenHandler}></TextInput>\n                        <List\n                            pad=\"medium\"\n                            alignSelf=\"stretch\"\n                            margin=\"small\"\n                            primaryKey={(openBooking) => { return <b key={openBooking.id + 't'}> {openBooking.id || 'Unknown'} </b> }}\n                            secondaryKey={(openBooking) => { return <span key={openBooking.id + 's'}> {\"|  \" + openBooking.user.email + \"    |\" || 'Unknown'}     {(new Date(openBooking.createdAt).toLocaleDateString()) + \"    |\" || 'Unknown'} <Button label=\"Buchung freigeben\" onClick={() => { this.approve(openBooking.id) }}></Button> | <Button label=\"Buchung stornieren\" onClick={() => { this.cancel(openBooking.id) }}></Button></span> }}\n                            data={open}\n                        />\n                    </Box>\n                </Box>\n                <Box pad=\"medium\">\n                    <Text>Abgeschlossene Bestellungen: </Text>\n                    <Box pad=\"small\">\n                        <List\n                            pad=\"medium\"\n                            alignSelf=\"stretch\"\n                            margin=\"small\"\n                            primaryKey={(headline2) => { return <b key={headline2.id + 't'}> {headline2.id || 'Unknown'} </b> }}\n                            secondaryKey={(headline2) => { return <span key={headline2.id + 's'}> {\"|   \" + headline2.email + \"   |\" || 'Unknown'} {headline2.createdAt + \"   |\" || 'Unknown'} {headline2.cancel + \"   |\" || 'Unknown'} </span> }}\n                            data={this.state.headline2}\n                        />\n                        <TextInput gap=\"small\" placeholder=\"Zum Suchen in den bezahlten Buchungen bitte eine E-Mail-Adresse eingeben\" value={this.state.searchPaid} onChange={this.searchPaidHandler}></TextInput>\n                        <List pad=\"medium\"\n                            alignSelf=\"stretch\"\n                            margin=\"small\"\n                            primaryKey={(finishedBooking) => { return <b key={finishedBooking.id + 't'}> {finishedBooking.id || 'Unknown'} </b> }}\n                            secondaryKey={(finishedBooking, test) => { return <span key={finishedBooking.id + 's'}> {\"|  \" + finishedBooking.user.email + \"    |\" || 'Unknown'}     {(new Date(finishedBooking.createdAt).toLocaleDateString()) + \"    |\" || 'Unknown'} <Button label=\"Buchung stornieren\" onClick={() => { this.cancel(finishedBooking.id) }}></Button></span> }}\n                            data={paid}\n                        />\n                    </Box>\n                </Box>\n            </Box>\n        );\n    }\n}\nexport default ShopManagementViewBookings;","import React from 'react';\nimport { Box, Button, Text, Select } from 'grommet';\nimport './ShopManagement.css';\nimport './ShopManagement.js';\nimport UserContext from '../../AppContexts/UserContext';\n\nclass ShopManagementManageSalesStatus extends React.Component {\n\n    static contextType = UserContext;\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            salesStatus: \"Aktivieren\"\n        }\n        this.setValuesAndChangeStep = this.setValuesAndChangeStep.bind(this);\n        this.switchSalesStatus = this.switchSalesStatus.bind(this)\n        this.changeToShopMangement = this.changeToShopMangement.bind(this)\n    }\n\n    switchSalesStatus() {\n        if (this.props.salesStatus) {\n            return <Text weight=\"bold\">Aktiv</Text>\n        }\n        if (!this.props.salesStatus) {\n            return <Text weight=\"bold\">Nicht Aktiv</Text>\n        }\n    }\n\n    //Change Values of State into Boolean, compare new Sales Status with props. If Sales Status has changed Execute props Function to Change. \n    setValuesAndChangeStep() {\n        var salesStatusBoolean = \"\"\n        if (this.state.salesStatus === \"Aktivieren\") {\n            salesStatusBoolean = true;\n        }\n        if (this.state.salesStatus === \"Deaktivieren\") {\n            salesStatusBoolean = false;\n        }\n\n\n        if (salesStatusBoolean === this.props.salesStatus) {\n            console.log(\"Der Sales Status wurde wurde nicht verändert! Es wird keine Nachricht an das Backend gesendet\")\n            window.location.assign(\"#/eventmgmt/shop\");\n            return;\n        }\n        if (salesStatusBoolean !== this.props.salesStatus) {\n            this.props.setConfSalesStatus(salesStatusBoolean);\n            window.location.assign(\"#/eventmgmt/shop\");\n        }\n    }\n\n    changeToShopMangement() {\n        window.location.assign(\"#/eventmgmt/shop\");\n    }\n\n    render() {\n        var Ansicht = [];\n        return (\n            Ansicht[0] =\n            <Box pad=\"medium\" align=\"center\" style={{ position: 'absolute', left: '40%', top: '10%' }}>\n                <Box className=\"outerBoxOverview\" direction=\"column\" align=\"center\">\n                    <Text weight=\"bold\" size=\"xxlarge\">Status des Verkaufs ändern</Text>\n                    <Box pad=\"medium\">\n                        <Text>Der Verkauf ist derzeit: {this.switchSalesStatus()}</Text>\n                    </Box>\n                    <Box>\n                        <Select\n                            options={['Aktivieren', 'Deaktivieren']}\n                            value={this.state.salesStatus}\n                            onChange={({ option }) => { this.setState({ salesStatus: option }) }}\n                        />\n\n                    </Box>\n                    <Box direction=\"row\" pad=\"medium\">\n                    <Button label=\"Zurück\" onClick={this.changeToShopMangement}></Button>\n                    <Button label=\"Bestätigen\" onClick={this.setValuesAndChangeStep}></Button>\n                    </Box>\n                </Box >\n            </Box>\n        );\n    }\n}\nexport default ShopManagementManageSalesStatus;\n","import { CSVReader } from 'react-papaparse';\nimport React from 'react';\nimport { Box, Button, Text, List} from 'grommet';\n\nclass ShopManagamentAbsolventenListe extends React.Component {\n\n    constructor(props) {\n        super(props);\n        this.state = { listeEingelesen: false, initialeListe: [] };\n        this.transferListForCreation = this.transferListForCreation.bind(this);\n        this.switchBackToShopmanagament = this.switchBackToShopmanagament.bind(this)\n    }\n\n    //Clean Data from CSV-Reader and Save cleaned List into Componentstate \n    handleOnDrop = (eingleseneListe) => {\n        var liste = [];\n        var gefilterteListe = eingleseneListe.filter(data => data.data.eMail.match(\"@\"))\n        gefilterteListe.forEach((element) => {\n            var newElement = {eMail: element.data.eMail, Name: element.data.Name};\n            liste.push(newElement);\n        }\n        )\n        this.setState({ listeEingelesen: true, initialeListe: liste })\n    }\n\n    handleOnError = (err, file, inputElem, reason) => {\n        console.log(err)\n    }\n\n    handleOnRemoveFile = (data) => {\n\n    }\n\n    //Send Request from ShopManagement for each E-Mail-Address in List\n    async transferListForCreation() {\n        var emailList = this.state.initialeListe;\n        var counter = 0\n        for (const element of emailList) {\n            var response = await this.props.createOTPwithEmailAndRole(element.eMail, 1);\n            console.log(response);\n            if (response === 1){\n                counter = counter + response   \n            }\n            if(response !== 1){\n                console.log(\"Fehler beim Senden der One Time Passwörter in Unterkomponentte: \" + response);\n            }  \n        }\n        console.log(\"One Time Passwörter für: \" + counter + \" E-Mail-Adressen erstellt!\");\n        this.props.setShopConfigInitialList(true);\n        window.location.assign(\"#/eventmgmt/shop\");\n    }\n\n    //Change View to ShopManagement\n    switchBackToShopmanagament() {\n        window.location.assign(\"#/eventmgmt/shop\")\n    }\n\n    render() {\n        var Ansicht = [];\n        var emailList = this.state.initialeListe;\n        Ansicht =\n            <Box style={{ position: 'absolute', left: '40%', top: '10%' }}>\n                <Box pad=\"medium\">\n                    <Text size=\"large\" weight=\"bold\">Einlesen der Absolventen Liste</Text>\n                </Box>\n\n                <Box className=\"Eingaben\">\n                    <Box pad=\"medium\">\n                        <Text>Bitte eine Liste in der folgenden Darstellung einlesen:</Text>\n                        <span><Text weight=\"bold\">Header: </Text><Text>eMail; Name</Text></span>\n                        <span><Text weight=\"bold\">Datensatz 1: </Text><Text>Beispiel@web.de; Mustermann, Max</Text></span>\n                    </Box>\n                    <CSVReader\n                        onDrop={this.handleOnDrop}\n                        onError={this.handleOnError}\n                        config={{\n                            delimiter: \";\",\n                            header: true\n                        }}\n                        addRemoveButton\n                        onRemoveFile={this.handleOnRemoveFile}\n                    >\n                        <span>Drop CSV file here or click to upload.</span>\n                    </CSVReader>\n                </Box>\n\n\n                <List className=\"langeListe\" pad=\"medium\"\n                    primaryKey=\"eMail\"\n                    secondaryKey=\"Name\"\n                    data={emailList}\n                />\n\n                <Box pad=\"medium\">\n                    <Button onClick={this.transferListForCreation} label=\"Passwörter erstellen\"></Button>\n                </Box>\n\n                <Box pad=\"medium\">\n                    <Button onClick={this.switchBackToShopmanagament} label=\"Zurück\" ></Button>\n                </Box>\n\n            </Box>\n        return Ansicht;\n    }\n}\nexport default ShopManagamentAbsolventenListe;","import React from 'react';\nimport { Box, Button, Heading, Text, TextInput, Select } from 'grommet';\nimport './ShopManagement.css';\nimport './ShopManagement.js';\nimport Config from '../../config';\nimport UserContext from '../../AppContexts/UserContext';\n\nclass ShopManagementPaymentOptions extends React.Component {\n\n    static contextType = UserContext;\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            receiverName: \"\", bankName: \"\", iban: \"\", bic: \"\", verwendung: \"\", bankAktiviert: false, payPalLink: \"\", payPalMail: \"\", payPalVerwendung: \"\",\n            payPalAktiviert: false, bankStatus: 'Deaktiviert', payPalStatus: 'Deaktiviert'\n        }\n        this.changeStep = this.changeStep.bind(this);\n        this.receiverNameHandler = this.receiverNameHandler.bind(this);\n        this.bankNameHandler = this.bankNameHandler.bind(this);\n        this.ibanHandler = this.ibanHandler.bind(this);\n        this.bicHandler = this.bicHandler.bind(this);\n        this.verwendungHandler = this.verwendungHandler.bind(this);\n        this.assignBankValues = this.assignBankValues.bind(this);\n        this.payPalLinkHandler = this.payPalLinkHandler.bind(this);\n        this.payPalMailHandler = this.payPalMailHandler.bind(this);\n        this.payPalVerwendungHandler = this.payPalVerwendungHandler.bind(this);\n        this.assignPayPalValues = this.assignPayPalValues.bind(this);\n        this.switchBankStatus = this.switchBankStatus.bind(this);\n        this.setBankValuesAndChangeStep = this.setBankValuesAndChangeStep.bind(this);\n        this.switchPayPalStatus = this.switchPayPalStatus.bind(this);\n        this.setPayPalValuesAndChangeStep = this.setPayPalValuesAndChangeStep.bind(this);\n    }\n\n    changeStep() {\n        //Leitet den Besucher auf die Übersichtsseite des Eventmanagements weiter\n        window.location.assign('#/eventmgmt/shop');\n    }\n\n    componentDidMount(){\n        //Lädt die aktuellen Stati der Zahlungsmethoden (Aktiviert / Deaktiviert)\n        if(this.props.bankStatus){\n            this.setState({ bankStatus: 'Aktiviert' });\n        }\n        if(!this.props.bankStatus){\n            this.setState({ bankStatus : 'Deaktiviert' });\n        }\n        if(this.props.payPalStatus){\n            this.setState({ payPalStatus: 'Aktiviert' });\n        }\n        if(!this.props.payPalStatus){\n            this.setState({ payPalStatus: 'Deaktiviert' });\n        }\n    }\n\n    receiverNameHandler(event) {\n        //Aktualisiert den Wert des InputFields für den Empfänger einer Bankverbindung\n        this.setState({ receiverName: event.target.value });\n    }\n\n    bankNameHandler(event) {\n        //Aktualisiert den Wert des InputFields für den Namen einer Bank \n        this.setState({ bankName: event.target.value });\n    }\n\n    ibanHandler(event) {\n        //Aktualisiert den Wert des InputFields für die IBAN einer Bank\n        this.setState({ iban: event.target.value });\n    }\n\n    bicHandler(event) {\n        //Aktualisiert den Wert des InputFields für die BIC einer Bank\n        this.setState({ bic: event.target.value });\n    }\n\n    verwendungHandler(event) {\n        //Aktualisiert den Wert des InputFields für den Verwendungszweck bei Banküberweisungen\n        this.setState({ verwendung: event.target.value });\n    }\n\n    async assignBankValues() {\n        //Schreibt die festgelegten Werte für die Bankverbindung ins Backend\n        var empfänger = this.state.receiverName;\n        var name_der_bank = this.state.bankName;\n        var iban = this.state.iban;\n        var bic = this.state.bic;\n        var verwendungszweck = this.state.verwendung;\n        var bankAktiviert = this.state.bankAktiviert;\n        var response = await fetch(Config.BACKEND_BASE_URI + \"/api/v2/paymentOptions\", {\n            method: 'PUT', // *GET, POST, PUT, DELETE, etc.\n            mode: 'cors', // no-cors, *cors, same-origin\n            cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': 'Bearer ' + this.context.token,\n            },\n            body: JSON.stringify({\n                Bank: {\n                    Empfänger: empfänger,\n                    Name_der_Bank: name_der_bank,\n                    IBAN: iban,\n                    BIC: bic,\n                    Verwendungszweck: verwendungszweck,\n                    Aktiviert: bankAktiviert\n                },\n            }\n            )\n        }).catch(console.log)\n\n        if (!response) {\n            console.log(\"Keine Antwort beim Konfigurieren der Bankverbindung vom Backend-Server erhalten!\");\n            return;\n        }\n        if (!response.ok) {\n            console.log(\"Fehler beim Setzten der Werte für die Bankverbindung: \" + response.message);\n            return;\n        }\n\n        if (response.ok) {\n            console.log(\"Die Konfiguration der Bankverbindung wurde erfolgreich geändert. Die gesetzten Werte sind: Empfänger: \" + empfänger + \", Name der Bank: \" + name_der_bank +\n                \", IBAN: \" + iban + \", BIC: \" + bic + \", Verwendungszweck: \" + verwendungszweck);\n        }\n    }\n\n    payPalLinkHandler(event) {\n        //Aktualisiert den Wert des InputFields für den Link zum PayPal-Konto\n        this.setState({ payPalLink: event.target.value });\n    }\n\n    payPalMailHandler(event) {\n        //Aktualisiert den Wert des InputFields für den Mail des PayPal-Kontos\n        this.setState({ payPalMail: event.target.value });\n    }\n\n    payPalVerwendungHandler(event) {\n        //Aktualisiert den Wert des InputFields für den Verwendungszweck, welcher bei der Zahlung über Paypal angegeben werden soll\n        this.setState({ payPalVerwendung: event.target.value });\n    }\n\n    async assignPayPalValues() {\n        //Schreibt die festgelegten Werte für die PayPal-Verbindung ins Backend\n        var payPalLink = this.state.payPalLink;\n        var payPalMail = this.state.payPalMail;\n        var payPalVerwendung = this.state.payPalVerwendung;\n        var payPalAktiviert = this.state.payPalAktiviert;\n        var response = await fetch(Config.BACKEND_BASE_URI + \"/api/v2/paymentOptions\", {\n            method: 'PUT', // *GET, POST, PUT, DELETE, etc.\n            mode: 'cors', // no-cors, *cors, same-origin\n            cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': 'Bearer ' + this.context.token,\n            },\n            body: JSON.stringify({\n                PayPal: {\n                    PayPal_Link: payPalLink,\n                    PayPal_Mail: payPalMail,\n                    PayPal_Verwendung: payPalVerwendung,\n                    Aktiviert: payPalAktiviert\n                }\n\n            })\n        }).catch(console.log)\n\n        if (!response) {\n            console.log(\"Keine Antwort beim Konfigurieren der PayPal-Verbindung vom Backend-Server erhalten!\");\n            return;\n        }\n        if (!response.ok) {\n            console.log(\"Fehler beim Setzten der Werte für die PayPal-Verbindung: \" + response.message);\n            return;\n        }\n\n        if (response.ok) {\n            console.log(\"Die Konfiguration der PayPal-Verbindung wurde erfolgreich geändert. Die gesetzten Werte sind: PayPal-Link: \" + payPalLink + \", PayPal-Mail: \" + payPalMail +\n                \", PayPal-Verwendungszweck: \" + payPalVerwendung);\n        }\n    }\n\n    switchBankStatus() {\n        //Ändert den angezeigten Status, wenn der Status der Bankverbindung geändert wird\n        if (this.props.bankStatus) {\n            return <Text weight=\"bold\"> Aktiviert </Text>\n        }\n        if (!this.props.bankStatus) {\n            return <Text weight=\"bold\"> Deaktiviert </Text>\n        }\n    }\n\n    setBankValuesAndChangeStep() {\n        //Setzt den Status für die QuickView der Bankverbindung in der Shopmanagement-Startseite\n        var bankStatusBoolean = \"\";\n        if (this.state.bankStatus === 'Deaktiviert') {\n            bankStatusBoolean = false;\n        }\n        if (this.state.bankStatus === 'Aktiviert') {\n            bankStatusBoolean = true;\n        }\n        if (bankStatusBoolean === this.props.bankStatus) {\n            alert(\"Der Status der Bankverbindung wurde wurde nicht verändert! Es wird keine Nachricht an das Backend gesendet\")\n            return;\n        }\n        if (bankStatusBoolean !== this.props.bankStatus) {\n            this.props.setConfBankStatus(bankStatusBoolean);\n        }\n\n    }\n\n    switchPayPalStatus() {\n        //Ändert den angezeigten Status, wenn der Status der PayPal-Verbindung geändert wird\n        if (this.props.payPalStatus) {\n            return <Text weight=\"bold\"> Aktiviert </Text>\n        }\n        if (!this.props.payPalStatus) {\n            return <Text weight=\"bold\"> Deaktiviert </Text>\n        }\n    }\n\n    setPayPalValuesAndChangeStep() {\n        //Setzt den Status für die QuickView der PayPal-Verbindung in der Shopmanagement-Startseite\n        var payPalStatusBoolean = \"\";\n        if (this.state.payPalStatus === 'Deaktiviert') {\n            payPalStatusBoolean = false;\n        }\n        if (this.state.payPalStatus === 'Aktiviert') {\n            payPalStatusBoolean = true;\n        }\n        if (payPalStatusBoolean === this.props.payPalStatus) {\n            alert(\"Der Status der Bankverbindung wurde wurde nicht verändert! Es wird keine Nachricht an das Backend gesendet\");\n            return;\n        }\n        if (payPalStatusBoolean !== this.props.payPalStatus) {\n            this.props.setConfPayPalStatus(payPalStatusBoolean);\n        }\n\n    }\n\n\n    render() {\n        //Stellt die Festlegung und Aktivierung bzw. Deaktivierung von Zahlungsmethoden im Browser dar\n        var ansicht = [];\n        return (\n            ansicht[0] =\n            <Box className=\"outerBoxOverview\" direction=\"column\" align=\"center\">\n                <Heading align=\"center\" size=\"small\">Konfiguration der Zahlungsmethoden</Heading>\n                <Box pad=\"small\" gap=\"small\" align=\"center\">\n                    <Box pad=\"medium\" gap=\"small\">\n                        <Text><b>Konfiguration einer Bankverbindung</b></Text>\n                        <TextInput placeholder=\"Name des Empfängers\" value={this.state.receiverName} onChange={this.receiverNameHandler}></TextInput>\n                        <TextInput placeholder=\"Name der Bank\" value={this.state.bankName} onChange={this.bankNameHandler}></TextInput>\n                        <TextInput placeholder=\"IBAN\" value={this.state.iban} onChange={this.ibanHandler}></TextInput>\n                        <TextInput placeholder=\"BIC\" value={this.state.bic} onChange={this.bicHandler}></TextInput>\n                        <TextInput placeholder=\"Verwendungszweck\" value={this.state.verwendung} onChange={this.verwendungHandler}></TextInput>\n                        <Button label=\"Angaben für die Bankverbindung bestätigen\" onClick={this.assignBankValues}></Button>\n                        <Box>\n                            <Text>Die Bankverbindung ist derzeit: {this.switchBankStatus()} </Text>\n                        </Box>\n                        <Box>\n                            <Select\n                                options={['Aktiviert', 'Deaktiviert']}\n                                value={this.state.bankStatus}\n                                onChange={({ option }) => { this.setState({ bankStatus: option }) }}\n                            />\n                            <Button label=\"Auswahl bestätigen\" onClick={this.setBankValuesAndChangeStep}></Button>\n                        </Box>\n                    </Box>\n                    <Box pad=\"medium\" gap=\"small\">\n                        <Text><b>Konfiguration einer PayPal-Verbindung</b></Text>\n                        <TextInput placeholder=\"PayPal.me-Link\" value={this.state.payPalLink} onChange={this.payPalLinkHandler}></TextInput>\n                        <TextInput placeholder=\"PayPal Mail-Adresse\" value={this.state.payPalMail} onChange={this.payPalMailHandler}></TextInput>\n                        <TextInput placeholder=\"PayPal Verwendungszweck\" value={this.state.payPalVerwendung} onChange={this.payPalVerwendungHandler}></TextInput>\n                        <Button label=\"Angaben für die PayPal-Verbindung bestätigen\" onClick={this.assignPayPalValues}></Button>\n                        <Box>\n                        <Text>Die PayPal-Verbindung ist derzeit: {this.switchPayPalStatus()} </Text>\n                        </Box>\n                        <Box>\n                            <Select\n                                options={['Aktiviert', 'Deaktiviert']}\n                                value={this.state.payPalStatus}\n                                onChange={({ option }) => { this.setState({ payPalStatus: option }) }}\n                            />\n                            <Button label=\"Auswahl bestätigen\" onClick={this.setPayPalValuesAndChangeStep}></Button>\n                        </Box>\n                    </Box>\n                    <Button label=\"Zurück zur Übersicht\" onClick={this.changeStep}></Button>\n                </Box>\n            </Box >\n        );\n    }\n}\nexport default ShopManagementPaymentOptions;","import React from 'react';\nimport { Box, Button, Text, TextInput, Select } from 'grommet';\nimport './ShopManagement.css';\nimport './ShopManagement.js';\n\nclass ShopManagementManageOTPS extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            OTP: \"\",\n            role: 1,\n            lastEmail: \"\",\n            lastRole: \"\"\n        }\n\n        this.changeToShopMangement = this.changeToShopMangement.bind(this)\n        this.addOTP = this.addOTP.bind(this);\n    }\n\n    changeToShopMangement() {\n        window.location.assign(\"#/eventmgmt/shop\");\n    }\n\n    async addOTP() {\n        var role;\n        if (this.state.role === \"Administrator\") {\n            role = 0;\n        }\n        if (this.state.salesStatus === \"Absolvent\") {\n            role = 1;\n        }\n        var response = await this.props.createOTPwithEmailAndRole(this.state.OTP, role)\n        if (response === 1) {\n            this.setState({ lastEmail: this.state.OTP, lastRole: this.state.role })\n        }\n    }\n\n    render() {\n        var Ansicht = [];\n        return (\n            Ansicht[0] =\n            <Box className=\"outerBoxOverview\" direction=\"column\" align=\"center\" style={{ position: 'absolute', left: '40%', top: '10%' }}>\n                <Text weight=\"bold\" size=\"xxlarge\">Verwaltung der One Time Passwörter</Text>\n                <Box pad=\"medium\" direction=\"column\">\n                    <Text>Letzter hinzugefügter Datensatz</Text>\n                    <Text weight=\"bold\">E-Mail-Adresse: {this.state.lastEmail} </Text>\n                    <Text weight=\"bold\">Rolle: {this.state.lastRole} </Text>\n\n\n                </Box>\n                <Box pad=\"medium\" direction=\"row\">\n                    <TextInput\n                        placeholder=\"Hier E-Mail-Adresse eingeben\"\n                        value={this.state.OTP}\n                        onChange={(event) => { this.setState({ OTP: event.target.value }) }}\n                    />\n                    <Select\n                        placeholder=\"Rolle auswählen\"\n                        options={['Administrator', 'Absolvent']}\n                        value={this.state.role}\n                        onChange={({ option }) => { this.setState({ role: option }) }}\n                    />\n                </Box>\n                <Box pad=\"medium\" direction=\"row\">\n                    <Button label=\"Zurück\" onClick={this.changeToShopMangement}></Button>\n                    <Button label=\"Hinzufügen\" onClick={this.addOTP}></Button>\n                </Box>\n            </Box >\n        );\n    }\n}\nexport default ShopManagementManageOTPS;\n","import React from 'react';\nimport { Box, Button, Text, List, TextInput } from 'grommet';\nimport Config from '../../config';\nimport './ShopManagement.css';\nimport './ShopManagement.js';\nimport UserContext from '../../AppContexts/UserContext'\n\n\nclass ShopManagementViewOTPs extends React.Component {\n\n    static contextType = UserContext;\n\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            OTPs: [],\n            searchOTP: \"\",\n            headline1: [{\n                id: \"ID des One Time Passworts\", email: \"E-Mail-Adresse des Benutzers\",\n                targetRole: \"Rolle für den Benutzer\", createdAt: \"Erstellungsdatum\", cancel: \"OTP löschen\"\n            }],\n        };\n        this.getOTPs = this.getOTPs.bind(this);\n        this.changeStep = this.changeStep.bind(this);\n        this.componentDidMount = this.componentDidMount.bind(this);\n        this.searchOTPHandler = this.searchOTPHandler.bind(this);\n        this.deleteOtp = this.deleteOtp.bind(this);\n    }\n\n    componentDidMount() {\n        this.getOTPs();\n    }\n\n    //Get all OTPs from Database\n    async getOTPs() {\n        const response = await fetch(Config.BACKEND_BASE_URI + '/api/v2/oneTimePasses/', {\n            method: 'GET',\n            mose: 'cors',\n            cache: 'no-cache',\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': 'Bearer ' + this.context.token,\n            },\n        }).catch(console.log);\n\n        if (!response.ok) {\n            console.log(response.message)\n            return;\n        } else {\n\n            //Change Value from Roles to String\n            var otps = await response.json().catch(console.log);\n            var otpsRole = []\n            otps.forEach(otp => {\n                if(otp.targetRole === 1){ \n                    otp.targetRole = \"Absolvent\";\n                }\n                else if(otp.targetRole === 0){\n                    otp.targetRole = \"Administrator\"\n                }else{\n                    otp.targetRole = \"Undefined\"\n                }\n                otpsRole.push(otp)\n                \n            });\n            this.setState({ OTPs: otpsRole })\n        }\n    }\n    //Delete OTP from Database\n    async deleteOtp(optId) {\n        const response = await fetch(Config.BACKEND_BASE_URI + '/api/v2/oneTimePasses/' + optId, {\n            method: 'DELETE',\n            mode: 'cors',\n            cache: 'no-cache',\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': 'Bearer ' + this.context.token,\n            },\n        }).catch(console.log);\n\n        if (!response.ok) {\n            alert(\"Die Lösung des One Time Passworts ist Fehlgeschlagen\");\n            return\n        } else {\n            alert(\"Das One Time Passwort mit der: \" + optId + \" wurde gelöscht.\");\n            this.componentDidMount();\n        }\n    }\n\n    //Switch View to ShopManagement\n    changeStep() {\n        window.location.assign('#/eventmgmt/shop');\n    }\n\n    //Get ChangeEvent from Select and Set to component state\n    searchOTPHandler(event) {\n        this.setState({ searchOTP: event.target.value });\n    }\n\n    render() {\n        var ansicht = [];\n        let otps;\n        var mail = this.state.searchOTP;\n        if (mail !== \"\") {\n            otps = this.state.OTPs.filter((otp) => { return otp.email.toLowerCase().includes(mail.toLowerCase()) });\n        } else {\n            otps = this.state.OTPs;\n        }\n\n        return (\n            ansicht[0] =\n            <Box className=\"outerBoxOverview\" direction=\"column\" align=\"center\">\n                <Text weight=\"bold\" size=\"xlarge\">One Time Passwort Übersicht</Text>\n                <Box pad=\"medium\"></Box>\n                    <Text>Hier können die One Time Passwörter angezeigt und gelöscht werden.</Text>\n                <Box pad=\"medium\"></Box>\n                    <Button label=\"Zurück zur Übersichtsseite\" onClick={this.changeStep} pad=\"small\"></Button>\n                    <Box pad=\"medium\"></Box>\n                        <Box pad=\"small\">\n                            <List\n                                pad=\"medium\"\n                                alignSelf=\"stretch\"\n                                margin=\"small\"\n                                primaryKey={(headline1) => { return <b key={headline1.id + 't'}> {headline1.id || 'Unknown'} </b> }}\n                                secondaryKey={(headline1) => {\n                                    return <span key={headline1.id + 's'}> {\"|   \" + headline1.email + \"   |\" || 'Unknown'}\n                                        {headline1.createdAt + \"   |\" || 'Unknown'} {headline1.cancel + \"   |\" || 'Unknown'} </span>\n                                }}\n                                data={this.state.headline1}\n                            />\n                            <TextInput gap=\"small\" placeholder=\"Zum Suchen in den offenen Buchungen bitte eine E-Mail-Adresse eingeben\" value={this.state.searchOTP} onChange={this.searchOTPHandler}></TextInput>\n                            <List\n                                pad=\"medium\"\n                                alignSelf=\"stretch\"\n                                margin=\"small\"\n                                primaryKey={(otp) => { return <b key={otp.id + 't'}> {otp.id || 'Unknown'} </b> }}\n                                secondaryKey={(otp) => { return <span key={otp.id + 's'}> {\"|  \" + otp.email + \"    |\" || 'Unknown'} {otp.targetRole + \"    |\" || 'Unknown'}   {(new Date(otp.createdAt).toLocaleDateString()) || 'Unknown'} | <Button label=\"OTP löschen\" onClick={() => { this.deleteOtp(otp.id) }}></Button></span> }}\n                                data={otps}\n                            />\n                        </Box>\n            </Box>\n        );\n    }\n}\nexport default ShopManagementViewOTPs;","import React from 'react';\nimport { Box, Button, Text, DataTable } from 'grommet';\nimport Config from '../../config';\nimport './ShopManagement.css';\nimport ShopManagementConfMaxTickets from './ShopManagementConfMaxTickets';\nimport ShopManagementViewBookings from './ShopManagementViewBookings';\nimport ShopManagementManageSalesStatus from './ShopManagementManageSalesStatus';\nimport ShopManagamentAbsolventenListe from './ShopManagamentAbsolventenListe';\nimport ShopManagementPaymentOptions from './ShopManagementPaymentOptions';\nimport { Switch, Route } from \"react-router-dom\";\nimport UserContext from '../../AppContexts/UserContext';\nimport ShopManagementManageOTPS from './ShopManagementManageOTPS'\nimport ShopManagementViewOTPs from './ShopManagementViewOTPs'\n\nclass DataQuickViewMaxTickets extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n        };\n        this.callShopManagamentConfTickets = this.callShopManagamentConfTickets.bind(this);\n    }\n\n    //Switch to Component ConfMaxTickets\n    callShopManagamentConfTickets() {\n        window.location.assign(\"#/eventmgmt/shop/ConfMaxTickets\")\n    }\n\n    render() {\n        return (\n            <Box name=\"purchaseableTicketsPerPerson\" className=\"quickViewOuterBox\" >\n                <Text>Ticketanzahl die ein Absolvent erwerben kann:</Text>\n                <Box className=\"platzhalter\" ></Box>\n                <DataTable className=\"quickViewDatatables\"\n                    columns={[\n                        {\n                            property: 'Tickettype',\n                            header: <Text weight=\"bold\">Tickettyp</Text>,\n                            primary: true,\n                        },\n                        {\n                            property: 'Anzahl',\n                            header: <Text weight=\"bold\">freigebene Anzahl</Text>,\n                        },\n                    ]}\n                    data={this.props.maxTicketmenge}\n                />\n                <Box className=\"platzhalter\" ></Box>\n                <Box className=\"ButtonBox\">\n                    <Button className=\"buttonInDash\" label=\"Ticketanzahl konfigurieren\" onClick={this.callShopManagamentConfTickets}></Button>\n                </Box>\n            </Box>\n        )\n    }\n}\n\nclass DataQuickViewPayment extends React.Component {\n    //Gibt einen Schnellüberblick über die eingestellten Zahlungsmethoden und deren Status\n    constructor(props) {\n        super(props);\n        this.state = {};\n    }\n\n    //Leitet den User zur Konfiguration der Zahlungmethoden weiter\n    callConfiguratePaymentMethods() {\n        window.location.assign(\"#/eventmgmt/shop/paymentOptions\")\n    }\n\n    componentDidMount() {\n        //Ruft beim Laden der Komponente den Aktuellen Status der Bank- und PayPal-Verbindung ab\n        this.props.getBankStatus();\n        this.props.getPayPalStatus();\n    }\n\n\n    render() {\n        //Stellt den Schnellüberblick für die Zahlungsmethoden im Browser dar\n        var bezahl = [];\n        if (this.props.bankStatus) { bezahl.push({ BezahlOption: \"Banküberweisung\", Status: \"Aktiv\" }) };\n        if (!this.props.bankStatus) { bezahl.push({ BezahlOption: \"Banküberweisung\", Status: \"Deaktiviert\" }) };\n        if (this.props.payPalStatus) { bezahl.push({ BezahlOption: \"PayPal\", Status: \"Aktiv\" }) };\n        if (!this.props.payPalStatus) { bezahl.push({ BezahlOption: \"PayPal\", Status: \"Deaktiviert\" }) };\n\n        return (\n            <Box name=\"paymentOptions\" className=\"quickViewOuterBox\">\n                <Text>Übersicht der konfigurierten Bezahloptionen:</Text>\n                <Box className=\"platzhalter\" ></Box>\n                <DataTable className=\"quickViewDatatables\"\n                    columns={[\n                        {\n                            property: 'BezahlOption',\n                            header: <Text weight=\"bold\">Bezahloption</Text>,\n                            primary: true,\n                        },\n                        {\n                            property: 'Status',\n                            header: <Text weight=\"bold\">Status?</Text>,\n                        },\n                    ]}\n                    data={bezahl}\n                />\n                <Box className=\"platzhalter\" ></Box>\n                <Box className=\"ButtonBox\">\n                    <Button className=\"buttonInDash\" label=\"Bezahloptionen konfigurieren\" onClick={this.callConfiguratePaymentMethods}></Button>\n                </Box>\n            </Box>\n        )\n    }\n}\nclass DataQuickViewBookings extends React.Component {\n    //Gibt einen Schnellüberblick über die im System vorhandenen Buchungen\n    constructor(props) {\n        super(props);\n        this.state = {\n        };\n        this.callShopManagementViewBookings = this.callShopManagementViewBookings.bind(this);\n    }\n\n    callShopManagementViewBookings() {\n        //Leitet den User zur detailierten Buchungsübersicht und -freigabe weiter\n        window.location.assign('#/eventmgmt/shop/viewBookings')\n    }\n\n    render() {\n        //Stellt den Schnellüberblick für die Buchungen im Browser dar\n        return (\n            <Box name=\"statusBookings\" className=\"quickViewOuterBox\">\n                <Text>Anzahl und Status der Buchungen im System:</Text>\n                <Box className=\"platzhalter\" ></Box>\n                <DataTable className=\"quickViewDatatables\"\n                    columns={[\n                        {\n                            property: 'status',\n                            header: <Text weight=\"bold\">Status</Text>,\n                            primary: true,\n                        },\n                        {\n                            property: 'Anzahl',\n                            header: <Text weight=\"bold\">Anzahl</Text>,\n                        },\n                    ]}\n                    data={this.props.statusBookings}\n                />\n                <Box className=\"platzhalter\" ></Box>\n                <Box className=\"ButtonBox\">\n                    <Button className=\"buttonInDash\" label=\"Buchungen \" onClick={this.callShopManagementViewBookings}></Button>\n                </Box>\n            </Box>\n        )\n    }\n}\n\nclass DataQuickViewSalesStatistics extends React.Component {\n    //Schnellüberblick über die Anzahl der Tickets, die Vorhanden/Verkauft/Storniert sind, sowie über die Anzahl der Rollstuhlfahrer\n    constructor(props) {\n        super(props);\n        this.state = {\n        };\n\n    }\n\n\n    render() {\n        //Stellt den Schnellüberblick über die Tickets im Browser dar\n        return (\n            <Box name=\"statusSales\" className=\"quickViewOuterBox\">\n                <Text>Anzahl und Status der Ticketbuchungen im System:</Text>\n                <Box pad=\"small\"></Box>\n                <DataTable className=\"quickViewDatatables\"\n                    columns={[\n                        {\n                            property: 'status',\n                            header: <Text weight=\"bold\">Status</Text>,\n                            primary: true,\n                        },\n                        {\n                            property: 'Anzahl',\n                            header: <Text weight=\"bold\">Anzahl</Text>,\n                        },\n                    ]}\n                    data={this.props.statusSales}\n                />\n                <Box className=\"platzhalter\" ></Box>\n            </Box>\n        )\n    }\n}\n\nclass DataQuickViewManageSales extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n        };\n        this.callShopManagementManageSales = this.callShopManagementManageSales.bind(this);\n    }\n\n\n    callShopManagementManageSales() {\n        window.location.assign(\"#/eventmgmt/shop/ManageSalesStatus\")\n    }\n\n\n    render() {\n        var salesStatus;\n        if (this.props.salesStatus) { salesStatus = [{ Beschreibung: \"Ticketverkauf\", Status: \"Aktiv\" }]; };\n        if (!this.props.salesStatus) { salesStatus = [{ Beschreibung: \"Ticketverkauf\", Status: \"Deaktiviert\" }]; };\n\n        return (\n            <Box name=\"boxManageSales\" className=\"quickViewOuterBox\">\n                <Text>Anzeige für den Status und das aktivieren</Text>\n                <Text>und deaktivieren des Ticketverkaufs</Text>\n                <Box pad=\"small\"></Box>\n                <DataTable className=\"quickViewDatatables\"\n                    columns={[\n                        {\n                            property: 'Beschreibung',\n                            header: <Text weight=\"bold\">Status</Text>,\n                            primary: true,\n                        },\n                        {\n                            property: 'Status',\n                            header: <Text weight=\"bold\">Anzahl</Text>,\n                        },\n                    ]}\n                    data={salesStatus}\n                />\n                <Box className=\"platzhalter\" ></Box>\n                <Box Class-Name=\"ButtonBox\">\n                    <Button className=\"buttonInDash\" label=\"Status ändern\" onClick={this.callShopManagementManageSales}></Button>\n                </Box>\n            </Box>\n        )\n    }\n}\n\nclass DataQuickViewCreateOTPS extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n        };\n\n        this.callShopManagementCreateOTPS = this.callShopManagementCreateOTPS.bind(this)\n    }\n\n    callShopManagementCreateOTPS() {\n        window.location.assign(\"#/eventmgmt/shop/createOTPS\")\n    }\n\n    switchInitialList() {\n        if (this.props.initialList) {\n            return \"Eingelesen\"\n        }\n        if (!this.props.initialList) {\n            return \"Nicht Eingelesen\"\n        }\n\n    }\n\n    render() {\n        return (\n            <Box name=\"CreateOTPS\" className=\"quickViewOuterBox\">\n                <Text>Einlesen einer E-Mail Liste zum Erstellen</Text>\n                <Text>von One Time Passwörtern:</Text>                \n                <Box pad=\"small\"></Box>\n\n                <Text>Initiale Erstellung durchgeführt: </Text><Text weight=\"bold\">{this.switchInitialList()}</Text>\n                <Box className=\"platzhalter\" ></Box>\n                <Box Class-Name=\"ButtonBox\">\n                    <Button className=\"buttonInDash\" label=\"Liste einlesen\" onClick={this.callShopManagementCreateOTPS}></Button>\n                </Box>\n            </Box>\n        )\n    }\n}\nclass DataQuickViewManageOTPS extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n        };\n\n        this.callShopManagementCreateOTPS = this.callShopManagementCreateOTPS.bind(this)\n    }\n\n    callShopManagementCreateOTPS() {\n        window.location.assign(\"#/eventmgmt/shop/ManageOTPS\")\n    }\n\n    render() {\n        return (\n            <Box name=\"CreateOTPS\" className=\"quickViewOuterBox\">\n                <Text weight=\"bold\" size=\"large\">Erstellen neuer One Time Passwörter</Text>\n                <Box pad=\"small\" align=\"center\">\n                    <Text>Zum Erstellen neuer One Time Passwörter für:</Text>\n                    <Text weight=\"bold\">- Administratoren</Text>\n                    <Text weight=\"bold\">- Absolventen</Text>\n                </Box>\n                <Button className=\"buttonInDash\" label=\"One Time Passwort verwalten\" onClick={this.callShopManagementCreateOTPS}></Button>\n            </Box>\n        )\n    }\n}\n\nclass DataQuickViewViewOTPs extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n        };\n\n        this.callShopManagementViewOTPS = this.callShopManagementViewOTPS.bind(this)\n    }\n\n    callShopManagementViewOTPS() {\n        window.location.assign(\"#/eventmgmt/shop/ViewOTPs\")\n    }\n\n    render() {\n        return (\n            <Box name=\"CreateOTPS\" className=\"quickViewOuterBox\">\n                <Text weight=\"bold\" size=\"large\">Vorhandene One Time Passwörter</Text>\n                <Box pad=\"small\" align=\"center\">\n                    <Text>Liste mit den existierenden One Time Passwörtern</Text>\n                    <Text>und die Möglichkeit einzelne zu löschen.</Text>                    \n                </Box>\n                <Button className=\"buttonInDash\" label=\"One Time Passwort verwalten\" onClick={this.callShopManagementViewOTPS}></Button>\n            </Box>\n        )\n    }\n}\n\nclass ShopManagement extends React.Component {\n    //Stellt die Übersichtsseite des Shopmanagements im Browser dar\n    static contextType = UserContext;\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            initializeStep: 0,\n            openBookings: 0,\n            initialList: false,\n            salesStatus: true,\n            bankStatus: false,\n            payPalStatus: false,\n            maxPersonenProEvent: 0,\n            maxTicketsProEvent: 0,\n            maxTicketmenge: [{ Tickettype: \"Absolvententickets\", Anzahl: 1 },\n            { Tickettype: \"Begleitertickets\", Anzahl: 2 }],\n            statusBookings:\n                [{ status: \"Gebucht\", Anzahl: 0 },\n                { status: \"Offen\", Anzahl: 0 },\n                { status: \"Storniert\", Anzahl: 0 }],\n            statusSales:\n                [{ status: \"Verfügbare Plätze\", Anzahl: 0 },\n                { status: \"Verkaufte Plätze\", Anzahl: 0 },\n                { status: \"Stornierte Tickets\", Anzahl: 0 },\n                { status: \"Rollstuhlfahrer\", Anzahl: 0 },\n                { status: \"Parktickets\", Anzahl: 0  }],\n        }\n        this.changeInitializeStep = this.changeInitializeStep.bind(this);\n        this.getValuesFromConfig = this.getValuesFromConfig.bind(this);\n        this.setConfMaxTicketsFromConf = this.setConfMaxTicketsFromConf.bind(this);\n        this.setMaxTicketMenge = this.setMaxTicketMenge.bind(this);\n        this.getBookings = this.getBookings.bind(this);\n        this.componentDidMount = this.componentDidMount.bind(this);\n        this.setConfSalesStatus = this.setConfSalesStatus.bind(this);\n        this.createOTPwithEmailAndRole = this.createOTPwithEmailAndRole.bind(this);\n        this.setShopConfigInitialList = this.setShopConfigInitialList.bind(this);\n        this.setBankStatus = this.setBankStatus.bind(this);\n        this.setPayPalStatus = this.setPayPalStatus.bind(this);\n        this.setConfBankStatus = this.setConfBankStatus.bind(this);\n        this.setConfPayPalStatus = this.setConfPayPalStatus.bind(this);\n        this.getPayPalStatus = this.getPayPalStatus.bind(this);\n        this.getBankStatus = this.getBankStatus.bind(this);\n        this.getTickets = this.getTickets.bind(this);\n        this.setTickets = this.setTickets.bind(this);\n    }\n\n    changeInitializeStep(value) {\n        this.setState({ initializeStep: value });\n    }\n\n    // Initialize Component - Execute Functions for 1. Get Bookings 2. Get Max Tickets\n    componentDidMount() {\n        this.getBookings();\n        this.getTickets();\n        this.getValuesFromConfig();\n    }\n\n    async getBookings() {\n        //Ruft die Buchungen aus dem Backend ab, um diese in der Schnellübersicht darstellen zu können\n        const response = await fetch(Config.BACKEND_BASE_URI + '/api/v2/bookings/', {\n            method: 'GET',\n            mode: 'cors',\n            cache: 'no-cache',\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': 'Bearer ' + this.context.token,\n            },\n        }).catch(console.log);\n\n        if (!response.ok) {\n            switch (response.status) {\n                case 500:\n                    alert(\"Die Anmeldung ist aufgrund eines Server-Fehlers fehlgeschlagen. Bitte versuchen Sie es später erneut.\");\n                    break;\n                case 501:\n                    alert(\"Der Server kann die gewünschte Anfrage nicht ausführen.\");\n                    break;\n                default:\n                    let res = await response.json().catch(console.log);\n                    alert(res.message);\n            }\n            return;\n        } else {\n            const rückgabe = await response.json().catch(console.log);\n            if (rückgabe) {\n                var bezahlt = 0;\n                var unbezahlt = 0;\n                var storniert = 0;\n                for (var test = 0; test < rückgabe.length; test++) {\n                    if (rückgabe[test].paidAt !== null && rückgabe[test].canceled === false) {\n                        bezahlt = bezahlt + 1;\n                    }\n                    if (rückgabe[test].paidAt === null && rückgabe[test].canceled === false) {\n                        unbezahlt = unbezahlt + 1;\n                    }\n                    if (rückgabe[test].canceled === true) {\n                        storniert = storniert + 1;\n                    }\n                }\n                this.setBookings(bezahlt, unbezahlt, storniert);\n            }\n        }\n    }\n\n    async getTickets() {\n        //Ruft die Tickets aus dem Backend ab, um diese in der Schnellübersicht darstellen zu können\n        const response = await fetch(Config.BACKEND_BASE_URI + '/api/v2/ticketsBooked', {\n            method: 'GET', // *GET, POST, PUT, DELETE, etc.\n            mode: 'cors', // no-cors, *cors, same-origin\n            cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': 'Bearer ' + this.context.token,\n            }\n        }).catch(console.log)\n\n        if (!response) {\n            console.log(\"Keine Antwort beim Abruf der Tickets erhalten\");\n            return;\n        }\n        if (!response.ok) {\n            console.log(\"Fehler beim Abruf der Tickets: \" + response.message);\n            return;\n        }\n        if (response.ok) {\n            const rückgabe = await response.json().catch(console.log);\n            if (rückgabe) {\n                var verfügbar = this.state.maxTicketsProEvent;\n                var verkauft = 0;\n                var storniert = 0;\n                var rollstuhlFahrer = 0;\n                var parkTickets = 0;\n                \n                    if (verfügbar) {\n                        for (var lauf = 0; lauf < rückgabe.length; lauf++) {\n                            if (rückgabe[lauf].createdAt && rückgabe[lauf].canceled !== true && rückgabe[lauf].ticketType !== 2) {\n                                verkauft = verkauft + 1;\n                            }\n                            if (rückgabe[lauf].createdAt && rückgabe[lauf].canceled === true) {\n                                storniert = storniert + 1;\n                            }\n                            if (rückgabe[lauf].isWheelchairUser === true) {\n                                rollstuhlFahrer = rollstuhlFahrer + 1;\n                            }\n                            if(rückgabe[lauf].createdAt && rückgabe[lauf].canceled !== true && rückgabe[lauf].ticketType === 2){\n                                parkTickets = parkTickets + 1;\n                            }\n                        }\n                        verfügbar = verfügbar - verkauft;\n                        this.setTickets(verfügbar, verkauft, storniert, rollstuhlFahrer, parkTickets);\n                    }\n            }\n        }\n    }\n\n    //Get Max Tickets Configured form Configuration\n    async getValuesFromConfig() {\n        var response = await fetch(Config.BACKEND_BASE_URI + \"/api/v2/shopConfig\", {\n            method: 'GET', // *GET, POST, PUT, DELETE, etc.\n            mode: 'cors', // no-cors, *cors, same-origin\n            cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': 'Bearer ' + this.context.token,\n            }\n        }).catch(console.log)\n\n        if (!response) {\n            console.log(\"Keine Antwort beim Abruf der Konfiguration erhalten!\")\n            return;\n        }\n\n        if (!response.ok) {\n            console.log(\"Fehler beim Abrufen der Konfiguration: \" + response.message)\n            return;\n        }\n        if (response.ok) {\n            var data = await response.json().catch(console.log)\n\n            if (!data) {\n                console.log(\"Keine Daten beim Abruf der Konfiugration erhalten!\")\n                return;\n            }\n            else {\n                var maxTickets = [{ Tickettype: \"Absolvententickets\", Anzahl: data.max_TicketType_0_pro_Absolvent },\n                { Tickettype: \"Begleitertickets\", Anzahl: data.max_TicketType_1_pro_Absolvent }]\n                this.setState({\n                    salesStatus: data.salesStatus,\n                    maxPersonenProEvent: data.max_Person_pro_Event,\n                    maxTicketsProEvent: data.max_Tickets_pro_Event,\n                    initialList: data.initialeOPTListe,\n                    maxTicketmenge: maxTickets\n                })\n                console.log(\"Die Konfiguration wurde erfolgreich eingelesen!\");\n            }\n        }\n    }\n\n    // Write new Max Tickets into Configuration \n    async setConfMaxTicketsFromConf(absolvententickets, begleitertickets) {\n        var response = await fetch(Config.BACKEND_BASE_URI + \"/api/v2/shopConfig\", {\n            method: 'PUT', // *GET, POST, PUT, DELETE, etc.\n            mode: 'cors', // no-cors, *cors, same-origin\n            cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': 'Bearer ' + this.context.token,\n            },\n            body: JSON.stringify({\n                max_TicketType_0_pro_Absolvent: absolvententickets,\n                max_TicketType_1_pro_Absolvent: begleitertickets\n            })\n        }).catch(console.log)\n\n        if (!response) {\n            console.log(\"Keine Antwort beim Setzen der maximalen Ticketanzahl vom Backend-Server erhalten!\");\n            return;\n        }\n        if (!response.ok) {\n            console.log(\"Fehler beim Setzten der Werte für die maximale Ticketanzahl: \" + response.message);\n            return;\n        }\n\n        if (response.ok) {\n            this.setMaxTicketMenge(absolvententickets, begleitertickets)\n        }\n    };\n\n    //Write max Tickets into Component State \n    setMaxTicketMenge(Absolvententickets, Begleitertickets) {\n        var data = [{ Tickettype: \"Absolvententickets\", Anzahl: Absolvententickets },\n        { Tickettype: \"Begleitertickets\", Anzahl: Begleitertickets }]\n        this.setState({ maxTicketmenge: data })\n    }\n\n    setBookings(bezahlt, unbezahlt, storniert) {\n        var data = [{ status: \"Gebucht\", Anzahl: bezahlt},\n        { status: \"Offen\", Anzahl: unbezahlt},\n        { status: \"Storniert\", Anzahl: storniert}];\n        this.setState({ statusBookings: data });\n    }\n\n    setTickets(verfügbar, verkauft, storniert, rollstuhlFahrer, parkTickets) {\n        var data = [{ status: \"Verfügbare Plätze\", Anzahl: verfügbar},\n        { status: \"Verkaufte Plätze\", Anzahl: verkauft},\n        { status: \"Stornierte Tickets\", Anzahl: storniert},\n        { status: \"Rollstuhlfahrer\", Anzahl: rollstuhlFahrer},\n        { status: \"Parktickets\" , Anzahl: parkTickets }];\n        this.setState({ statusSales: data });\n    }\n\n    // Write Sales Status to Config \n    async setConfSalesStatus(newSalesStatus) {\n        var response = await fetch(Config.BACKEND_BASE_URI + \"/api/v2/shopConfig\", {\n            method: 'PUT', // *GET, POST, PUT, DELETE, etc.\n            mode: 'cors', // no-cors, *cors, same-origin\n            cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': 'Bearer ' + this.context.token,\n            },\n            body: JSON.stringify({\n                salesStatus: newSalesStatus\n            })\n        }).catch(console.log)\n\n        if (!response) {\n            console.log(\"Keine Antwort beim Setzen des Verkaufsstatus vom Backend-Server erhalten!\")\n            return;\n        }\n        if (!response.ok) {\n            console.log(\"Fehler beim Setzten des Wertes für den Verkaufsstatus: \" + response.message)\n            return;\n        }\n\n        if (response.ok) {\n            this.setSalesStatus(newSalesStatus)\n            if (newSalesStatus) { console.log(\"Der Verkauf wurde aktiviert!\") };\n            if (!newSalesStatus) { console.log(\"Der Verkauf wurde deaktiviert!\") };\n        }\n    };\n\n    // Write salesStatus into Component State\n    setSalesStatus(status) {\n        this.setState({ salesStatus: status });\n    }\n\n    //Send E-Mail and Role to create a One Time Passwort\n    async createOTPwithEmailAndRole(eMail, role) {\n        var response = await fetch(Config.BACKEND_BASE_URI + \"/api/v2/oneTimePasses\", {\n            method: 'POST', // *GET, POST, PUT, DELETE, etc.\n            mode: 'cors', // no-cors, *cors, same-origin\n            cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': 'Bearer ' + this.context.token,\n            },\n            body: JSON.stringify({\n                email: eMail,\n                targetRole: role\n            })\n        }).catch(console.log)\n\n        if (!response) {\n            console.log(\"Keine Antwort vom Backend bei der Erstellung des One Time Passworts für die E-Mail:\" + eMail)\n            return;\n        }\n        if (!response.ok) {\n            console.log(\"Fehler bei der Erstellung eines One Time Passwortes: \" + response.message)\n            return;\n        }\n        if (response.ok) {\n            console.log(\"One Time Passwort für die E-Mail: \" + eMail + \" und der Rolle: \" + role + \" erstellt!\")\n            return 1;\n        }\n    };\n\n    //TODO CHECK\n    async setShopConfigInitialList(intialListStatus) {\n        var response = await fetch(Config.BACKEND_BASE_URI + \"/api/v2/shopConfig\", {\n            method: 'PUT', // *GET, POST, PUT, DELETE, etc.\n            mode: 'cors', // no-cors, *cors, same-origin\n            cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': 'Bearer ' + this.context.token,\n            },\n            body: JSON.stringify({\n                initialeOPTListe: intialListStatus\n            })\n        }).catch(console.log)\n\n        if (!response) {\n            console.log(\"Keine Antwort beim Setzen des Wertes für die intiale OTP-Liste!\")\n            return;\n        }\n        if (!response.ok) {\n            console.log(\"Fehler beim Setzten des Wertes für die intiale OTP-Liste: \" + response.message)\n        }\n\n        if (response.ok) {\n            if (intialListStatus) { console.log(\"Intiale OTP-Liste wurde eingelesen\") };\n            this.setState({ initialList: true })\n        }\n    };\n\n    async setConfBankStatus(newBankStatus) {\n        //Ändert den Status der Bankverbindung in der Schnellübersicht, wenn diese in den PaymentOptions verändert wird\n        var response = await fetch(Config.BACKEND_BASE_URI + \"/api/v2/paymentOptions\", {\n            method: 'GET', // *GET, POST, PUT, DELETE, etc.\n            mode: 'cors', // no-cors, *cors, same-origin\n            cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': 'Bearer ' + this.context.token,\n            },\n        }).catch(console.log)\n\n        if (!response) {\n            console.log(\"Keine Antwort beim Abrufen der Bankverbindung vom Backend-Server erhalten!\")\n            return;\n        }\n        if (!response.ok) {\n            console.log(\"Fehler beim Abrufen der Bankverbindung vom Backendserver: \" + response.message)\n            return;\n        }\n\n        if (response.ok) {\n            var paymentOptions = await response.json();\n            paymentOptions.Bank.Aktiviert = newBankStatus;\n            var response2 = await fetch(Config.BACKEND_BASE_URI + \"/api/v2/paymentOptions\", {\n                method: 'PUT', // *GET, POST, PUT, DELETE, etc.\n                mode: 'cors', // no-cors, *cors, same-origin\n                cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n                headers: {\n                    'Content-Type': 'application/json',\n                    'Authorization': 'Bearer ' + this.context.token,\n                },\n                body: JSON.stringify({\n                    Bank: {\n                        Empfänger: paymentOptions.Bank.Empfänger,\n                        Name_der_Bank: paymentOptions.Bank.Name_der_Bank,\n                        IBAN: paymentOptions.Bank.IBAN,\n                        BIC: paymentOptions.Bank.BIC,\n                        Verwendungszweck: paymentOptions.Bank.Verwendungszweck,\n                        Aktiviert: paymentOptions.Bank.Aktiviert\n                    }\n                })\n            }).catch(console.log)\n\n            if (!response2) {\n                console.log(\"Keine Antwort beim Schreiben der Bankverbindung auf den Backend-Server!\");\n                return;\n            }\n            if (!response2.ok) {\n                console.log(\"Fehler beim Schreiben der Bankverbindung auf den Backend-Server: \" + response2.message);\n                return;\n            }\n            if (response2.ok) {\n                this.setBankStatus(newBankStatus)\n                if (newBankStatus) { console.log(\"Die Bankverbindung wurde aktiviert!\") };\n                if (!newBankStatus) { console.log(\"Die Bankverbindung wurde deaktiviert!\") };\n            }\n        }\n    };\n\n\n    async setConfPayPalStatus(newPayPalStatus) {\n        //Ändert den Status der PayPal-Verbindung in der Schnellübersicht, wenn diese in den PaymentOptions verändert wird\n        var response = await fetch(Config.BACKEND_BASE_URI + \"/api/v2/paymentOptions\", {\n            method: 'GET', // *GET, POST, PUT, DELETE, etc.\n            mode: 'cors', // no-cors, *cors, same-origin\n            cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': 'Bearer ' + this.context.token,\n            }\n        }).catch(console.log)\n\n        if (!response) {\n            console.log(\"Keine Antwort beim Abrufen der PayPal-Verbindung vom Backend-Server erhalten!\")\n            return;\n        }\n        if (!response.ok) {\n            console.log(\"Fehler beim Abrufen der PayPal-Verbindung vom Backendserver: \" + response.message)\n            return;\n        }\n        var paymentOptions = await response.json();\n        paymentOptions.PayPal.Aktiviert = newPayPalStatus;\n        var response2 = await fetch(Config.BACKEND_BASE_URI + \"/api/v2/paymentOptions\", {\n            method: 'PUT', // *GET, POST, PUT, DELETE, etc.\n            mode: 'cors', // no-cors, *cors, same-origin\n            cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': 'Bearer ' + this.context.token,\n            },\n            body: JSON.stringify({\n                PayPal: {\n                    PayPal_Link: paymentOptions.PayPal.PayPal_Link,\n                    PayPal_Mail: paymentOptions.PayPal.PayPal_Mail,\n                    PayPal_Verwendung: paymentOptions.PayPal.PayPal_Verwendung,\n                    Aktiviert: paymentOptions.PayPal.Aktiviert\n                }\n            })\n        }).catch(console.log)\n\n        if (!response2) {\n            console.log(\"Keine Antwort beim Schreiben der PayPal-Verbindung auf den Backend-Server!\");\n            return;\n        }\n        if (!response2.ok) {\n            console.log(\"Fehler beim Schreiben der PayPal-Verbindung auf den Backend-Server: \" + response2.message);\n            return;\n        }\n        if (response2.ok) {\n            this.setPayPalStatus(newPayPalStatus)\n            if (newPayPalStatus) { console.log(\"Die PayPal-Verbindung wurde aktiviert!\") };\n            if (!newPayPalStatus) { console.log(\"Die PayPal-Verbindung wurde deaktiviert!\") };\n        }\n    }\n\n    setBankStatus(status) {\n        //Setzt den lokalen Status der Bankverbindung\n        this.setState({ bankStatus: status });\n    }\n\n    setPayPalStatus(status) {\n        //Setzt den lokalen Status der PayPal-Verbindung\n        this.setState({ payPalStatus: status });\n    }\n\n    async getBankStatus() {\n        //Ruft den aktuellen Bankverbindungsstatus aus der Backend-Config ab\n        var response = await fetch(Config.BACKEND_BASE_URI + \"/api/v2/paymentOptions\", {\n            method: 'GET', // *GET, POST, PUT, DELETE, etc.\n            mode: 'cors', // no-cors, *cors, same-origin\n            cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': 'Bearer ' + this.context.token,\n            },\n        }).catch(console.log)\n\n        if (!response) {\n            console.log(\"Keine Antwort beim Abrufen der Bankverbindung vom Backend-Server erhalten!\")\n            return;\n        }\n        if (!response.ok) {\n            console.log(\"Fehler beim Abrufen der Bankverbindung vom Backendserver: \" + response.message)\n            return;\n        }\n\n        if (response.ok) {\n            var paymentOptions = await response.json();\n            this.setState({ bankStatus: paymentOptions.Bank.Aktiviert });\n            console.log(\"Der aktuelle Status der Bankverbindung ist: \" + this.state.bankStatus);\n        }\n    }\n\n\n    async getPayPalStatus() {\n        //Ruft den aktuellen PayPal-Verbindungsstatus aus der Backend-Config ab\n        var response = await fetch(Config.BACKEND_BASE_URI + \"/api/v2/paymentOptions\", {\n            method: 'GET', // *GET, POST, PUT, DELETE, etc.\n            mode: 'cors', // no-cors, *cors, same-origin\n            cache: 'no-cache', // *default, no-cache, reload, force-cache, only-if-cached\n            headers: {\n                'Content-Type': 'application/json',\n                'Authorization': 'Bearer ' + this.context.token,\n            },\n        }).catch(console.log)\n\n        if (!response) {\n            console.log(\"Keine Antwort beim Abrufen der PayPal-Verbindung vom Backend-Server erhalten!\")\n            return;\n        }\n        if (!response.ok) {\n            console.log(\"Fehler beim Abrufen der PayPal-Verbindung vom Backendserver: \" + response.message)\n            return;\n        }\n        if (response.ok) {\n            var paymentOptions = await response.json();\n            this.setState({ payPalStatus: paymentOptions.PayPal.Aktiviert });\n            console.log(\"Der aktuelle Status der PayPal-Verbindung ist: \" + this.state.payPalStatus);\n        }\n    }\n\n\n\n    render() {\n        return (\n            <Switch>\n                <Route path=\"/eventmgmt/shop/ConfMaxTickets\">\n                    <ShopManagementConfMaxTickets setConfMaxTicketsFromConf={this.setConfMaxTicketsFromConf}>\n                    </ShopManagementConfMaxTickets>\n                </Route>\n\n                <Route path=\"/eventmgmt/shop/ViewBookings\">\n                    <ShopManagementViewBookings ></ShopManagementViewBookings>\n                </Route>\n\n                <Route path=\"/eventmgmt/shop/paymentOptions\">\n                    <ShopManagementPaymentOptions bankStatus={this.state.bankStatus} setConfBankStatus={this.setConfBankStatus} payPalStatus={this.state.payPalStatus}\n                        setConfPayPalStatus={this.setConfPayPalStatus}></ShopManagementPaymentOptions>\n                </Route>\n                <Route path=\"/eventmgmt/shop/ManageSalesStatus\">\n                    <ShopManagementManageSalesStatus salesStatus={this.state.salesStatus} setConfSalesStatus={this.setConfSalesStatus}></ShopManagementManageSalesStatus>\n                </Route>\n\n                <Route path=\"/eventmgmt/shop/createOTPs\">\n                    <ShopManagamentAbsolventenListe createOTPwithEmailAndRole={this.createOTPwithEmailAndRole} setShopConfigInitialList={this.setShopConfigInitialList}></ShopManagamentAbsolventenListe>\n                </Route>\n                <Route path=\"/eventmgmt/shop/ManageOTPs\">\n                    <ShopManagementManageOTPS createOTPwithEmailAndRole={this.createOTPwithEmailAndRole}></ShopManagementManageOTPS>\n                </Route>\n                <Route path=\"/eventmgmt/shop/ViewOTPs\">\n                    <ShopManagementViewOTPs></ShopManagementViewOTPs>\n                </Route>\n\n\n                <Route path=\"/eventmgmt/shop\">\n                    <Box>\n                        <Box>\n                            <Text size=\"xxlarge\" weight=\"bold\" alignSelf=\"center\">Willkommen in der Shop-Verwaltung</Text>\n                            <Box pad=\"medium\"></Box>\n                        </Box>\n                        <Box direction=\"row\" wrap={true} justify=\"center\">\n                        <Box ClassName=\"twoGroupedBoards\" direction=\"row\" wrap={true} justify=\"center\">\n                            <DataQuickViewMaxTickets maxTicketmenge={this.state.maxTicketmenge}></DataQuickViewMaxTickets>\n                            <DataQuickViewPayment bankStatus={this.state.bankStatus} getBankStatus={this.getBankStatus} payPalStatus={this.state.payPalStatus}\n                                getPayPalStatus={this.getPayPalStatus}></DataQuickViewPayment>\n                        </Box>\n                        <Box ClassName=\"twoGroupedBoards\" direction=\"row\" wrap={true} justify=\"center\">\n                            <DataQuickViewBookings statusBookings={this.state.statusBookings}></DataQuickViewBookings>\n                            <DataQuickViewSalesStatistics statusSales={this.state.statusSales}></DataQuickViewSalesStatistics>\n                        </Box>\n                        <Box ClassName=\"twoGroupedBoards\" direction=\"row\" wrap={true} justify=\"center\">\n                            <DataQuickViewManageSales salesStatus={this.state.salesStatus} setSalesStatus={this.setSalesStatus}></DataQuickViewManageSales>\n                            <DataQuickViewCreateOTPS initialList={this.state.initialList}></DataQuickViewCreateOTPS>\n                        </Box>\n                        <Box ClassName=\"twoGroupedBoards\" direction=\"row\" wrap={true} justify=\"center\">\n                            <DataQuickViewManageOTPS ></DataQuickViewManageOTPS>\n                            <DataQuickViewViewOTPs></DataQuickViewViewOTPs>\n                        </Box>\n                        </Box>\n                    </Box>\n                </Route>\n            </Switch>\n        );\n    }\n}\n\nexport default ShopManagement;\n","import React from 'react';\nimport { Box, Header, Menu } from 'grommet';\nimport { Switch, Route, Link } from \"react-router-dom\";\nimport EntranceDashboard from './Components/EntranceDashboard';\nimport TicketReaderManager from './Components/TicketReaderManager';\nimport ShopManagement from './Components/ShopManagement';\nimport UserContext from '../AppContexts/UserContext';\n\nimport LocalTicketMirror from './Classes/LocalTicketMirror';\n\n// eslint-disable-next-line\nimport RemoteTicketReader from './Classes/RemoteTicketReader';\n\nclass EventManagement extends React.Component {\n\n    static contextType = UserContext;\n\n    constructor(props) {\n        super(props);\n        this.rTRHandler = this.rTRHandler.bind(this);\n\n        // Required code for offline ticket data sync\n        this.localTicketMirror = new LocalTicketMirror();\n\n        // RTRList should be an array of remoteTicketReaders\n        this.state = { RTRList: [] };\n    }\n\n    // FOR LOGIN\n\n    componentDidMount() {\n        this.context.requireLogin(1);\n    }\n\n    componentDidUpdate() {\n        this.context.requireLogin(1);\n    }\n\n    // END: FOR LOGIN\n\n    /**\n     * Handler for new connected remote ticket readers\n     * @param {RemoteTicketReader} remoteTicketReader \n     */\n    rTRHandler(remoteTicketReader) {\n        // Adding the remote ticket reader to the list\n        let RTRList = this.state.RTRList;\n        RTRList.push(remoteTicketReader);\n        this.setState({ RTRList: RTRList });\n\n        // In case the rtr is dicsonnected, it should be removed from the list in the view state\n        remoteTicketReader.onConnectionChanged = (connectionState) => {\n            switch (connectionState) {\n                case \"connected\":\n                    // The connection has become fully connected\n                    break;\n                case \"disconnected\":\n                    break;\n                case \"failed\":\n                    // One or more transports has terminated unexpectedly or in an error\n                    this.removeRTR(remoteTicketReader);\n                    break;\n                case \"closed\":\n                    // The connection has been closed\n                    break;\n                default:\n                    break;\n            }\n            this.forceUpdate();\n        }\n\n        // Setting eventhandler for reading a ticket\n        remoteTicketReader.onGetTicket = (identifier, callback) => {\n            // Trying to get the ticket from the IDB\n            this.localTicketMirror.getTicket(identifier).then((ticket) => {\n                callback(ticket);\n            }).catch((error) => {\n                // In case of an error, providing an error msg\n                callback(null, error);\n            });\n        }\n\n        // Setting eventhandler for obliterating a ticket\n        remoteTicketReader.onObliterateTicket = (identifier, secretIngredient, callback) => {\n            this.localTicketMirror.obliterateTicket(identifier, secretIngredient).then((result) => {\n                callback(result);\n            }).catch((error) => {\n                callback(null, error)\n            });\n        }\n    }\n\n    removeRTR(remoteTicketReader) {\n        console.debug(\"Attempting to remove closed remote ticket reader\");\n        let RTRList = this.state.RTRList;\n        let idx = RTRList.indexOf(remoteTicketReader);\n        RTRList.splice(idx, 1);\n        this.setState({ RTRList: RTRList });\n    }\n\n    render() {\n        return (\n\n            <Box className=\"EventManagement\">\n                <Header background=\"brand\" justify=\"between\" pad=\"10px\">\n                    <Link to=\"/eventmgmt\">Home</Link>\n                    <Menu label=\"Account\" items={[{ label: 'Logout', onClick: this.context.logout }]} />\n                </Header>\n                <Box className=\"left-right-grid\" direction=\"row\" justify=\"start\" wrap={true}>\n                    <Box className=\"sidebar\">\n                        <ul>\n                            <li><Link to=\"/eventmgmt/rtrm\">Manage Remote Ticket Readers</Link></li>\n                            <li><Link to=\"/eventmgmt/entrancedb\">Entrance Dashboard</Link></li>\n                            <li><Link to=\"/eventmgmt/shop\">Shop Management</Link></li>\n                        </ul>\n                    </Box>\n                    <Box className=\"main-content\" pad=\"medium\">\n                        <Switch>\n                            <Route path=\"/eventmgmt/rtrm\">\n                                <TicketReaderManager RTRList={this.state.RTRList} onRTR={this.rTRHandler}></TicketReaderManager>\n                            </Route>\n                            <Route path=\"/eventmgmt/entrancedb\">\n                                <EntranceDashboard localTicketMirror={this.localTicketMirror} onRemoveRTR={() => { }}></EntranceDashboard>\n                            </Route>\n                            <Route path=\"/eventmgmt/shop\">\n                                <ShopManagement></ShopManagement>\n                            </Route>\n                        </Switch>\n                    </Box>\n                </Box>\n            </Box>\n        );\n    }\n}\n\nexport default EventManagement;\n","import React from 'react';\nimport './App.css';\n\nimport UserContext from './AppContexts/UserContext';\nimport Login from './Authentication/Login';\nimport SystemSetup from './SystemSetup/SystemSetup';\nimport Ticketshop from './Ticketshop/Ticketshop';\nimport Entrance from './Entrance/Entrance';\nimport EventManagement from './EventManagement/EventManagement';\nimport { Grommet, grommet, Box, Heading } from 'grommet';\nimport { Switch, Route, Link } from \"react-router-dom\";\n\nimport config from './config';\n\nclass App extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = { userContext: null, setupMode: false };\n    this.logout = this.logout.bind(this);\n    this.initUserContext = this.initUserContext.bind(this);\n    this.setUserContext = this.setUserContext.bind(this);\n    this.checkUserContext = this.checkUserContext.bind(this);\n    this.redirectUserToHome = this.redirectUserToHome.bind(this);\n  }\n\n  componentDidMount() {\n    // Redirect if plain url was requested\n    if(window.location.hash === \"#/\" || window.location.hash === \"#\" || window.location.hash === \"\"){\n      window.location.assign('#/login/');\n    }\n\n    // Check system status once mounted\n    this.detectSystemState();\n\n    // Check system status frequently (currently every 60 seconds)\n    window.setInterval(() => {\n      this.detectSystemState();\n      this.detectAuthState(this.state.userContext);\n    }, 60000);\n\n    // Initialize userContext\n    this.initUserContext();\n  }\n\n  async detectSystemState() {\n    try {\n      var response = await fetch(config.BACKEND_BASE_URI, {\n        method: 'GET',\n        mode: 'cors',\n        cache: 'no-cache'\n      })\n      if (response.status === 200) {\n        this.setState({ setupMode: false });\n      } else {\n        this.setState({ setupMode: true });\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  /**\n   * Tries to fetch the data of the user to check if the api token works\n   * @param {*} userData \n   */\n  async detectAuthState(userData) {\n    // Try token\n    try {\n      var response = await fetch(config.BACKEND_BASE_URI + \"/api/v2/users/\" + userData.user.id, {\n        method: 'GET',\n        mode: 'cors',\n        cache: 'no-cache',\n        headers: {\n          Authorization: 'Bearer ' + userData.token\n        }\n      })\n      if (response.status === 401) {\n        this.clearUserContext();\n        this.setState({ userContext: null });\n      }\n    } catch (error) {\n      console.log(error);\n    }\n  }\n\n  /**\n   * Loads the data of the user from LocalStorage into the UserContext\n   */\n  initUserContext() {\n    let userData = JSON.parse(localStorage.getItem('userContext'));\n    this.setState({ userContext: userData });\n    this.detectAuthState(userData);\n  }\n\n  /**\n   * Sets the current UserContext to new data\n   * @param {*} userData \n   */\n  setUserContext(userData) {\n    localStorage.setItem('userContext', JSON.stringify(userData));\n    this.setState({ userContext: userData });\n  }\n\n  /**\n   * Clears LocalStorage and the UserContext object\n   */\n  clearUserContext() {\n    localStorage.clear();\n    this.setState({ userContext: null });\n  }\n\n  /**\n   * Deletes data to prevent from reuse of the token and userdata\n   * finally redirects to login\n   */\n  logout() {\n    if (this.state.userContext && this.state.userContext.user.role === 0) {\n      let ok = window.confirm('Sollen auch eventuell lokal gespeicherten Daten für den Einlass unwiederruflich gelöscht werden?', \"Nein\");\n      if (ok) {\n        window.indexedDB.deleteDatabase(config.IDB_NAME);\n      }\n    }\n    this.clearUserContext();\n    window.location.assign('#/login');\n  }\n\n  /**\n   * Method that checks if the user is logged in. For use in subcomponents\n   * @param {Number} requiredRole - The role that is required\n   */\n  checkUserContext(requiredRole){\n    if (!this.state.userContext || this.state.userContext.user.role > requiredRole) {\n      window.location.assign('#/login/');\n    }\n  }\n\n  redirectUserToHome(){\n    if (this.state.userContext && this.state.userContext.user.role === 0) {\n      window.location.assign('#/eventmgmt/');\n      return;\n    }\n    if(this.state.userContext && this.state.userContext.user.role === 1) {\n      window.location.assign('#/guest/');\n      return;\n    }\n  }\n\n  render() {\n    return (\n      <UserContext.Provider value={Object.assign(this.state.userContext ? this.state.userContext : {}, { logout: this.logout, setUserContext: this.setUserContext, requireLogin: this.checkUserContext , redirectUserToHome: this.redirectUserToHome })}>\n        <Grommet theme={grommet}>\n          {!this.state.setupMode &&\n            <Box>\n              <Switch>\n                <Route path=\"/guest\">\n                  <Ticketshop eigenschaft1=\"test\"></Ticketshop>\n                </Route>\n                <Route path=\"/entrance\">\n                  <Entrance></Entrance>\n                </Route>\n                <Route path=\"/eventmgmt\">\n                  <EventManagement></EventManagement>\n                </Route>\n                <Route path=\"/login\">\n                  <Login></Login>\n                </Route>\n                <Route path=\"/\">\n                  <ul>\n                    <li><Link to=\"/guest\">Ticketshop</Link></li>\n                    <li><Link to=\"/entrance\">Ticket-Reader</Link></li>\n                    <li><Link to=\"/eventmgmt\">Event-Management</Link></li>\n                    <li><Link to=\"/login\">Anmelden</Link></li>\n                  </ul>\n                </Route>\n              </Switch>\n            </Box>\n          }\n          {this.state.setupMode &&\n            <Box>\n              <Switch>\n                <Route path=\"/setup\">\n                  <SystemSetup></SystemSetup>\n                </Route>\n                <Route path=\"/\">\n                  <Box pad=\"medium\" alignContent=\"center\" direction=\"column\" align=\"center\">\n                    <Heading>Wartungsarbeiten</Heading>\n                    <p>\n                      Sehr geehrte Besucher*innen,<br />\n                      das Bachelorsnight Ticketsystem befindet sich derzeit im Wartungsmodus.<br />\n                      Bitte versuchen Sie es später erneut.\n                    </p>\n                  </Box>\n                </Route>\n              </Switch>\n            </Box>\n          }\n        </Grommet>\n      </UserContext.Provider>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter } from \"react-router-dom\";\nimport './index.css';\nimport App from './App';\n\n// eslint-disable-next-line\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<HashRouter><App /></HashRouter>, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n"],"sourceRoot":""}